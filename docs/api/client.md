# Client API - Accessing past results

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! Instead, edit the notebook w/the location & name as this file. -->

Use these objects to [access data from past runs and to manipulate tags](/metaflow/client). Objects in this module are organized as a hierarchy:

![Object hierarchy](/assets/hierarchy.png)

### Instantiating Objects

You can instantiate a specific object at any level of the hierarchy by providing a corresponding `pathspec`, e.g. from Metaflow logs.

 - `Metaflow()`
 - `Flow('HelloFlow')`
 - `Run('HelloFlow/2')`
 - `Step('HelloFlow/2/start')`
 - `Task('HelloFlow/2/start/1')`
 - `DataArtifact('HelloFlow/2/start/1/name')`

### Listing objects

Each object is a container (*an iterable*) that can be used to iterate over objects that are below it in the hierarchy. For instance, iterating over a `list(Flow(...))` yields a list of `Run`s, and `list(Run(...))` yields a list of `Step`s.

### Accessing children

Since each object is a container, you can access its children through the square-bracket notation, as if each object was a dictionary. For instance, you can access the object `Task('HelloFlow/2/start/1')` as follows:
```python
Flow('HelloFlow')['2']['start']['1']
```
You can also test if the object has a certain child:
```python
if '2' in Flow('HelloFlow'):
    print('Run found')
```

### Common attributes

All objects at the `Run` level and below have the following attributes:

 - `tags` (set) - tags associated with the run this object belongs to (user and system tags).
 - `user_tags` (set) - user tags associated with the run this object belongs to.
 - `system_tags` (set) - system tags associated with the run this object belongs to.
 - `created_at` (datetime) - Date and time this object was created.
 - `parent` (Metaflow object) - Parent of this object (e.g. `Run(...).parent` is a `Flow`).
 - `pathspec` (string) - Pathspec of this object (e.g. `HelloFlow/2` for a `Run`).
 - `path_components` (list) - Components of the pathspec.
 - `origin_pathspec` (string) - If the object was produced via [resume](/metaflow/debugging#how-to-use-the-resume-command), pathspec of the original object this object was cloned from.

### Object visibility

Note that only objects in [the current namespace](/scaling/tagging) can be instantiated. See [Namespace functions](#namespace) to see how to switch between namespaces. 

This module accesses all objects through the current metadata provider - either Metaflow Service or local metadata. See [Metadata functions](#metadata) for utilities related to metadata provider.

## Object Hierarchy

### Metaflow


<DocSection type="class" name="Metaflow" module="metaflow" show_import="False" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L2296">
<SigArgSection>
<SigArg name="_current_metadata" type="Optional" default="None" />
</SigArgSection>
<Description summary="Entry point to all objects in the Metaflow universe." extended_summary="This object can be used to list all the flows present either through the explicit property\nor by iterating over this object." />
<ParamSection name="Attributes">
	<Parameter name="flows" type="List[Flow]" desc="Returns the list of all `Flow` objects known to this metadata provider. Note that only\nflows present in the current namespace will be returned. A `Flow` is present in a namespace\nif it has at least one run in the namespace." />
</ParamSection>
</DocSection>


### Flow


<DocSection type="class" name="Flow" module="metaflow" show_import="False" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L2183">
<SigArgSection>
<SigArg name="pathspec" />
</SigArgSection>
<Description summary="A Flow represents all existing flows with a certain name, in other words,\nclasses derived from `FlowSpec`. A container of `Run` objects." />
<ParamSection name="Attributes">
	<Parameter name="latest_run" type="Run" desc="Latest `Run` (in progress or completed, successfully or not) of this flow." />
	<Parameter name="latest_successful_run" type="Run" desc="Latest successfully completed `Run` of this flow." />
</ParamSection>
</DocSection>



<DocSection type="method" name="Flow.runs" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L2233">
<SigArgSection>
<SigArg name="self" /><SigArg name="*tags: str" type="str" />
</SigArgSection>
<Description summary="Returns an iterator over all `Run`s of this flow." extended_summary="An optional filter is available that allows you to filter on tags.\nIf multiple tags are specified, only runs that have all the\nspecified tags are returned." />
<ParamSection name="Parameters">
	<Parameter name="tags" type="str" desc="Tags to match." />
</ParamSection>
<ParamSection name="Yields">
	<Parameter type="Run" desc="`Run` objects in this flow." />
</ParamSection>
</DocSection>


### Run


<DocSection type="class" name="Run" module="metaflow" show_import="False" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L1841">
<SigArgSection>
<SigArg name="pathspec" />
</SigArgSection>
<Description summary="A `Run` represents an execution of a `Flow`. It is a container of `Step`s." />
<ParamSection name="Attributes">
	<Parameter name="data" type="MetaflowData" desc="a shortcut to run['end'].task.data, i.e. data produced by this run." />
	<Parameter name="successful" type="bool" desc="True if the run completed successfully." />
	<Parameter name="finished" type="bool" desc="True if the run completed." />
	<Parameter name="finished_at" type="datetime" desc="Time this run finished." />
	<Parameter name="code" type="MetaflowCode" desc="Code package for this run (if present). See `MetaflowCode`." />
	<Parameter name="trigger" type="MetaflowTrigger" desc="Information about event(s) that triggered this run (if present). See `MetaflowTrigger`." />
	<Parameter name="end_task" type="Task" desc="`Task` for the end step (if it is present already)." />
</ParamSection>
</DocSection>



<DocSection type="method" name="Run.add_tag" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L2009">
<SigArgSection>
<SigArg name="self" /><SigArg name="tag" type="str" />
</SigArgSection>
<Description summary="Add a tag to this `Run`." extended_summary="Note that if the tag is already a system tag, it is not added as a user tag,\nand no error is thrown." />
<ParamSection name="Parameters">
	<Parameter name="tag" type="str" desc="Tag to add." />
</ParamSection>
</DocSection>



<DocSection type="method" name="Run.add_tags" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L2031">
<SigArgSection>
<SigArg name="self" /><SigArg name="tags" type="Iterable" />
</SigArgSection>
<Description summary="Add one or more tags to this `Run`." extended_summary="Note that if any tag is already a system tag, it is not added as a user tag\nand no error is thrown." />
<ParamSection name="Parameters">
	<Parameter name="tags" type="Iterable[str]" desc="Tags to add." />
</ParamSection>
</DocSection>



<DocSection type="method" name="Run.remove_tag" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L2045">
<SigArgSection>
<SigArg name="self" /><SigArg name="tag" type="str" />
</SigArgSection>
<Description summary="Remove one tag from this `Run`." extended_summary="Removing a system tag is an error. Removing a non-existent\nuser tag is a no-op." />
<ParamSection name="Parameters">
	<Parameter name="tag" type="str" desc="Tag to remove." />
</ParamSection>
</DocSection>



<DocSection type="method" name="Run.remove_tags" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L2067">
<SigArgSection>
<SigArg name="self" /><SigArg name="tags" type="Iterable" />
</SigArgSection>
<Description summary="Remove one or more tags to this `Run`." extended_summary="Removing a system tag will result in an error. Removing a non-existent\nuser tag is a no-op." />
<ParamSection name="Parameters">
	<Parameter name="tags" type="Iterable[str]" desc="Tags to remove." />
</ParamSection>
</DocSection>



<DocSection type="method" name="Run.replace_tag" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L2081">
<SigArgSection>
<SigArg name="self" /><SigArg name="tag_to_remove" type="str" /><SigArg name="tag_to_add" type="str" />
</SigArgSection>
<Description summary="Remove a tag and add a tag atomically. Removal is done first.\nThe rules for `Run.add_tag` and `Run.remove_tag` also apply here." />
<ParamSection name="Parameters">
	<Parameter name="tag_to_remove" type="str" desc="Tag to remove." />
	<Parameter name="tag_to_add" type="str" desc="Tag to add." />
</ParamSection>
</DocSection>



<DocSection type="method" name="Run.replace_tags" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L2105">
<SigArgSection>
<SigArg name="self" /><SigArg name="tags_to_remove" type="Iterable" /><SigArg name="tags_to_add" type="Iterable" />
</SigArgSection>
<Description summary="Remove and add tags atomically; the removal is done first.\nThe rules for `Run.add_tag` and `Run.remove_tag` also apply here." />
<ParamSection name="Parameters">
	<Parameter name="tags_to_remove" type="Iterable[str]" desc="Tags to remove." />
	<Parameter name="tags_to_add" type="Iterable[str]" desc="Tags to add." />
</ParamSection>
</DocSection>


### Step


<DocSection type="class" name="Step" module="metaflow" show_import="False" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L1651">
<SigArgSection>
<SigArg name="pathspec" />
</SigArgSection>
<Description summary="A `Step` represents a user-defined step, that is, a method annotated with the `@step` decorator." extended_summary="It contains `Task` objects associated with the step, that is, all executions of the\n`Step`. The step may contain multiple `Task`s in the case of a foreach step." />
<ParamSection name="Attributes">
	<Parameter name="task" type="Task" desc="The first `Task` object in this step. This is a shortcut for retrieving the only\ntask contained in a non-foreach step." />
	<Parameter name="finished_at" type="datetime" desc="Time when the latest `Task` of this step finished. Note that in the case of foreaches,\nthis time may change during execution of the step." />
	<Parameter name="environment_info" type="Dict[str, Any]" desc="Information about the execution environment." />
</ParamSection>
</DocSection>


### Task


<DocSection type="class" name="Task" module="metaflow" show_import="False" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L1064">
<SigArgSection>
<SigArg name="pathspec, attempt=None" />
</SigArgSection>
<Description summary="A `Task` represents an execution of a `Step`." extended_summary="It contains all `DataArtifact` objects produced by the task as\nwell as metadata related to execution.\n\nNote that the `@retry` decorator may cause multiple attempts of\nthe task to be present. Usually you want the latest attempt, which\nis what instantiating a `Task` object returns by default. If\nyou need to e.g. retrieve logs from a failed attempt, you can\nexplicitly get information about a specific attempt by using the\nfollowing syntax when creating a task:\n\n`Task('flow/run/step/task', attempt=<attempt>)`\n\nwhere `attempt=0` corresponds to the first attempt etc." />
<ParamSection name="Attributes">
	<Parameter name="metadata" type="List[Metadata]" desc="List of all metadata events associated with the task." />
	<Parameter name="metadata_dict" type="Dict[str, str]" desc="A condensed version of `metadata`: A dictionary where keys\nare names of metadata events and values the latest corresponding event." />
	<Parameter name="data" type="MetaflowData" desc="Container of all data artifacts produced by this task. Note that this\ncall downloads all data locally, so it can be slower than accessing\nartifacts individually. See `MetaflowData` for more information." />
	<Parameter name="artifacts" type="MetaflowArtifacts" desc="Container of `DataArtifact` objects produced by this task." />
	<Parameter name="successful" type="bool" desc="True if the task completed successfully." />
	<Parameter name="finished" type="bool" desc="True if the task completed." />
	<Parameter name="exception" type="object" desc="Exception raised by this task if there was one." />
	<Parameter name="finished_at" type="datetime" desc="Time this task finished." />
	<Parameter name="runtime_name" type="str" desc="Runtime this task was executed on." />
	<Parameter name="stdout" type="str" desc="Standard output for the task execution." />
	<Parameter name="stderr" type="str" desc="Standard error output for the task execution." />
	<Parameter name="code" type="MetaflowCode" desc="Code package for this task (if present). See `MetaflowCode`." />
	<Parameter name="environment_info" type="Dict[str, str]" desc="Information about the execution environment." />
</ParamSection>
</DocSection>



<DocSection type="method" name="Task.loglines" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L1520">
<SigArgSection>
<SigArg name="self" /><SigArg name="stream" type="str" /><SigArg name="as_unicode" type="bool" default="True" /><SigArg name="meta_dict" type="Optional" default="None" />
</SigArgSection>
<Description summary="Return an iterator over (utc_timestamp, logline) tuples." />
<ParamSection name="Parameters">
	<Parameter name="stream" type="str" desc="Either 'stdout' or 'stderr'." />
	<Parameter name="as_unicode" type="bool, default: True" desc="If as_unicode=False, each logline is returned as a byte object. Otherwise,\nit is returned as a (unicode) string." />
</ParamSection>
<ParamSection name="Yields">
	<Parameter type="Tuple[datetime, str]" desc="Tuple of timestamp, logline pairs." />
</ParamSection>
</DocSection>


### DataArtifact


<DocSection type="class" name="DataArtifact" module="metaflow" show_import="False" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L885">
<SigArgSection>
<SigArg name="pathspec" />
</SigArgSection>
<Description summary="A single data artifact and associated metadata. Note that this object does\nnot contain other objects as it is the leaf object in the hierarchy." />
<ParamSection name="Attributes">
	<Parameter name="data" type="object" desc="The data contained in this artifact, that is, the object produced during\nexecution of this run." />
	<Parameter name="sha" type="string" desc="A unique ID of this artifact." />
	<Parameter name="finished_at" type="datetime" desc="Corresponds roughly to the `Task.finished_at` time of the parent `Task`.\nAn alias for `DataArtifact.created_at`." />
</ParamSection>
</DocSection>


## Helper Objects

### MetaflowData


<DocSection type="class" name="MetaflowData" module="metaflow" show_import="False" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L1018">
<SigArgSection>
<SigArg name="" />
</SigArgSection>
<Description summary="Container of data artifacts produced by a `Task`. This object is\ninstantiated through `Task.data`." extended_summary="`MetaflowData` allows results to be retrieved by their name\nthrough a convenient dot notation:\n\n```python\nTask(...).data.my_object\n```\n\nYou can also test the existence of an object\n\n```python\nif 'my_object' in Task(...).data:\n    print('my_object found')\n```\n\nNote that this container relies on the local cache to load all data\nartifacts. If your `Task` contains a lot of data, a more efficient\napproach is to load artifacts individually like so\n\n```\nTask(...)['my_object'].data\n```" />

</DocSection>


### MetaflowCode


<DocSection type="class" name="MetaflowCode" module="metaflow" show_import="False" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L784">
<SigArgSection>
<SigArg name="" />
</SigArgSection>
<Description summary="Snapshot of the code used to execute this `Run`. Instantiate the object through\n`Run(...).code` (if any step is executed remotely) or `Task(...).code` for an\nindividual task. The code package is the same for all steps of a `Run`." extended_summary="`MetaflowCode` includes a package of the user-defined `FlowSpec` class and supporting\nfiles, as well as a snapshot of the Metaflow library itself.\n\nCurrently, `MetaflowCode` objects are stored only for `Run`s that have at least one `Step`\nexecuting outside the user's local environment.\n\nThe `TarFile` for the `Run` is given by `Run(...).code.tarball`" />
<ParamSection name="Attributes">
	<Parameter name="path" type="str" desc="Location (in the datastore provider) of the code package." />
	<Parameter name="info" type="Dict[str, str]" desc="Dictionary of information related to this code-package." />
	<Parameter name="flowspec" type="str" desc="Source code of the file containing the `FlowSpec` in this code package." />
	<Parameter name="tarball" type="TarFile" desc="Python standard library `tarfile.TarFile` archive containing all the code." />
</ParamSection>
</DocSection>


### MetaflowTrigger

`MetaflowTrigger` is returned by `Run.trigger` if the `Run` was [triggered by an event](/production/event-triggering). It is also returned by [`current.trigger`](/api/current) when called from an event-triggered flow.


<DocSection type="property" name="Trigger.event" module="metaflow.events" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/">
<SigArgSection>
<SigArg name="" />
</SigArgSection>
<Description summary="The `MetaflowEvent` object corresponding to the triggering event.\n\nIf multiple events triggered the run, this property is the latest event.\n" />
<ParamSection name="Returns">
<Parameter type="MetaflowEvent, optional" desc="The latest event that triggered the run, if applicable." />
</ParamSection>
</DocSection>



<DocSection type="property" name="Trigger.events" module="metaflow.events" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/">
<SigArgSection>
<SigArg name="" />
</SigArgSection>
<Description summary="The list of `MetaflowEvent` objects correspondings to all the triggering events.\n" />
<ParamSection name="Returns">
<Parameter type="List[MetaflowEvent], optional" desc="List of all events that triggered the run" />
</ParamSection>
</DocSection>



<DocSection type="property" name="Trigger.run" module="metaflow.events" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/">
<SigArgSection>
<SigArg name="" />
</SigArgSection>
<Description summary="The corresponding `Run` object if the triggering event is a Metaflow run.\n\nIn case multiple runs triggered the run, this property is the latest run.\nReturns `None` if none of the triggering events are a `Run`.\n" />
<ParamSection name="Returns">
<Parameter type="Run, optional" desc="Latest Run that triggered this run, if applicable." />
</ParamSection>
</DocSection>



<DocSection type="property" name="Trigger.runs" module="metaflow.events" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/">
<SigArgSection>
<SigArg name="" />
</SigArgSection>
<Description summary="The list of `Run` objects in the triggering events.\nReturns `None` if none of the triggering events are `Run` objects.\n" />
<ParamSection name="Returns">
<Parameter type="List[Run], optional" desc="List of runs that triggered this run, if applicable." />
</ParamSection>
</DocSection>



<DocSection type="method" name="Trigger.__getitem__" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/events.py#L144">
<SigArgSection>
<SigArg name="" />
</SigArgSection>
<Description summary="If triggering events are runs, `key` corresponds to the flow name of the triggering run.\nOtherwise, `key` corresponds to the event name and a `MetaflowEvent` object is returned." />
<ParamSection name="Returns">
	<Parameter type="Union[Run, MetaflowEvent]" desc="`Run` object if triggered by a run. Otherwise returns a `MetaflowEvent`." />
</ParamSection>
</DocSection>


### MetaflowEvent

`MetaflowEvent` is returned by `MetaflowTrigger` (see above) for [event-triggered](/production/event-triggering) runs.


<DocSection type="class" name="MetaflowEvent" module="metaflow" show_import="False" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/">
<SigArgSection>
<SigArg name="" />
</SigArgSection>
<Description summary="Container of metadata that identifies the event that triggered\nthe `Run` under consideration." />
<ParamSection name="Attributes">
	<Parameter name="name" type="str" desc="name of the event." />
	<Parameter name="id" type="str" desc="unique identifier for the event." />
	<Parameter name="timestamp" type="datetime" desc="timestamp recording creation time for the event." />
	<Parameter name="type" type="str" desc="type for the event - one of `event` or `run`" />
</ParamSection>
</DocSection>


## Namespace functions


<DocSection type="function" name="namespace" module="metaflow" show_import="True" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L152">
<SigArgSection>
<SigArg name="ns" type="Optional" />
</SigArgSection>
<Description summary="Switch namespace to the one provided." extended_summary="This call has a global effect. No objects outside this namespace\nwill be accessible. To access all objects regardless of namespaces,\npass None to this call." />
<ParamSection name="Parameters">
	<Parameter name="ns" type="str, optional" desc="Namespace to switch to or None to ignore namespaces." />
</ParamSection>
<ParamSection name="Returns">
	<Parameter type="str, optional" desc="Namespace set (result of get_namespace())." />
</ParamSection>
</DocSection>



<DocSection type="function" name="get_namespace" module="metaflow" show_import="False" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L175">
<SigArgSection>

</SigArgSection>
<Description summary="Return the current namespace that is currently being used to filter objects." extended_summary="The namespace is a tag associated with all objects in Metaflow." />
<ParamSection name="Returns">
	<Parameter type="str, optional" desc="The current namespace used to filter objects." />
</ParamSection>
</DocSection>



<DocSection type="function" name="default_namespace" module="metaflow" show_import="False" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L193">
<SigArgSection>

</SigArgSection>
<Description summary="Resets the namespace used to filter objects to the default one, i.e. the one that was\nused prior to any `namespace` calls." />
<ParamSection name="Returns">
	<Parameter type="str" desc="The result of get_namespace() after the namespace has been reset." />
</ParamSection>
</DocSection>


## Metadata functions


<DocSection type="function" name="metadata" module="metaflow" show_import="False" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L62">
<SigArgSection>
<SigArg name="ms" type="str" />
</SigArgSection>
<Description summary="Switch Metadata provider." extended_summary="This call has a global effect. Selecting the local metadata will,\nfor example, not allow access to information stored in remote\nmetadata providers.\n\nNote that you don't typically have to call this function directly. Usually\nthe metadata provider is set through the Metaflow configuration file. If you\nneed to switch between multiple providers, you can use the `METAFLOW_PROFILE`\nenvironment variable to switch between configurations." />
<ParamSection name="Parameters">
	<Parameter name="ms" type="str" desc="Can be a path (selects local metadata), a URL starting with http (selects\nthe service metadata) or an explicit specification <metadata_type>@<info>; as an\nexample, you can specify local@<path> or service@<url>." />
</ParamSection>
<ParamSection name="Returns">
	<Parameter type="str" desc="The description of the metadata selected (equivalent to the result of\nget_metadata())." />
</ParamSection>
</DocSection>



<DocSection type="function" name="get_metadata" module="metaflow" show_import="False" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L102">
<SigArgSection>

</SigArgSection>
<Description summary="Returns the current Metadata provider." extended_summary="If this is not set explicitly using `metadata`, the default value is\ndetermined through the Metaflow configuration. You can use this call to\ncheck that your configuration is set up properly.\n\nIf multiple configuration profiles are present, this call returns the one\nselected through the `METAFLOW_PROFILE` environment variable." />
<ParamSection name="Returns">
	<Parameter type="str" desc="Information about the Metadata provider currently selected. This information typically\nreturns provider specific information (like URL for remote providers or local paths for\nlocal providers)." />
</ParamSection>
</DocSection>



<DocSection type="function" name="default_metadata" module="metaflow" show_import="False" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/client/core.py#L125">
<SigArgSection>

</SigArgSection>
<Description summary="Resets the Metadata provider to the default value, that is, to the value\nthat was used prior to any `metadata` calls." />
<ParamSection name="Returns">
	<Parameter type="str" desc="The result of get_metadata() after resetting the provider." />
</ParamSection>
</DocSection>

