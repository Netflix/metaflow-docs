# Cards - Visualizing results

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! Instead, edit the notebook w/the location & name as this file. -->

Metaflow Cards allows you to produce [human-readable reports in workflows](/metaflow/visualizing-results). Use the following APIs to enable, customize, and access cards:

 - **Enable cards** by adding [the `@card` decorator](/api/step-decorators/card) in any step.
 - **Specify card contents** with [card components](#card-components).
 - **Populate card components** with [the `current` object](/api/current#card).
 - **Retrieve cards** with [the `get_cards` method](#retrieving-cards) or on the command line with the `card` commands.
 - **Create fully custom, shareable cards** with custom [`MetaflowCard` classes](#defining-a-custom-card).

## Retrieving cards

To retrieve a card after a run has finished, use the `get_cards` function e.g. in a notebook or the `card get` command on the CLI.

Since a task can contain multiple cards `get_cards` returns a container object, `CardContainer`, which holds `Card` objects corresponding to individual cards. Notably both `CardContainer` and `Card` objects contain a function that allow them to visualize cards in the notebook output cell automatically, so a single `get_cards` call can be used to show all cards of a step in a notebook.


<DocSection type="function" name="get_cards" module="metaflow.cards" show_import="True" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_client.py#L198">
<SigArgSection>
<SigArg name="task" /><SigArg name="id" default="None" /><SigArg name="type" default="None" /><SigArg name="follow_resumed" default="True" />
</SigArgSection>
<Description summary="Get cards related to a `Task`." extended_summary="Note that `get_cards` resolves the cards contained by the task but it doesn't actually\nretrieve them from the datastore. Actual card contents are retrieved lazily either when\nthe card is rendered in a notebook to when you call `Card.get`. This means that\n`get_cards` is a fast call even when individual cards contain a lot of data." />
<ParamSection name="Parameters">
	<Parameter name="task" type="str or `Task`" desc="A `Task` object or pathspec `{flow_name}/{run_id}/{step_name}/{task_id}` that\nuniquely identifies a task." />
	<Parameter name="id" type="str (optional)" desc="The ID of card to retrieve if multiple cards are present." />
	<Parameter name="type" type="str (optional)" desc="The type of card to retrieve if multiple cards are present." />
	<Parameter name="follow_resumed" type="bool (optional)" desc="If the task has been resumed, then setting this flag will resolve the card for\nthe origin task. Defaults to True." />
</ParamSection>
<ParamSection name="Returns">
	<Parameter type="CardContainer" desc="A list-like object that holds `Card` objects." />
</ParamSection>
</DocSection>



<DocSection type="class" name="CardContainer" module="metaflow.cards" show_import="False" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_client.py#L119">
<SigArgSection>
<SigArg name="" />
</SigArgSection>
<Description summary="`CardContainer` is an immutable list-like object, returned by `get_cards`,\nwhich contains individual `Card`s." extended_summary="Notably, `CardContainer` contains a special\n`_repr_html_` function which renders cards automatically in an output\ncell of a notebook.\n\nThe following operations are supported:\n```\ncards = get_cards(MyTask)\n\n# retrieve by index\nfirst_card = cards[0]\n\n# check length\nif len(cards) > 1:\n    print('many cards present!')\n\n# iteration\nlist_of_cards = list(cards)\n```" />

</DocSection>



<DocSection type="class" name="Card" module="metaflow.cards" show_import="False" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_client.py#L18">
<SigArgSection>
<SigArg name="" />
</SigArgSection>
<Description summary="`Card` represents an individual Metaflow Card, a single HTML file, produced by\nthe card `@card` decorator. `Card`s are contained by `CardContainer`, returned by\n`get_cards`." extended_summary="Note that the contents of the card, an HTML file, is retrieved lazily when you call\n`Card.get` for the first time or when the card is rendered in a notebook." />
<ParamSection name="Attributes">
	<Parameter name="id" desc="The ID of the card, if specified with `@card(id=ID)`." />
	<Parameter name="path" desc="The path of the card in the datastore which uniquely\nidentifies the card." />
</ParamSection>
</DocSection>



<DocSection type="method" name="Card.get" module="metaflow.cards" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_client.py#L56">
<SigArgSection>
<SigArg name="self" />
</SigArgSection>
<Description summary="Retrieves the HTML contents of the card from the\nMetaflow datastore." />
<ParamSection name="Returns">
	<Parameter type="str" desc="HTML contents of the card." />
</ParamSection>
</DocSection>



<DocSection type="method" name="Card.view" module="metaflow.cards" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_client.py#L89">
<SigArgSection>
<SigArg name="self" />
</SigArgSection>
<Description summary="Opens the card in a local web browser." extended_summary="This call uses Python's built-in [`webbrowser`](https://docs.python.org/3/library/webbrowser.html)\nmodule to open the card." />

</DocSection>


## Card components

You can customize the contents of a card easily using *card components*, a set of visual elements included in Metaflow which are documented below. See [Easy Custom Reports with Card Components](/metaflow/visualizing-results/easy-custom-reports-with-card-components) for instructions.

The components are added to cards in `@step` methods (or functions called from steps), using [the `current.card` object](/api/current#card).

### Markdown


<DocSection type="class" name="Markdown" module="metaflow.cards" show_import="True" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/components.py#L401">
<SigArgSection>
<SigArg name="text" default="None" />
</SigArgSection>
<Description summary="A block of text formatted in Markdown." extended_summary="Example:\n```\ncurrent.card.append(\n    Markdown(&#34;# This is a header appended from `@step` code&#34;)\n)\n```" />
<ParamSection name="Parameters">
	<Parameter name="text" type="str" desc="Text formatted in Markdown." />
</ParamSection>
</DocSection>


### Image


<DocSection type="class" name="Image" module="metaflow.cards" show_import="True" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/components.py#L156">
<SigArgSection>
<SigArg name="src" default="None" /><SigArg name="label" default="None" />
</SigArgSection>
<Description summary="An image." extended_summary="`Image`s can be created directly from PNG/JPG/GIF `bytes`, `PIL.Image`s,\nor Matplotlib figures. Note that the image data is embedded in the card,\nso no external files are required to show the image.\n\nExample: Create an `Image` from bytes:\n```\ncurrent.card.append(\n    Image(\n        requests.get(&#34;https://www.gif-vif.com/hacker-cat.gif&#34;).content,\n        &#34;Image From Bytes&#34;\n    )\n)\n```\n\nExample: Create an `Image` from a Matplotlib figure\n```\nimport pandas as pd\nimport numpy as np\ncurrent.card.append(\n    Image.from_matplotlib(\n        pandas.DataFrame(\n            np.random.randint(0, 100, size=(15, 4)),\n            columns=list(&#34;ABCD&#34;),\n        ).plot()\n    )\n)\n```\n\nExample: Create an `Image` from a [PIL](https://pillow.readthedocs.io/) Image\n```\nfrom PIL import Image as PILImage\ncurrent.card.append(\n    Image.from_pil_image(\n        PILImage.fromarray(np.random.randn(1024, 768), &#34;RGB&#34;),\n        &#34;From PIL Image&#34;\n    )\n)\n```" />
<ParamSection name="Parameters">
	<Parameter name="src" type="bytes" desc="The image data in `bytes`." />
	<Parameter name="label" type="str" desc="Optional label for the image." />
</ParamSection>
</DocSection>



<DocSection type="method" name="Image.from_matplotlib" module="metaflow.cards" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/components.py#L305">
<SigArgSection>
<SigArg name="plot" /><SigArg name="label" default="None" />
</SigArgSection>
<Description summary="Create an `Image` from a Matplotlib plot." />
<ParamSection name="Parameters">
	<Parameter name="plot" type="matplotlib.axes.Axes" desc="a PIL axes (plot) object." />
	<Parameter name="label" type="str" desc="Label for the image (optional)" />
</ParamSection>
</DocSection>



<DocSection type="method" name="Image.from_pil_image" module="metaflow.cards" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/components.py#L257">
<SigArgSection>
<SigArg name="pilimage" /><SigArg name="label" default="None" />
</SigArgSection>
<Description summary="Create an `Image` from a PIL image." />
<ParamSection name="Parameters">
	<Parameter name="pilimage" type="PIL.Image" desc="a PIL image object." />
	<Parameter name="label" type="str" desc="Optional label for the image." />
</ParamSection>
</DocSection>


### Artifact


<DocSection type="class" name="Artifact" module="metaflow.cards" show_import="True" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/components.py#L19">
<SigArgSection>
<SigArg name="artifact" /><SigArg name="name" default="None" /><SigArg name="compressed" default="True" />
</SigArgSection>
<Description summary="A pretty-printed version of any Python object." extended_summary="Large objects are truncated using Python's built-in [`reprlib`](https://docs.python.org/3/library/reprlib.html).\n\nExample:\n```\nfrom datetime import datetime\ncurrent.card.append(Artifact({'now': datetime.utcnow()}))\n```" />
<ParamSection name="Parameters">
	<Parameter name="artifact" type="object" desc="Any Python object." />
	<Parameter name="name" type="str" desc="Optional label for the object." />
	<Parameter name="compressed" type="bool" desc="Use a truncated representation (default: True)." />
</ParamSection>
</DocSection>


### Table


<DocSection type="class" name="Table" module="metaflow.cards" show_import="True" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/components.py#L55">
<SigArgSection>
<SigArg name="data" default="[[]]" /><SigArg name="headers" default="[]" />
</SigArgSection>
<Description summary="A table." extended_summary="The contents of the table can be text or numerical data, a Pandas dataframe,\nor other card components: `Artifact`, `Image`, `Markdown` objects.\n\nExample: Text and artifacts\n```\nfrom metaflow.cards import Table, Artifact\ncurrent.card.append(\n    Table([\n        ['first row', Artifact({'a': 2})],\n        ['second row', Artifact(3)]\n    ])\n)\n```\n\nExample: Table from a Pandas dataframe\n```\nfrom metaflow.cards import Table\nimport pandas as pd\nimport numpy as np\ncurrent.card.append(\n    Table.from_dataframe(\n        pandas.DataFrame(\n            np.random.randint(0, 100, size=(15, 4)),\n            columns=list(&#34;ABCD&#34;)\n        )\n    )\n)\n```" />
<ParamSection name="Parameters">
	<Parameter name="data" type="List[List[str|MetaflowCardComponent]]" desc="List (rows) of lists (columns). Each item can be a string or a `MetaflowCardComponent`." />
	<Parameter name="headers" type="List[str]" desc="Optional header row for the table." />
</ParamSection>
</DocSection>



<DocSection type="method" name="Table.from_dataframe" module="metaflow.cards" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/components.py#L105">
<SigArgSection>
<SigArg name="dataframe" default="None" /><SigArg name="truncate" default="True" />
</SigArgSection>
<Description summary="Create a `Table` based on a Pandas dataframe." />
<ParamSection name="Parameters">
	<Parameter name="dataframe" type="pandas.DataFrame" desc="Pandas dataframe." />
	<Parameter name="truncate" type="bool" desc="Truncate large dataframe instead of showing all rows (default: True)." />
</ParamSection>
</DocSection>


## Defining a custom card

You can define custom cards types (`T` in `@card(type=T)`) by creating a Python package that includes a class that derives from `MetaflowCard`, documented below.

Find detailed instructions, a starter template, and an example of a simple custom card at [https://github.com/outerbounds/metaflow-card-html]( https://github.com/outerbounds/metaflow-card-html).


<DocSection type="class" name="MetaflowCard" module="metaflow.cards" show_import="True" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/card.py#L1">
<SigArgSection>
<SigArg name="options" />
</SigArgSection>
<Description summary="Metaflow cards derive from this base class." extended_summary="Subclasses of this class are called *card types*. The desired card\ntype `T` is defined in the `@card` decorator as `@card(type=T)`.\n\nAfter a task with `@card(type=T, options=S)` finishes executing, Metaflow instantiates\na subclass `C` of `MetaflowCard` that has its `type` attribute set to `T`, i.e. `C.type=T`.\nThe constructor is given the options dictionary `S` that contains arbitrary\nJSON-encodable data that is passed to the instance, parametrizing the card. The subclass\nmay override the constructor to capture and process the options.\n\nThe subclass needs to implement a `render(task)` method that produces the card\ncontents in HTML, given the finished task that is represented by a `Task` object." />
<ParamSection name="Parameters">
	<Parameter name="options" type="Dict" desc="JSON-encodable dictionary containing user-definable options for the class." />
</ParamSection>
<ParamSection name="Attributes">
	<Parameter name="type" type="str" desc="Card type string. Note that this should be a globally unique name, similar to a\nPython package name, to avoid name clashes between different custom cards." />
</ParamSection>
</DocSection>



<DocSection type="method" name="MetaflowCard.render" module="metaflow.cards" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/card.py#L46">
<SigArgSection>
<SigArg name="self" /><SigArg name="task" />
</SigArgSection>
<Description summary="Produce custom card contents in HTML." extended_summary="Subclasses override this method to customize the card contents." />
<ParamSection name="Parameters">
	<Parameter name="task" type="metaflow.Task" desc="A `Task` object that allows you to access data from the finished task and tasks\npreceding it." />
</ParamSection>
<ParamSection name="Returns">
	<Parameter type="str" desc="Card contents as an HTML string." />
</ParamSection>
</DocSection>

