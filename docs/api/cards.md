# Cards - Visualizing results

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! Instead, edit the notebook w/the location & name as this file. -->

Metaflow Cards allows you to produce [human readable reports in workflows and observe their behavior live](/metaflow/visualizing-results). Use the following APIs to enable, customize, and access cards:

 - **Enable cards** by adding [the `@card` decorator](/api/step-decorators/card) in any step.
 - **Specify card contents** with [card components](#card-components).
 - **Populate card components** with [the `current` object](/api/current#card).
 - **Retrieve cards** with [the `get_cards` method](#retrieving-cards) or on the command line with the `card` commands.
 - **Create fully custom, shareable cards** with custom [`MetaflowCard` classes](#defining-a-custom-card).

## Retrieving cards

To retrieve a card after a run has finished, use the `get_cards` function e.g. in a notebook or the `card get` command on the CLI.

Since a task can contain multiple cards `get_cards` returns a container object, `CardContainer`, which holds `Card` objects corresponding to individual cards. Notably both `CardContainer` and `Card` objects contain a function that allow them to visualize cards in the notebook output cell automatically, so a single `get_cards` call can be used to show all cards of a step in a notebook.


<DocSection type="function" name="get_cards" module="metaflow.cards" show_import="True" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_client.py#L224">
<SigArgSection>
<SigArg name="task" type="Union" /><SigArg name="id" type="Optional" default="None" /><SigArg name="type" type="Optional" default="None" /><SigArg name="follow_resumed" type="bool" default="True" />
</SigArgSection>
<Description summary="Get cards related to a `Task`." extended_summary="Note that `get_cards` resolves the cards contained by the task, but it doesn't actually\nretrieve them from the datastore. Actual card contents are retrieved lazily either when\nthe card is rendered in a notebook to when you call `Card.get`. This means that\n`get_cards` is a fast call even when individual cards contain a lot of data." />
<ParamSection name="Parameters">
	<Parameter name="task" type="Union[str, `Task`]" desc="A `Task` object or pathspec `{flow_name}/{run_id}/{step_name}/{task_id}` that\nuniquely identifies a task." />
	<Parameter name="id" type="str, optional, default None" desc="The ID of card to retrieve if multiple cards are present." />
	<Parameter name="type" type="str, optional, default None" desc="The type of card to retrieve if multiple cards are present." />
	<Parameter name="follow_resumed" type="bool, default True" desc="If the task has been resumed, then setting this flag will resolve the card for\nthe origin task." />
</ParamSection>
<ParamSection name="Returns">
	<Parameter type="CardContainer" desc="A list-like object that holds `Card` objects." />
</ParamSection>
</DocSection>



<DocSection type="class" name="CardContainer" module="metaflow.cards" show_import="False" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_client.py#L145">
<SigArgSection>
<SigArg name="" />
</SigArgSection>
<Description summary="`CardContainer` is an immutable list-like object, returned by `get_cards`,\nwhich contains individual `Card`s." extended_summary="Notably, `CardContainer` contains a special\n`_repr_html_` function which renders cards automatically in an output\ncell of a notebook.\n\nThe following operations are supported:\n```\ncards = get_cards(MyTask)\n\n# retrieve by index\nfirst_card = cards[0]\n\n# check length\nif len(cards) > 1:\n    print('many cards present!')\n\n# iteration\nlist_of_cards = list(cards)\n```" />

</DocSection>



<DocSection type="class" name="Card" module="metaflow.cards" show_import="False" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_client.py#L22">
<SigArgSection>
<SigArg name="" />
</SigArgSection>
<Description summary="`Card` represents an individual Metaflow Card, a single HTML file, produced by\nthe card `@card` decorator. `Card`s are contained by `CardContainer`, returned by\n`get_cards`." extended_summary="Note that the contents of the card, an HTML file, is retrieved lazily when you call\n`Card.get` for the first time or when the card is rendered in a notebook." />

</DocSection>



<DocSection type="method" name="Card.get" module="metaflow.cards" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_client.py#L72">
<SigArgSection>
<SigArg name="self" />
</SigArgSection>
<Description summary="Retrieves the HTML contents of the card from the\nMetaflow datastore." />
<ParamSection name="Returns">
	<Parameter type="str" desc="HTML contents of the card." />
</ParamSection>
</DocSection>



<DocSection type="method" name="Card.view" module="metaflow.cards" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_client.py#L115">
<SigArgSection>
<SigArg name="self" />
</SigArgSection>
<Description summary="Opens the card in a local web browser." extended_summary="This call uses Python's built-in [`webbrowser`](https://docs.python.org/3/library/webbrowser.html)\nmodule to open the card." />

</DocSection>


## Card components

You can customize the contents of a card easily using *card components*, a set of visual elements included in Metaflow which are documented below. See [Easy Custom Reports with Card Components](/metaflow/visualizing-results/easy-custom-reports-with-card-components) for instructions.

The components are added to cards in `@step` methods (or functions called from steps), using [the `current.card` object](/api/current#card).

### Markdown


<DocSection type="class" name="Markdown" module="metaflow.cards" show_import="True" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/components.py#L659">
<SigArgSection>
<SigArg name="text" default="None" />
</SigArgSection>
<Description summary="A block of text formatted in Markdown." extended_summary="Example:\n```\ncurrent.card.append(\n    Markdown(&#34;# This is a header appended from `@step` code&#34;)\n)\n```" />
<ParamSection name="Parameters">
	<Parameter name="text" type="str" desc="Text formatted in Markdown." />
</ParamSection>
</DocSection>



<DocSection type="method" name="Markdown.update" module="metaflow.cards" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/components.py#L678">
<SigArgSection>
<SigArg name="self" /><SigArg name="text" default="None" />
</SigArgSection>
<Description summary="#FIXME document" />

</DocSection>


### Image


<DocSection type="class" name="Image" module="metaflow.cards" show_import="True" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/components.py#L247">
<SigArgSection>
<SigArg name="src" default="None" /><SigArg name="label" default="None" /><SigArg name="disable_updates" type="bool" default="True" />
</SigArgSection>
<Description summary="An image." extended_summary="`Images can be created directly from PNG/JPG/GIF `bytes`, `PIL.Image`s,\nor Matplotlib figures. Note that the image data is embedded in the card,\nso no external files are required to show the image.\n\nExample: Create an `Image` from bytes:\n```\ncurrent.card.append(\n    Image(\n        requests.get(&#34;https://www.gif-vif.com/hacker-cat.gif&#34;).content,\n        &#34;Image From Bytes&#34;\n    )\n)\n```\n\nExample: Create an `Image` from a Matplotlib figure\n```\nimport pandas as pd\nimport numpy as np\ncurrent.card.append(\n    Image.from_matplotlib(\n        pandas.DataFrame(\n            np.random.randint(0, 100, size=(15, 4)),\n            columns=list(&#34;ABCD&#34;),\n        ).plot()\n    )\n)\n```\n\nExample: Create an `Image` from a [PIL](https://pillow.readthedocs.io/) Image\n```\nfrom PIL import Image as PILImage\ncurrent.card.append(\n    Image.from_pil_image(\n        PILImage.fromarray(np.random.randn(1024, 768), &#34;RGB&#34;),\n        &#34;From PIL Image&#34;\n    )\n)\n```" />
<ParamSection name="Parameters">
	<Parameter name="src" type="bytes" desc="The image data in `bytes`." />
	<Parameter name="label" type="str" desc="Optional label for the image." />
</ParamSection>
<ParamSection name="Attributes">
	<Parameter name="component_id" />
</ParamSection>
</DocSection>



<DocSection type="method" name="Image.from_matplotlib" module="metaflow.cards" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/components.py#L553">
<SigArgSection>
<SigArg name="plot" /><SigArg name="label" type="Optional" default="None" /><SigArg name="disable_updates" type="bool" default="False" />
</SigArgSection>
<Description summary="Create an `Image` from a Matplotlib plot." />
<ParamSection name="Parameters">
	<Parameter name="plot" type="matplotlib.figure.Figure or matplotlib.axes.Axes or matplotlib.axes._subplots.AxesSubplot" desc="a PIL axes (plot) object." />
	<Parameter name="label" type="str, optional" desc="Optional label for the image." />
</ParamSection>
</DocSection>



<DocSection type="method" name="Image.from_pil_image" module="metaflow.cards" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/components.py#L519">
<SigArgSection>
<SigArg name="pilimage" /><SigArg name="label" type="Optional" default="None" /><SigArg name="disable_updates" type="bool" default="False" />
</SigArgSection>
<Description summary="Create an `Image` from a PIL image." />
<ParamSection name="Parameters">
	<Parameter name="pilimage" type="PIL.Image" desc="a PIL image object." />
	<Parameter name="label" type="str, optional" desc="Optional label for the image." />
</ParamSection>
</DocSection>


### Artifact


<DocSection type="class" name="Artifact" module="metaflow.cards" show_import="True" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/components.py#L63">
<SigArgSection>
<SigArg name="artifact" type="Any" /><SigArg name="name" type="Optional" default="None" /><SigArg name="compressed" type="bool" default="True" />
</SigArgSection>
<Description summary="A pretty-printed version of any Python object." extended_summary="Large objects are truncated using Python's built-in [`reprlib`](https://docs.python.org/3/library/reprlib.html).\n\nExample:\n```\nfrom datetime import datetime\ncurrent.card.append(Artifact({'now': datetime.utcnow()}))\n```" />
<ParamSection name="Parameters">
	<Parameter name="artifact" type="object" desc="Any Python object." />
	<Parameter name="name" type="str, optional" desc="Optional label for the object." />
	<Parameter name="compressed" type="bool, default: True" desc="Use a truncated representation." />
</ParamSection>
</DocSection>


### Table


<DocSection type="class" name="Table" module="metaflow.cards" show_import="True" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/components.py#L109">
<SigArgSection>
<SigArg name="data" type="Optional" default="None" /><SigArg name="headers" type="Optional" default="None" /><SigArg name="disable_updates" type="bool" default="False" />
</SigArgSection>
<Description summary="A table." extended_summary="The contents of the table can be text or numerical data, a Pandas dataframe,\nor other card components: `Artifact`, `Image`, `Markdown` objects.\n\nExample: Text and artifacts\n```\nfrom metaflow.cards import Table, Artifact\ncurrent.card.append(\n    Table([\n        ['first row', Artifact({'a': 2})],\n        ['second row', Artifact(3)]\n    ])\n)\n```\n\nExample: Table from a Pandas dataframe\n```\nfrom metaflow.cards import Table\nimport pandas as pd\nimport numpy as np\ncurrent.card.append(\n    Table.from_dataframe(\n        pd.DataFrame(\n            np.random.randint(0, 100, size=(15, 4)),\n            columns=list(&#34;ABCD&#34;)\n        )\n    )\n)\n```" />
<ParamSection name="Parameters">
	<Parameter name="data" type="List[List[str or MetaflowCardComponent]], optional" desc="List (rows) of lists (columns). Each item can be a string or a `MetaflowCardComponent`." />
	<Parameter name="headers" type="List[str], optional" desc="Optional header row for the table." />
</ParamSection>
<ParamSection name="Attributes">
	<Parameter name="component_id" />
</ParamSection>
</DocSection>



<DocSection type="method" name="Table.from_dataframe" module="metaflow.cards" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/components.py#L179">
<SigArgSection>
<SigArg name="dataframe" default="None" /><SigArg name="truncate" type="bool" default="True" />
</SigArgSection>
<Description summary="Create a `Table` based on a Pandas dataframe." />
<ParamSection name="Parameters">
	<Parameter name="dataframe" type="Optional[pandas.DataFrame]" desc="Pandas dataframe." />
	<Parameter name="truncate" type="bool, default: True" desc="Truncate large dataframe instead of showing all rows (default: True)." />
</ParamSection>
</DocSection>


### VegaChart


<DocSection type="class" name="VegaChart" module="metaflow.cards" show_import="True" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/components.py#L768">
<SigArgSection>
<SigArg name="spec" type="dict" /><SigArg name="show_controls" type="bool" default="False" />
</SigArgSection>


</DocSection>



<DocSection type="method" name="VegaChart.from_altair_chart" module="metaflow.cards" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/components.py#L803">
<SigArgSection>
<SigArg name="altair_chart" />
</SigArgSection>


</DocSection>



<DocSection type="method" name="VegaChart.update" module="metaflow.cards" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/components.py#L778">
<SigArgSection>
<SigArg name="self" /><SigArg name="spec" default="None" />
</SigArgSection>
<Description summary="Update the chart." />
<ParamSection name="Parameters">
	<Parameter name="spec" type="dict or altair.Chart" desc="The updated chart spec or an altair Chart Object." />
</ParamSection>
</DocSection>


### ProgressBar


<DocSection type="class" name="ProgressBar" module="metaflow.cards" show_import="True" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/components.py#L692">
<SigArgSection>
<SigArg name="max" type="int" default="100" /><SigArg name="label" type="Optional" default="None" /><SigArg name="value" type="int" default="0" /><SigArg name="unit" type="Optional" default="None" /><SigArg name="metadata" type="Optional" default="None" />
</SigArgSection>
<Description summary="A Progress bar for tracking progress of any task." extended_summary="Example:\n```\nprogress_bar = ProgressBar(\n    max=100,\n    label=&#34;Progress Bar&#34;,\n    value=0,\n    unit=&#34;%&#34;,\n    metadata=&#34;0.1 items/s&#34;\n)\ncurrent.card.append(\n    progress_bar\n)\nfor i in range(100):\n    progress_bar.update(i, metadata=&#34;%s items/s&#34; % i)\n\n```" />
<ParamSection name="Parameters">
	<Parameter name="max" type="int, default 100" desc="The maximum value of the progress bar." />
	<Parameter name="label" type="str, optional, default None" desc="Optional label for the progress bar." />
	<Parameter name="value" type="int, default 0" desc="Optional initial value of the progress bar." />
	<Parameter name="unit" type="str, optional, default None" desc="Optional unit for the progress bar." />
	<Parameter name="metadata" type="str, optional, default None" desc="Optional additional information to show on the progress bar." />
</ParamSection>
<ParamSection name="Attributes">
	<Parameter name="component_id" />
</ParamSection>
</DocSection>



<DocSection type="method" name="ProgressBar.update" module="metaflow.cards" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/components.py#L745">
<SigArgSection>
<SigArg name="self" /><SigArg name="new_value" type="int" /><SigArg name="metadata" type="Optional" default="None" />
</SigArgSection>
<Description summary="#FIXME document" />

</DocSection>


## Defining a custom card

You can define custom cards types (`T` in `@card(type=T)`) by creating a Python package that includes a class that derives from `MetaflowCard`, documented below. Read more in [Advanced, Shareable Cards with Card Templates](/metaflow/visualizing-results/advanced-shareable-cards-with-card-templates).

Find detailed instructions, a starter template, and an example of a [simple static custom card](https://github.com/outerbounds/metaflow-card-html) and [an example of a dynamic card]( https://github.com/outerbounds/metaflow-card-scatter3d).


<DocSection type="class" name="MetaflowCard" module="metaflow.cards" show_import="True" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/card.py#L7">
<SigArgSection>
<SigArg name="options" />
</SigArgSection>
<Description summary="Metaflow cards derive from this base class." extended_summary="Subclasses of this class are called *card types*. The desired card\ntype `T` is defined in the `@card` decorator as `@card(type=T)`.\n\nAfter a task with `@card(type=T, options=S)` finishes executing, Metaflow instantiates\na subclass `C` of `MetaflowCard` that has its `type` attribute set to `T`, i.e. `C.type=T`.\nThe constructor is given the options dictionary `S` that contains arbitrary\nJSON-encodable data that is passed to the instance, parametrizing the card. The subclass\nmay override the constructor to capture and process the options.\n\nThe subclass needs to implement a `render(task)` method that produces the card\ncontents in HTML, given the finished task that is represented by a `Task` object." />
<ParamSection name="Parameters">
	<Parameter name="options" type="Dict" desc="JSON-encodable dictionary containing user-definable options for the class." />
</ParamSection>
<ParamSection name="Attributes">
	<Parameter name="type" type="str" desc="Card type string. Note that this should be a globally unique name, similar to a\nPython package name, to avoid name clashes between different custom cards." />
</ParamSection>
</DocSection>



```python
ShowDoc(MetaflowCard.render)
```

<CodeOutputBlock lang="python">

```
    ---------------------------------------------------------------------------

    AttributeError                            Traceback (most recent call last)

    File ~/mambaforge/envs/metaflow-oss-docs/lib/python3.10/site-packages/IPython/core/formatters.py:344, in BaseFormatter.__call__(self, obj)
        342     method = get_real_method(obj, self.print_method)
        343     if method is not None:
    --> 344         return method()
        345     return None
        346 else:


    File ~/mambaforge/envs/metaflow-oss-docs/lib/python3.10/site-packages/nbdoc/showdoc.py:218, in ShowDoc._repr_html_(self)
        216 def _repr_html_(self):
        217     "This method controls what is displayed in Jupyter Notebooks."
    --> 218     return f'<HTMLRemove>\n{self.nbhtml}\n</HTMLRemove>\n{self.jsx}'


    File ~/mambaforge/envs/metaflow-oss-docs/lib/python3.10/site-packages/nbdoc/showdoc.py:253, in ShowDoc.jsx(self)
        251 nm = f'<DocSection type="{self.typ}" name="{self.objnm}" module="{self.modnm}" show_import="{self.show_import}" heading_level="{self.hd_lvl}"{self._src_link_attr}>'
        252 spoof = '...' if self.decorator else self.spoofstr
    --> 253 sp = get_sig_section(self.obj, spoofstr=spoof)
        254 return f'{nm}\n{sp}\n' + self.npdocs + '\n</DocSection>'


    File ~/mambaforge/envs/metaflow-oss-docs/lib/python3.10/site-packages/nbdoc/showdoc.py:115, in get_sig_section(obj, spoofstr)
        113         return ''
        114     params = sig.parameters.items()
    --> 115     jsx_params = [fmt_sig_param(p) for _, p in params]
        116 else:
        117     jsx_params = [f'<SigArg name="{spoofstr}" />']


    File ~/mambaforge/envs/metaflow-oss-docs/lib/python3.10/site-packages/nbdoc/showdoc.py:115, in <listcomp>(.0)
        113         return ''
        114     params = sig.parameters.items()
    --> 115     jsx_params = [fmt_sig_param(p) for _, p in params]
        116 else:
        117     jsx_params = [f'<SigArg name="{spoofstr}" />']


    File ~/mambaforge/envs/metaflow-oss-docs/lib/python3.10/site-packages/nbdoc/showdoc.py:99, in fmt_sig_param(p)
         96 prefix = f'<SigArg name="{name}" '
         98 if p.annotation != inspect._empty:
    ---> 99     prefix += f'type="{p.annotation.__name__}" '
        100 if p.default != inspect._empty:
        101     prefix += f'default="{p.default}" '


    AttributeError: 'str' object has no attribute '__name__'





    <nbdoc.showdoc.ShowDoc at 0x108457400>
```

</CodeOutputBlock>


<DocSection type="method" name="MetaflowCard.render_runtime" module="metaflow.cards" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/card.py#L100">
<SigArgSection>
<SigArg name="self" /><SigArg name="task" /><SigArg name="data" />
</SigArgSection>


</DocSection>



<DocSection type="method" name="MetaflowCard.refresh" module="metaflow.cards" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/plugins/cards/card_modules/card.py#L104">
<SigArgSection>
<SigArg name="self" /><SigArg name="task" /><SigArg name="data" />
</SigArgSection>


</DocSection>

