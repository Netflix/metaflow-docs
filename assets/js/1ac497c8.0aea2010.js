"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[6410],{3905:(t,e,a)=>{a.d(e,{Zo:()=>u,kt:()=>c});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function i(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var s=n.createContext({}),p=function(t){var e=n.useContext(s),a=e;return t&&(a="function"==typeof t?t(e):o(o({},e),t)),a},u=function(t){var e=p(t.components);return n.createElement(s.Provider,{value:e},t.children)},d={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},m=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,s=t.parentName,u=i(t,["components","mdxType","originalType","parentName"]),m=p(a),c=r,g=m["".concat(s,".").concat(c)]||m[c]||d[c]||l;return a?n.createElement(g,o(o({ref:e},u),{},{components:a})):n.createElement(g,o({ref:e},u))}));function c(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,o=new Array(l);o[0]=m;var i={};for(var s in e)hasOwnProperty.call(e,s)&&(i[s]=e[s]);i.originalType=t,i.mdxType="string"==typeof t?t:r,o[1]=i;for(var p=2;p<l;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},6034:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>p});var n=a(7462),r=(a(7294),a(3905));const l={},o="Deploying Infrastructure for Metaflow",i={unversionedId:"getting-started/infrastructure",id:"getting-started/infrastructure",title:"Deploying Infrastructure for Metaflow",description:"While you can get started with Metaflow easily on your",source:"@site/docs/getting-started/infrastructure.md",sourceDirName:"getting-started",slug:"/getting-started/infrastructure",permalink:"/getting-started/infrastructure",draft:!1,editUrl:"https://github.dev/Netflix/metaflow-docs/blob/master/docs/getting-started/infrastructure.md",tags:[],version:"current",frontMatter:{},sidebar:"python",previous:{title:"Installing Metaflow",permalink:"/getting-started/install"},next:{title:"Tutorials",permalink:"/getting-started/tutorials/"}},s={},p=[{value:"Supported infrastructure components",id:"supported-infrastructure-components",level:2},{value:"Example stacks",id:"example-stacks",level:2},{value:"Local: Effortless prototyping",id:"local-effortless-prototyping",level:3},{value:"Low-maintenance scalable prototyping, powered by AWS",id:"low-maintenance-scalable-prototyping-powered-by-aws",level:3},{value:"Low-maintenance full stack, powered by AWS",id:"low-maintenance-full-stack-powered-by-aws",level:3},{value:"Customizable full stack on AWS, powered by Kubernetes",id:"customizable-full-stack-on-aws-powered-by-kubernetes",level:3},{value:"Customizable full stack on Azure, powered by Kubernetes",id:"customizable-full-stack-on-azure-powered-by-kubernetes",level:3},{value:"Customizable full stack on Google Cloud, powered by Kubernetes",id:"customizable-full-stack-on-google-cloud-powered-by-kubernetes",level:3}],u={toc:p};function d(t){let{components:e,...a}=t;return(0,r.kt)("wrapper",(0,n.Z)({},u,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"deploying-infrastructure-for-metaflow"},"Deploying Infrastructure for Metaflow"),(0,r.kt)("p",null,"While you can ",(0,r.kt)("a",{parentName:"p",href:"/getting-started/install"},"get started with Metaflow easily")," on your\nlaptop, the main benefits of Metaflow lie in its ability to ",(0,r.kt)("a",{parentName:"p",href:"/scaling/introduction"},"scale out to external\ncompute clusters")," and to ",(0,r.kt)("a",{parentName:"p",href:"/production/introduction"},"deploy to production-grade workflow\norchestrators"),". To benefit from these features, you need to\nconfigure Metaflow and the infrastructure behind it appropriately. A separate guide,\n",(0,r.kt)("a",{parentName:"p",href:"https://outerbounds.com/engineering/welcome/"},"Metaflow Resources for Engineers")," covers\neverything related to such deployments. This page provides a quick overview."),(0,r.kt)("h2",{id:"supported-infrastructure-components"},"Supported infrastructure components"),(0,r.kt)("p",null,"Since modern data science / ML applications are powered by a number of interconnected\nsystems, it is useful to organize them as an infrastructure stack like the one\nillustrated below (",(0,r.kt)("a",{parentName:"p",href:"/introduction/why-metaflow"},"Why? See here"),"). You can see logos of\nall supported systems which you can use to enable each layer."),(0,r.kt)("p",null,"Consider this illustration as a menu that allows you to build your own pizza: You get to\ncustomize your own crust, sauce, toppings, and cheese. You can make the choices based on\nyour existing business infrastructure and the requirements and preferences of your\norganization. Fortunately, Metaflow provides a consistent API for all these\ncombinations, so you can even change the choices later without having to rewrite your\nflows."),(0,r.kt)("object",{style:{width:700},type:"image/svg+xml",data:"/assets/infra-stack.svg"}),(0,r.kt)("p",null,"The table below explains the five major deployment options for Metaflow and what\ncomponents of the stack are supported in each. You can choose to deploy Metaflow on:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Only local")," environment - ",(0,r.kt)("a",{parentName:"li",href:"/getting-started/install"},"just ",(0,r.kt)("inlineCode",{parentName:"a"},"pip install metaflow")," on any\nworkstation"),"."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"AWS")," either on ",(0,r.kt)("a",{parentName:"li",href:"https://outerbounds.com/engineering/deployment/aws-k8s/deployment/"},"EKS as a Kubernetes\nplatform")," or\n",(0,r.kt)("a",{parentName:"li",href:"https://outerbounds.com/engineering/deployment/aws-managed/introduction/"},"using AWS-managed\nservices"),"."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Azure")," on ",(0,r.kt)("a",{parentName:"li",href:"https://outerbounds.com/engineering/deployment/azure-k8s/deployment/"},"AKS as a Kubernetes\nplatform"),"."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Google Cloud")," on ",(0,r.kt)("a",{parentName:"li",href:"https://outerbounds.com/engineering/deployment/gcp-k8s/deployment/"},"GKE as a Kubernetes\nplatform"),"."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://outerbounds.com/engineering/deployment/aws-k8s/deployment/"},"Any ",(0,r.kt)("strong",{parentName:"a"},"Kubernetes"),"\ncluster"),"\nincluding on-premise deployments.")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Layer"),(0,r.kt)("th",{parentName:"tr",align:null},"Component"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Only Local"),(0,r.kt)("th",{parentName:"tr",align:null},"AWS"),(0,r.kt)("th",{parentName:"tr",align:null},"Azure"),(0,r.kt)("th",{parentName:"tr",align:null},"GCP"),(0,r.kt)("th",{parentName:"tr",align:null},"K8s"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Modeling"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("img",{src:"/assets/infra-python.png",width:" 30",style:{verticalAlign:"middle"}})," ",(0,r.kt)("strong",{parentName:"td"},"Python libraries")),(0,r.kt)("td",{parentName:"tr",align:null},"Any Python libraries"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Deployment"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("img",{src:"/assets/infra-argo.png",width:" 30",style:{verticalAlign:"middle"}})," ",(0,r.kt)("strong",{parentName:"td"},"Argo Workflows")),(0,r.kt)("td",{parentName:"tr",align:null},"Open-source production-grade workflow orchestrator"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Deployment"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("img",{src:"/assets/infra-sfn.png",width:" 30",style:{verticalAlign:"middle"}})," ",(0,r.kt)("strong",{parentName:"td"},"Step Functions")),(0,r.kt)("td",{parentName:"tr",align:null},"AWS-managed production-grade workflow orchestrator"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Deployment"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("img",{src:"/assets/infra-airflow.png",width:" 30",style:{verticalAlign:"middle"}})," ",(0,r.kt)("strong",{parentName:"td"},"Apache Airflow")),(0,r.kt)("td",{parentName:"tr",align:null},"Popular open-source workflow orchestrator"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Versioning"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("img",{src:"/assets/infra-mflocal.png",width:" 30",style:{verticalAlign:"middle"}})," ",(0,r.kt)("strong",{parentName:"td"},"Local Metadata")),(0,r.kt)("td",{parentName:"tr",align:null},"Metaflow's tracking in local files"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Versioning"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("img",{src:"/assets/infra-metaflow.png",width:" 30",style:{verticalAlign:"middle"}})," ",(0,r.kt)("strong",{parentName:"td"},"Metadata Service")),(0,r.kt)("td",{parentName:"tr",align:null},"Metaflow's tracking in a central database"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Orchestration"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("img",{src:"/assets/infra-mflocal.png",width:" 30",style:{verticalAlign:"middle"}})," ",(0,r.kt)("strong",{parentName:"td"},"Local Orchestrator")),(0,r.kt)("td",{parentName:"tr",align:null},"Metaflow's local workflow orchestrator"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Compute"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("img",{src:"/assets/infra-mflocal.png",width:" 30",style:{verticalAlign:"middle"}})," ",(0,r.kt)("strong",{parentName:"td"},"Local Processes")),(0,r.kt)("td",{parentName:"tr",align:null},"Metaflow tasks as local processes"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Compute"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("img",{src:"/assets/infra-batch.png",width:" 30",style:{verticalAlign:"middle"}})," ",(0,r.kt)("strong",{parentName:"td"},"AWS Batch")),(0,r.kt)("td",{parentName:"tr",align:null},"AWS-managed batch compute service"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Compute"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("img",{src:"/assets/infra-k8s.png",width:" 30",style:{verticalAlign:"middle"}})," ",(0,r.kt)("strong",{parentName:"td"},"Kubernetes")),(0,r.kt)("td",{parentName:"tr",align:null},"Open-source batch compute platform"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Data"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("img",{src:"/assets/infra-mflocal.png",width:" 30",style:{verticalAlign:"middle"}})," ",(0,r.kt)("strong",{parentName:"td"},"Local Datastore")),(0,r.kt)("td",{parentName:"tr",align:null},"Metaflow artifacts in local files"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Data"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("img",{src:"/assets/infra-s3.png",width:" 30",style:{verticalAlign:"middle"}})," ",(0,r.kt)("strong",{parentName:"td"},"AWS S3")),(0,r.kt)("td",{parentName:"tr",align:null},"Metaflow artifacts in AWS-managed storage"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Data"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("img",{src:"/assets/infra-azureblob.png",width:" 30",style:{verticalAlign:"middle"}})," ",(0,r.kt)("strong",{parentName:"td"},"Azure Blob Storage")),(0,r.kt)("td",{parentName:"tr",align:null},"Metaflow artifacts in Azure-managed storage"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Data"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("img",{src:"/assets/infra-gcs.png",width:" 30",style:{verticalAlign:"middle"}})," ",(0,r.kt)("strong",{parentName:"td"},"Google Cloud Storage")),(0,r.kt)("td",{parentName:"tr",align:null},"Metaflow artifacts in Google-managed storage"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udfe2")))),(0,r.kt)("p",null,"Note that fast prototyping with the Local Orchestrator is supported in all these\noptions, but the ",(0,r.kt)("strong",{parentName:"p"},"only local")," option doesn't support scalability with an external\ncompute layer, nor production-grade deployments."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"You can test the AWS/Azure/GCP/Kubernetes stack easily in your browser for free\nby signing up for a ",(0,r.kt)("a",{parentName:"p",href:"https://outerbounds.com/sandbox/"},"Metaflow Sandbox"),".")),(0,r.kt)("h2",{id:"example-stacks"},"Example stacks"),(0,r.kt)("p",null,"Here are some typical deployments that we have seen in action:"),(0,r.kt)("h3",{id:"local-effortless-prototyping"},"Local: Effortless prototyping"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Just ",(0,r.kt)("inlineCode",{parentName:"strong"},"pip install metaflow")," to deploy this stack")),(0,r.kt)("p",null,"This is the stack you get by default when you ",(0,r.kt)("a",{parentName:"p",href:"/getting-started/install"},"install Metaflow\nlocally"),". It's main benefit is zero configuration and\nmaintenance - it works out of the box. It is a great way to get started with Metaflow."),(0,r.kt)("object",{style:{width:700},type:"image/svg+xml",data:"/assets/infra-stack-all-local.svg"}),(0,r.kt)("p",null,"When you want to start ",(0,r.kt)("a",{parentName:"p",href:"/scaling/tagging"},"collaborating with multiple people")," which\nrequires a central metadata service, or you want to start running ",(0,r.kt)("a",{parentName:"p",href:"/scaling/introduction"},"larger-scale\nworkloads"),", or you want to ",(0,r.kt)("a",{parentName:"p",href:"/production/introduction"},"deploy your\nworkflows")," so that they run even when your laptop is asleep,\nlook into more featureful stacks below."),(0,r.kt)("h3",{id:"low-maintenance-scalable-prototyping-powered-by-aws"},"Low-maintenance scalable prototyping, powered by AWS"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://outerbounds.com/engineering/deployment/aws-managed/introduction/"},"Click here to deploy this\nstack"))),(0,r.kt)("p",null,"If you are looking for the easiest and the most affordable way to scale out compute to\nthe cloud, including cloud-based GPUs, this stack is a great option. Consider the\nbenefits:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Artifacts are stored in AWS S3, so you don't have to worry about running out of\nstorage or losing data."),(0,r.kt)("li",{parentName:"ul"},"Scalability is managed by ",(0,r.kt)("a",{parentName:"li",href:"https://aws.amazon.com/batch/"},"AWS Batch")," which requires no\nmaintenance after the initial setup."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://aws.amazon.com/batch/"},"AWS Batch")," is very cost-effective: You pay only for\nthe EC2 instance time used by second, with no additional costs. To reduce the cost of\ncompute even further, you can leverage spot instances.")),(0,r.kt)("object",{style:{width:700},type:"image/svg+xml",data:"/assets/infra-stack-scaling.svg"}),(0,r.kt)("p",null,"In this stack, the main missing piece is ",(0,r.kt)("a",{parentName:"p",href:"/production/introduction"},"a highly-available workflow\norchestrator")," which you can easily add by upgrading to the\noption below. Also, larger teams with more involved compute needs may find ",(0,r.kt)("a",{parentName:"p",href:"https://aws.amazon.com/batch/"},"AWS\nBatch")," limiting, in which case you can look into\nKubernetes-based stacks."),(0,r.kt)("h3",{id:"low-maintenance-full-stack-powered-by-aws"},"Low-maintenance full stack, powered by AWS"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://outerbounds.com/engineering/deployment/aws-managed/introduction/"},"Click here to deploy this\nstack"))),(0,r.kt)("p",null,"If you need the full stack of data science/ML infrastructure but want to spend a minimal\namount of effort to set up and manage it, choose this option. You get all the benefits\nof AWS Batch as described above, as well as production deployments on ",(0,r.kt)("a",{parentName:"p",href:"https://aws.amazon.com/step-functions/"},"AWS Step\nFunctions")," which is a highly-available, scalable\nworkflow orchestrator managed by AWS. Metaflow tracks everything in a central metadata\nservice, making collaboration straightforward."),(0,r.kt)("object",{style:{width:700},type:"image/svg+xml",data:"/assets/infra-stack-aws-native.svg"}),(0,r.kt)("p",null,"Here are the main reasons for not using this stack:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You want to use another cloud besides AWS."),(0,r.kt)("li",{parentName:"ul"},"You need a more customizable workflow orchestrator and a compute platform than what\nthe AWS-managed services can provide."),(0,r.kt)("li",{parentName:"ul"},"This stack doesn't support ",(0,r.kt)("a",{parentName:"li",href:"/production/event-triggering"},"event-triggering"),". If this\nfeature is important to you, consider using one of the Kubernetes-based stacks.")),(0,r.kt)("h3",{id:"customizable-full-stack-on-aws-powered-by-kubernetes"},"Customizable full stack on AWS, powered by Kubernetes"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://outerbounds.com/engineering/deployment/aws-k8s/deployment/"},"Click here to deploy this\nstack"))),(0,r.kt)("p",null,"If your engineering team has prior experience with Kubernetes, they might prefer a\nfamiliar stack that works with their existing security policies, observability tools,\nand deployment mechanisms. In this case, this Kubernetes-native stack featuring compute\non Kubernetes and deployments on reliable, scalable, open-source ",(0,r.kt)("a",{parentName:"p",href:"https://argoproj.github.io/argo-workflows/"},"Argo\nWorkflows")," is a good option."),(0,r.kt)("p",null,"This stack can be ",(0,r.kt)("a",{parentName:"p",href:"https://outerbounds.com/engineering/deployment/aws-k8s/deployment/"},"easily deployed on EKS on\nAWS"),", leveraging S3\nas the datastore. Alternatively, some companies run this stack on-premise using\n",(0,r.kt)("a",{parentName:"p",href:"https://min.io/"},"Minio")," as an S3-compatible datastore."),(0,r.kt)("object",{style:{width:700},type:"image/svg+xml",data:"/assets/infra-stack-aws-k8s.svg"}),(0,r.kt)("p",null,"This stack requires more maintenance than the AWS-native stack above, although the basic\nsetup is quite manageable if your organization is already familiar with Kubernetes."),(0,r.kt)("h3",{id:"customizable-full-stack-on-azure-powered-by-kubernetes"},"Customizable full stack on Azure, powered by Kubernetes"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://outerbounds.com/engineering/deployment/azure-k8s/deployment/"},"Click here to deploy this\nstack"))),(0,r.kt)("p",null,"If you need a full-stack DS/ML platform on Azure, this Kubernetes-based stack is a good\noption. It is the same stack as the one running on EKS on AWS, with the S3-based\ndatastore replaced with Azure Blob Storage."),(0,r.kt)("object",{style:{width:700},type:"image/svg+xml",data:"/assets/infra-stack-azure.svg"}),(0,r.kt)("p",null,"This stack incurs a typical maintenance overhead of an AKS-based Kubernetes cluster,\nwhich shouldn't add much burden if your organization uses AKS already."),(0,r.kt)("h3",{id:"customizable-full-stack-on-google-cloud-powered-by-kubernetes"},"Customizable full stack on Google Cloud, powered by Kubernetes"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://outerbounds.com/engineering/deployment/gcp-k8s/deployment/"},"Click here to deploy this\nstack"))),(0,r.kt)("p",null,"If you need a full-stack DS/ML platform on Google Cloud, this Kubernetes-based stack is\na good option. It is the same stack as the one running on EKS on AWS, with the S3-based\ndatastore replaced with Google Cloud Storage."),(0,r.kt)("object",{style:{width:700},type:"image/svg+xml",data:"/assets/infra-stack-gcp.svg"}),(0,r.kt)("p",null,"This stack incurs a typical maintenance overhead of an GKE-based Kubernetes cluster,\nwhich shouldn't add much burden if your organization uses GKE already."),(0,r.kt)("hr",null),(0,r.kt)("p",null,"If you are unsure about the stacks, just run ",(0,r.kt)("inlineCode",{parentName:"p"},"pip install metaflow")," to install the local\nstack and move on to ",(0,r.kt)("a",{parentName:"p",href:"/getting-started/tutorials"},"the tutorials"),". Flows you create will\nwork without changes on any of these stacks."))}d.isMDXComponent=!0}}]);