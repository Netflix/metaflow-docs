<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-internals/release-notes">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EYFXNGNGB6"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-EYFXNGNGB6",{anonymize_ip:!0})</script><title data-rh="true">Release Notes | Metaflow Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.metaflow.org/img/og-metaflow.png"><meta data-rh="true" name="twitter:image" content="https://docs.metaflow.org/img/og-metaflow.png"><meta data-rh="true" property="og:url" content="https://docs.metaflow.org/internals/release-notes"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:width" content="200"><meta data-rh="true" name="og:height" content="126"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Release Notes | Metaflow Docs"><meta data-rh="true" name="description" content="Read below how Metaflow has improved over time."><meta data-rh="true" property="og:description" content="Read below how Metaflow has improved over time."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.metaflow.org/internals/release-notes"><link data-rh="true" rel="alternate" href="https://docs.metaflow.org/internals/release-notes" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.metaflow.org/internals/release-notes" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://5IZ8L9TJQL-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.3a1f2e37.css">
<link rel="preload" href="/assets/js/runtime~main.432db519.js" as="script">
<link rel="preload" href="/assets/js/main.9f384454.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Metaflow_Logo_Horizontal_OneColor_DarkBlue_RGB.svg" alt="Metaflow Logo" class="themedImage_ToTc themedImage--light_HNdA" height="30"><img src="/img/Metaflow_Logo_Horizontal_OneColor_White_RGB.svg" alt="Metaflow Logo" class="themedImage_ToTc themedImage--dark_i4oU" height="30"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Python Docs</a><a class="navbar__item navbar__link" href="/v/r">R Docs</a><a href="https://outerbounds.com/docs/admin" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Admin Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/Metaflow_Logo_Horizontal_OneColor_DarkBlue_RGB.svg" alt="Metaflow Logo" class="themedImage_ToTc themedImage--light_HNdA" height="30"><img src="/img/Metaflow_Logo_Horizontal_OneColor_White_RGB.svg" alt="Metaflow Logo" class="themedImage_ToTc themedImage--dark_i4oU" height="30"></a><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Welcome to Metaflow</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/introduction/why-metaflow">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/getting-started/install">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/metaflow/introduction">Developing with Metaflow</a><button aria-label="Toggle the collapsible sidebar category &#x27;Developing with Metaflow&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/scaling/introduction">Scalable Flows</a><button aria-label="Toggle the collapsible sidebar category &#x27;Scalable Flows&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/production/introduction">Production Deployments</a><button aria-label="Toggle the collapsible sidebar category &#x27;Production Deployments&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/api">API Reference</a><button aria-label="Toggle the collapsible sidebar category &#x27;API Reference&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/internals/release-notes">Internals of Metaflow</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/internals/release-notes">Release Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/internals/technical-overview">Technical Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/internals/testing-philosophy">Testing Philosophy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/internals/contributing">Contributing to Metaflow</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Internals of Metaflow</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Release Notes</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Release Notes</h1><p>Read below how Metaflow has improved over time.</p><p>We take backwards compatibility very seriously. In the vast majority of cases, you can
upgrade Metaflow without expecting changes in your existing code. In the rare cases when
breaking changes are absolutely necessary, usually, due to bug fixes, you can take a
look at minor breaking changes below before you upgrade.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>For the most recent release notes, see <a href="https://github.com/Netflix/metaflow/releases" target="_blank" rel="noopener noreferrer">release notes on
Github</a></p></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="261-may-13-2022"><a href="https://github.com/Netflix/metaflow/releases/tag/2.6.1" target="_blank" rel="noopener noreferrer">2.6.1 (May 13, 2022)</a><a class="hash-link" href="#261-may-13-2022" title="Direct link to heading">​</a></h2><p>The Metaflow 2.6.1 release is a minor release.</p><ul><li><p>Features</p><ul><li>Proper support for custom S3 endpoints. This enables using S3-compatible object
storages like MinIO or Dell EMC-ECS as data stores for Metaflow
(<a href="https://github.com/Netflix/metaflow/pull/1045" target="_blank" rel="noopener noreferrer">#1045</a>)</li></ul></li><li><p>Bug fixes</p><ul><li>Fixed card rendering for tables with some NaN values
(<a href="https://github.com/Netflix/metaflow/issues/1023" target="_blank" rel="noopener noreferrer">#1023</a>)  in
<a href="https://github.com/Netflix/metaflow/pull/1025" target="_blank" rel="noopener noreferrer">#1025</a></li><li>current.pathspec to return None when used outside Flow in
<a href="https://github.com/Netflix/metaflow/pull/1033" target="_blank" rel="noopener noreferrer">#1033</a></li><li>Fixed bug in the <code>card list</code> command in
<a href="https://github.com/Netflix/metaflow/pull/1044" target="_blank" rel="noopener noreferrer">#1044</a></li><li>Fixed issues with S3 get and ranges in
<a href="https://github.com/Netflix/metaflow/pull/1034" target="_blank" rel="noopener noreferrer">#1034</a></li><li>Fix <code>_new_task</code> calling bug in LocalMetadataProvider in
<a href="https://github.com/Netflix/metaflow/pull/1046" target="_blank" rel="noopener noreferrer">#1046</a></li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="260-apr-25-2022"><a href="https://github.com/Netflix/metaflow/releases/tag/2.6.0" target="_blank" rel="noopener noreferrer">2.6.0 (Apr 25, 2022)</a><a class="hash-link" href="#260-apr-25-2022" title="Direct link to heading">​</a></h2><p>The Metaflow 2.6.0 release is a minor release and introduces Metaflow&#x27;s integration with
<a href="https://docs.metaflow.org/scaling/introduction/effortless-scaling-with-kubernetes" target="_blank" rel="noopener noreferrer">Kubernetes</a>
and <a href="https://docs.metaflow.org/production/scheduling-metaflow-flows/introduction/scheduling-with-argo-workflows" target="_blank" rel="noopener noreferrer">Argo
Workflows</a></p><ul><li>Features<ul><li>Add capability to launch Metaflow tasks on Kubernetes and schedule Metaflow flows
with Argo Workflows.</li><li>Expose <code>tags</code> in <code>current</code> object.</li></ul></li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="add-capability-to-launch-metaflow-tasks-on-kubernetes-and-schedule-metaflow-flows-with-argo-workflows">Add capability to launch Metaflow tasks on Kubernetes and schedule Metaflow flows with Argo Workflows.<a class="hash-link" href="#add-capability-to-launch-metaflow-tasks-on-kubernetes-and-schedule-metaflow-flows-with-argo-workflows" title="Direct link to heading">​</a></h4><p>This release enables brand new capabilities for <a href="https://outerbounds.com/blog/human-centric-data-science-on-kubernetes-with-metaflow/" target="_blank" rel="noopener noreferrer">Metaflow on top of
Kubernetes</a>.
You can now <a href="https://docs.metaflow.org/scaling/introduction/effortless-scaling-with-kubernetes" target="_blank" rel="noopener noreferrer"><code>run --with
kubernetes</code></a>
all or parts of any Metaflow flow on top of <em>any</em> Kubernetes cluster from your
workstation. To execute your flow asynchronously, you can deploy the flow to Argo
Workflows (a Kubernetes-native workflow scheduler) with a single command -
<a href="https://docs.metaflow.org/production/scheduling-metaflow-flows/introduction/scheduling-with-argo-workflows" target="_blank" rel="noopener noreferrer"><code>argo-workflows
create</code></a>.</p><p>To get started, take a look at the <a href="https://outerbounds.com/docs/engineering-welcome/" target="_blank" rel="noopener noreferrer">deployment guide for
Kubernetes</a>. Your feedback and
feature requests are highly appreciated! - please reach out to us at
slack.outerbounds.co</p><p>PR #992 addressed issue #50.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="expose-tags-in-current-object">Expose <code>tags</code> in <code>current</code> object.<a class="hash-link" href="#expose-tags-in-current-object" title="Direct link to heading">​</a></h4><p>Metaflow tags are now available as part of the <code>current</code> singleton object.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@step</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def my_step(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from metaflow import current</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tags = current.tags</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>PR #1019 fixed issue #1007.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="254-mar-24-2022"><a href="https://github.com/Netflix/metaflow/releases/tag/2.5.4" target="_blank" rel="noopener noreferrer">2.5.4 (Mar 24, 2022)</a><a class="hash-link" href="#254-mar-24-2022" title="Direct link to heading">​</a></h2><p>The Metaflow 2.5.4 release is a minor release.</p><ul><li>Bug Fixes<ul><li>Card bug fixes (<a href="https://github.com/Netflix/metaflow/pull/989" target="_blank" rel="noopener noreferrer">#989</a>,
<a href="https://github.com/Netflix/metaflow/pull/981" target="_blank" rel="noopener noreferrer">#981</a> )</li><li>importlib_metadata fixes for Python 3.5
(<a href="https://github.com/Netflix/metaflow/pull/988" target="_blank" rel="noopener noreferrer">#988</a> )</li><li>Configurable temp root when pulling artifacts from s3
(<a href="https://github.com/Netflix/metaflow/pull/991" target="_blank" rel="noopener noreferrer">#991</a>)</li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="253-mar-7-2022"><a href="https://github.com/Netflix/metaflow/releases/tag/2.5.3" target="_blank" rel="noopener noreferrer">2.5.3 (Mar 7, 2022)</a><a class="hash-link" href="#253-mar-7-2022" title="Direct link to heading">​</a></h2><p>The Metaflow 2.5.3 release is a minor release.</p><ul><li>Bug fixes<ul><li>Fix &quot;Too many symbolic links&quot; error when using Conda + Batch on macOS in
<a href="https://github.com/Netflix/metaflow/pull/972" target="_blank" rel="noopener noreferrer">#972</a></li><li>Emit app tag for AWS Batch jobs (
<a href="https://github.com/Netflix/metaflow/pull/970" target="_blank" rel="noopener noreferrer">#970</a> )</li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="252-feb-16-2022"><a href="https://github.com/Netflix/metaflow/releases/tag/2.5.2" target="_blank" rel="noopener noreferrer">2.5.2 (Feb 16, 2022)</a><a class="hash-link" href="#252-feb-16-2022" title="Direct link to heading">​</a></h2><p>The Metaflow 2.5.2 release is a minor release.</p><ul><li>Improvements<ul><li>follow symlinks when creating code packages
(<a href="https://github.com/Netflix/metaflow/pull/958" target="_blank" rel="noopener noreferrer">#958</a>)</li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="251-feb-15-2022"><a href="https://github.com/Netflix/metaflow/releases/tag/2.5.1" target="_blank" rel="noopener noreferrer">2.5.1 (Feb 15, 2022)</a><a class="hash-link" href="#251-feb-15-2022" title="Direct link to heading">​</a></h2><p>The Metaflow 2.5.1 release is a minor release.</p><ul><li><p>New Features</p><ul><li>Introduce Mamba as a dependency solver for <code>@conda</code> in
<a href="https://github.com/Netflix/metaflow/pull/918" target="_blank" rel="noopener noreferrer">#918</a> . Mamba promises faster package
dependency resolution times, which should result in an appreciable speedup in flow
environment initialization. It is not yet enabled by default; to use it you need to
set <code>METAFLOW_CONDA_DEPENDENCY_RESOLVER</code> to <code>mamba</code> in Metaflow config. </li></ul></li><li><p>Improvements</p><ul><li>Vendor in <a href="https://click.palletsprojects.com/en/8.0.x/" target="_blank" rel="noopener noreferrer">click</a> to reduce chances of
dependency conflicts with user code in
<a href="https://github.com/Netflix/metaflow/pull/929" target="_blank" rel="noopener noreferrer">#929</a></li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="250-jan-25-2022"><a href="https://github.com/Netflix/metaflow/releases/tag/2.5.0" target="_blank" rel="noopener noreferrer">2.5.0 (Jan 25, 2022)</a><a class="hash-link" href="#250-jan-25-2022" title="Direct link to heading">​</a></h2><p>The Metaflow 2.5.0 release is a minor release.</p><ul><li><p>New Features</p><ul><li>✨ Metaflow cards are now publicly available! For details, see a new section
in the documentation, <a href="https://docs.metaflow.org/metaflow/visualizing-results" target="_blank" rel="noopener noreferrer">Visualizing
Results</a>, and a <a href="https://outerbounds.com/blog/integrating-pythonic-visual-reports-into-ml-pipelines/" target="_blank" rel="noopener noreferrer">release
blog
post</a>.</li></ul></li><li><p>Bug Fixes</p><ul><li>Fix issue in Step Functions integration with CLI defined decorators (
<a href="https://github.com/Netflix/metaflow/pull/920" target="_blank" rel="noopener noreferrer">#920</a> )</li><li>Fix compute_resources to take into account string values (
<a href="https://github.com/Netflix/metaflow/pull/919" target="_blank" rel="noopener noreferrer">#919</a> )</li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="249-jan-18-2022"><a href="https://github.com/Netflix/metaflow/releases/tag/2.4.9" target="_blank" rel="noopener noreferrer">2.4.9 (Jan 18, 2022)</a><a class="hash-link" href="#249-jan-18-2022" title="Direct link to heading">​</a></h2><p>The Metaflow 2.4.9 release is a patch release.</p><ul><li>Improvements<ul><li>Store information about the DAG being executed in an artifact. This will allow to
render execution DAG in a <code>@card</code> (
<a href="https://github.com/Netflix/metaflow/pull/822" target="_blank" rel="noopener noreferrer">#822</a> )</li></ul></li><li>Bug Fixes<ul><li>Fixed cli command when task_id provided (
<a href="https://github.com/Netflix/metaflow/pull/890" target="_blank" rel="noopener noreferrer">#890</a> )</li><li>Fix with metadata syncing on AWS Batch when running without remote metadata service
( <a href="https://github.com/Netflix/metaflow/pull/902" target="_blank" rel="noopener noreferrer">#902</a> )</li><li>Fix default resource math. Previously we sometimes computed vCPU and memory settings
incorrectly, in cases when they were set to something less than the default value (
<a href="https://github.com/Netflix/metaflow/pull/810" target="_blank" rel="noopener noreferrer">#810</a> , fixes
<a href="https://github.com/Netflix/metaflow/issues/467" target="_blank" rel="noopener noreferrer">#467</a> )</li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="248-jan-10-2022"><a href="https://github.com/Netflix/metaflow/releases/tag/2.4.8" target="_blank" rel="noopener noreferrer">2.4.8 (Jan 10, 2022)</a><a class="hash-link" href="#248-jan-10-2022" title="Direct link to heading">​</a></h2><p>The Metaflow 2.4.8 release is a patch release.</p><ul><li>Improvements<ul><li>Improved validation logic to capture reserved keywords
(<a href="https://github.com/Netflix/metaflow/pull/830" target="_blank" rel="noopener noreferrer">#830</a>, fixes
<a href="https://github.com/Netflix/metaflow/issues/589" target="_blank" rel="noopener noreferrer">#589</a>)</li><li>Remove default use of repo.anaconda.com
(<a href="https://github.com/Netflix/metaflow/pull/832" target="_blank" rel="noopener noreferrer">#832</a>)</li></ul></li><li>Bug Fixes<ul><li><code>aws_retry</code>&#x27;s <code>S3_RETRY_COUNT</code> now has to be &gt;=1
(<a href="https://github.com/Netflix/metaflow/pull/876" target="_blank" rel="noopener noreferrer">#876</a>)</li><li>Fix argument type handling for host_volumes when used with --with and Step Functions
(<a href="https://github.com/Netflix/metaflow/pull/884" target="_blank" rel="noopener noreferrer">#884</a>)</li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="247-dec-16-2021"><a href="https://github.com/Netflix/metaflow/releases/tag/2.4.7" target="_blank" rel="noopener noreferrer">2.4.7 (Dec 16, 2021)</a><a class="hash-link" href="#247-dec-16-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.4.7 release is a patch release.</p><ul><li>Improvements<ul><li>Added plumbing for <code>@card</code> decorator</li><li>Added plumbing to support distributed training on GPUs</li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="246-dec-16-2021"><a href="https://github.com/Netflix/metaflow/releases/tag/2.4.6" target="_blank" rel="noopener noreferrer">2.4.6 (Dec 16, 2021)</a><a class="hash-link" href="#246-dec-16-2021" title="Direct link to heading">​</a></h2><p>This version was skipped due to technical reasons</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="245-dec-8-2021"><a href="https://github.com/Netflix/metaflow/releases/tag/2.4.5" target="_blank" rel="noopener noreferrer">2.4.5 (Dec 8, 2021)</a><a class="hash-link" href="#245-dec-8-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.4.5 release is a patch release.</p><ul><li>Bug Fixes<ul><li>Address an issue with load_artifacts
(<a href="https://github.com/Netflix/metaflow/pull/833" target="_blank" rel="noopener noreferrer">#833</a>, fixes
<a href="https://github.com/Netflix/metaflow/issues/819" target="_blank" rel="noopener noreferrer">#819</a>)</li><li>Fixed mflog stream redirection in Step Functions
(<a href="https://github.com/Netflix/metaflow/pull/851" target="_blank" rel="noopener noreferrer">#851</a>)</li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="244-nov-29-2021"><a href="https://github.com/Netflix/metaflow/releases/2.4.4" target="_blank" rel="noopener noreferrer">2.4.4 (Nov 29, 2021)</a><a class="hash-link" href="#244-nov-29-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.4.4 release is a patch release.</p><ul><li><a href="/internals/release-notes#user-content-v2.4.4_improvements">Improvements</a><ul><li>Add default image config option as described in
<a href="https://github.com/Netflix/metaflow/issues/489" target="_blank" rel="noopener noreferrer">#489</a>
(<a href="https://github.com/Netflix/metaflow/pull/813" target="_blank" rel="noopener noreferrer">#813</a>)</li><li>Read default k8s namespace from config
(<a href="https://github.com/Netflix/metaflow/pull/823" target="_blank" rel="noopener noreferrer">#823</a>)</li></ul></li><li>Bug Fixes<ul><li>Fixed a couple of issues in S3 error handling
(<a href="https://github.com/Netflix/metaflow/pull/821" target="_blank" rel="noopener noreferrer">#821</a>)</li><li>Fixed an issue with load_artifacts when several artifacts have the same name
(<a href="https://github.com/Netflix/metaflow/pull/817" target="_blank" rel="noopener noreferrer">#817</a>)</li></ul></li><li>Misc internal improvements<ul><li>Pipe logs to $cwd/.logs instead of /logs for <code>@batch</code> &amp; <code>@kubernetes</code>
(<a href="https://github.com/Netflix/metaflow/pull/807" target="_blank" rel="noopener noreferrer">#807</a>)</li><li>mflog changes for supporting AWS Lambda
(<a href="https://github.com/Netflix/metaflow/pull/801" target="_blank" rel="noopener noreferrer">#801</a>)</li><li>Add &#x27;last modified&#x27; to S3 object
(<a href="https://github.com/Netflix/metaflow/pull/778" target="_blank" rel="noopener noreferrer">#778</a>)</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="improvements-">Improvements <a href="#user-content-v2.4.4_improvements" id="user-content-v2.4.4_improvements"></a><a class="hash-link" href="#improvements-" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="add-default-image-config-option-as-described-in-489-813">Add default image config option as described in <a href="https://github.com/Netflix/metaflow/issues/489" target="_blank" rel="noopener noreferrer">#489</a> (<a href="https://github.com/Netflix/metaflow/pull/813" target="_blank" rel="noopener noreferrer">#813</a>)<a class="hash-link" href="#add-default-image-config-option-as-described-in-489-813" title="Direct link to heading">​</a></h4><p>We&#x27;re moving to a more consistent scheme for naming options related to docker images.
You can read the details in <a href="https://github.com/Netflix/metaflow/issues/489" target="_blank" rel="noopener noreferrer">#489</a>, but
this release introduces new config options <code>DEFAULT_CONTAINER_IMAGE</code> and
<code>DEFAULT_CONTAINER_REGISTRY</code> that can be used to specify docker image in addition to
plugin-specific options like <code>KUBERNETES_CONTAINER_IMAGE</code></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="read-default-k8s-namespace-from-config-823">Read default k8s namespace from config (<a href="https://github.com/Netflix/metaflow/pull/823" target="_blank" rel="noopener noreferrer">#823</a>)<a class="hash-link" href="#read-default-k8s-namespace-from-config-823" title="Direct link to heading">​</a></h4><p>This adds a new configuration option to set the default namespace for the Kubernetes
plugin</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="243-nov-3rd-2021"><a href="https://github.com/Netflix/metaflow/releases/tag/2.4.3" target="_blank" rel="noopener noreferrer">2.4.3 (Nov 3rd 2021)</a><a class="hash-link" href="#243-nov-3rd-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.4.3 release is a patch release</p><ul><li><a href="https://github.com/Netflix/metaflow/releases#v2.4.2_bugs" target="_blank" rel="noopener noreferrer">Bug Fixes</a><ul><li>Fix a race condition when accessing artifacts of a running task</li><li>Fix an issue when using a combination of <code>@catch</code> and <code>@retry</code> decorators</li><li>Upgrade Pandas in tutorials</li></ul></li><li>Miscellaneous<ul><li>The code base has now been formatted with Black. PRs will automatically be formatted
when submitted. If submitting PRs, you can also format your PRs using black (default
options) to avoid a reformatting PR.</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-">Bug Fixes <a href="#user-content-v2.4.3_bugs" id="user-content-v2.4.3_bugs"></a><a class="hash-link" href="#bug-fixes-" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-a-race-condition-when-accessing-artifacts-of-a-running-task-789-">Fix a race condition when accessing artifacts of a running task (<a href="https://github.com/Netflix/metaflow/pull/789" target="_blank" rel="noopener noreferrer">#789</a>) <a href="#user-content-789" id="user-content-789"></a><a class="hash-link" href="#fix-a-race-condition-when-accessing-artifacts-of-a-running-task-789-" title="Direct link to heading">​</a></h4><p>When accessing artifacts of a running task using <code>Task(...).artifacts</code>, a race condition
existed and the call could return a difficult to understand error message. This release
fixes this issue and making this call will either return the artifacts present or no
artifacts at all if none are present yet.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-an-issue-when-using-a-combination-of-catch-and-retry-decorators-776-">Fix an issue when using a combination of <code>@catch</code> and <code>@retry</code> decorators (<a href="https://github.com/Netflix/metaflow/pull/776" target="_blank" rel="noopener noreferrer">#776</a>) <a href="#user-content-776" id="user-content-776"></a><a class="hash-link" href="#fix-an-issue-when-using-a-combination-of-catch-and-retry-decorators-776-" title="Direct link to heading">​</a></h4><p>A step as below:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token decorator annotation punctuation" style="color:#393A34">@retry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">times</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">var</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;exception&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">my_step</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> ValueError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>would not retry 2 times as expected but instead the exception would be caught the first
time around. This release fixes this issue and the step will now execute a total of 3
times and the exception will be caught on the third time.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="upgrade-pandas-in-tutorials-707-">Upgrade Pandas in tutorials (<a href="https://github.com/Netflix/metaflow/pull/707" target="_blank" rel="noopener noreferrer">#707</a>) <a href="#user-content-707" id="user-content-707"></a><a class="hash-link" href="#upgrade-pandas-in-tutorials-707-" title="Direct link to heading">​</a></h4><p>On macOS Big Sur, certain tutorials were broken due to using an older version of Pandas.
This updates the tutorials to use 1.3.3 to solve this issue</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="242-oct-25th-2021"><a href="https://github.com/Netflix/metaflow/releases/2.4.2" target="_blank" rel="noopener noreferrer">2.4.2 (Oct 25th, 2021)</a><a class="hash-link" href="#242-oct-25th-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.4.2 release is a patch release</p><ul><li><a href="/internals/release-notes#bug-fixes">Bug Fixes</a><ul><li>Fix a bug with accessing legacy logs through <code>metaflow.client</code></li><li>Fix a bug with task datastore access when no task attempt has been recorded</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes">Bug Fixes<a class="hash-link" href="#bug-fixes" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-a-bug-with-accessing-legacy-logs-through-metaflowclient-779">Fix a bug with accessing legacy logs through <code>metaflow.client</code> (<a href="https://github.com/Netflix/metaflow/pull/779" target="_blank" rel="noopener noreferrer">#779</a>)<a class="hash-link" href="#fix-a-bug-with-accessing-legacy-logs-through-metaflowclient-779" title="Direct link to heading">​</a></h4><p>Metaflow <code>v2.4.1</code> introduced a bug (due to a typo) in accessing legacy task logs through
<code>metaflow.client</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Task(&quot;pathspec/to/task&quot;).stdout</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This release fixes this issue.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-a-bug-with-task-datastore-access-when-no-task-attempt-has-been-recorded-780">Fix a bug with task datastore access when no task attempt has been recorded (<a href="https://github.com/Netflix/metaflow/pull/780" target="_blank" rel="noopener noreferrer">#780</a>)<a class="hash-link" href="#fix-a-bug-with-task-datastore-access-when-no-task-attempt-has-been-recorded-780" title="Direct link to heading">​</a></h4><p>A subtle bug was introduced in Metaflow <code>2.4.0</code> where the task datastore access fails
when no task attempt was recorded. This release fixes this issue.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="241-oct-18th-2021"><a href="https://github.com/Netflix/metaflow/releases/2.4.1" target="_blank" rel="noopener noreferrer">2.4.1 (Oct 18th, 2021)</a><a class="hash-link" href="#241-oct-18th-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.4.1 release is a patch release</p><ul><li><a href="/internals/release-notes#bug-fixes-1">Bug Fixes</a><ul><li>Expose non-pythonic dependencies inside the conda environment on AWS Batch</li></ul></li><li><a href="/internals/release-notes#new-features">New Features</a><ul><li>Introduce size properties for artifacts and logs in metaflow.client</li><li>Expose attempt level task properties</li><li>Introduce @kubernetes decorator for launching Metaflow tasks on Kubernetes</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-1">Bug Fixes<a class="hash-link" href="#bug-fixes-1" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="expose-non-pythonic-dependencies-inside-the-conda-environment-on-aws-batch-735">Expose non-pythonic dependencies inside the conda environment on AWS Batch (<a href="https://github.com/Netflix/metaflow/pull/735" target="_blank" rel="noopener noreferrer">#735</a>)<a class="hash-link" href="#expose-non-pythonic-dependencies-inside-the-conda-environment-on-aws-batch-735" title="Direct link to heading">​</a></h4><p>Prior to this release, non-pythonic dependencies in a conda environment were not
automatically visible to a Metaflow task executing on AWS Batch (see
<a href="https://github.com/Netflix/metaflow/issues/734" target="_blank" rel="noopener noreferrer">#734</a>) (they were available for tasks
that were executed locally). For example</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> metaflow </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> FlowSpec</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> step</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> conda</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> conda_base</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> batch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">TestFlow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">FlowSpec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">use_node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@batch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@conda</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">libraries</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;nodejs&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&gt;=16.0.0&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">use_node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">system</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;node --version&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">end</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">pass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;__main__&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TestFlow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>would print an error. This release fixes the issue with the incorrect <code>PATH</code>
configuration.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="new-features">New Features<a class="hash-link" href="#new-features" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="introduce-size-properties-for-artifacts-and-logs-in-metaflowclient-752">Introduce size properties for artifacts and logs in metaflow.client (<a href="https://github.com/Netflix/metaflow/pull/752" target="_blank" rel="noopener noreferrer">#752</a>)<a class="hash-link" href="#introduce-size-properties-for-artifacts-and-logs-in-metaflowclient-752" title="Direct link to heading">​</a></h4><p>This release exposes size properties for artifacts and logs (stderr and stdout) in
metaflow.client. These properties are relied upon by the Metaflow UI (<a href="https://www.eventbrite.fi/e/netflix-data-science-metaflow-gui-pre-release-meetup-tickets-185523605097" target="_blank" rel="noopener noreferrer">open-sourcing
soon!</a>).</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="expose-attempt-level-task-properties-725">Expose attempt level task properties (<a href="https://github.com/Netflix/metaflow/pull/725" target="_blank" rel="noopener noreferrer">#725</a>)<a class="hash-link" href="#expose-attempt-level-task-properties-725" title="Direct link to heading">​</a></h4><p>In addition to the above mentioned properties, now users of Metaflow can access attempt
specific Task metadata using the client</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Task(&#x27;42/start/452&#x27;, attempt=1)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="introduce-kubernetes-decorator-for-launching-metaflow-tasks-on-kubernetes-644">Introduce @kubernetes decorator for launching Metaflow tasks on Kubernetes (<a href="https://github.com/Netflix/metaflow/pull/644" target="_blank" rel="noopener noreferrer">#644</a>)<a class="hash-link" href="#introduce-kubernetes-decorator-for-launching-metaflow-tasks-on-kubernetes-644" title="Direct link to heading">​</a></h4><p>This release marks the alpha launch of <code>@kubernetes</code> decorator that allows farming off
Metaflow tasks onto Kubernetes. The functionality works in exactly the same manner as
<a href="/scaling/remote-tasks/introduction"><code>@batch</code></a> -</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> metaflow </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> FlowSpec</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> step</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> resources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">BigSum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">FlowSpec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@resources</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">memory</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">60000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cpu</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> numpy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        big_matrix </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> numpy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">random</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ranf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">80000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">sum</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> numpy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">big_matrix</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">took </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">end</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;The sum is %f.&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">sum</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Computing it took %dms.&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">took </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    BigSum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python big_sum.py run --with kubernetes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>will run all steps of this workflow on your existing EKS cluster (which can be
configured with <code>metaflow configure eks</code>) and provides all the goodness of Metaflow!</p><p>To get started follow <a href="https://docs.google.com/document/d/1L_4Fws1KoGg_dtSTaRlAcREX1F8FPS4ZaYk7eJyu_jA/edit" target="_blank" rel="noopener noreferrer">this
guide</a>!
We would appreciate your early feedback at
<a href="htps://slack.outerbounds.co" target="_blank" rel="noopener noreferrer">http://slack.outerbounds.co</a>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="240-oct-4th-2021"><a href="https://github.com/Netflix/metaflow/releases/tag/2.4.0" target="_blank" rel="noopener noreferrer">2.4.0 (Oct 4th, 2021)</a><a class="hash-link" href="#240-oct-4th-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.4.0 release is a minor release and includes a <em>breaking change</em></p><ul><li><a href="/internals/release-notes#breaking-changes">Breaking Changes</a><ul><li>Change return type of created_at/finished_at in the client</li></ul></li><li><a href="/internals/release-notes#bug-fixes">Bug Fixes</a><ul><li>Better error messages in case of a Conda issue</li><li>Fix error message in Metadata service</li></ul></li><li><a href="/internals/release-notes#new-features">New Features</a><ul><li>S3 retry counts are now configurable</li><li>New datastore implementation resulting in improved performance</li><li>S3 datatools performance improvements</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="breaking-changes">Breaking Changes<a class="hash-link" href="#breaking-changes" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="change-return-type-of-created_atfinished_at-in-the-client-692">Change return type of created_at/finished_at in the client (<a href="https://github.com/Netflix/metaflow/pull/692" target="_blank" rel="noopener noreferrer">#692</a>)<a class="hash-link" href="#change-return-type-of-created_atfinished_at-in-the-client-692" title="Direct link to heading">​</a></h4><p>Prior to this release, the return type for <code>created_at</code> and <code>finished_at</code> properties in
the Client API was a timestamp string. This release changes this to a <code>datetime</code> object,
as the old behavior is considered an unintentional mis-feature (see below for details).</p><p><em>How to retain the old behavior</em></p><p>To keep the old behavior, append an explicit string conversion,
<code>.strftime(&#x27;%Y-%m-%dT%H:%M:%SZ&#x27;)</code>, to the <code>created_at</code> and <code>finished_at</code> calls, e.g.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">run.created_at.strftime(&#x27;%Y-%m-%dT%H:%M:%SZ&#x27;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Background</em></p><p>The first versions of Metaflow (internal to Netflix) returned a <code>datetime</code> object in all
calls dealing with timestamps in the Client API to make it easier to perform operations
between timestamps. Unintentionally, the return type was changed to string in the
initial open-source release. This release introduces a number of internal changes,
removing all remaining discrepancies between the legacy version of Metaflow that was
used inside Netflix and the open-source version.</p><p>The timestamp change is the only change affecting the user-facing API. While Metaflow
continues to make a strong promise of backwards compatibility of user-facing features
and APIs, the benefits of one-time unification outweigh the cost of this relatively
minor breaking change.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-2">Bug Fixes<a class="hash-link" href="#bug-fixes-2" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="better-error-messages-in-case-of-a-conda-issue-706">Better error messages in case of a Conda issue (<a href="https://github.com/Netflix/metaflow/pull/706" target="_blank" rel="noopener noreferrer">#706</a>)<a class="hash-link" href="#better-error-messages-in-case-of-a-conda-issue-706" title="Direct link to heading">​</a></h4><p>Conda errors printed to <code>stderr</code> were not surfaced to the user; this release addresses
this issue.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-error-message-in-metadata-service-712">Fix error message in Metadata service (<a href="https://github.com/Netflix/metaflow/pull/712" target="_blank" rel="noopener noreferrer">#712</a>)<a class="hash-link" href="#fix-error-message-in-metadata-service-712" title="Direct link to heading">​</a></h4><p>The code responsible for printing error messages from the metadata service had a problem
that could cause it to be unable to print the correct error message and would instead
raise another error that obfuscated the initial error. This release addresses this issue
and errors from the metadata service are now properly printed.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="new-features-1">New Features<a class="hash-link" href="#new-features-1" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="s3-retry-counts-are-now-configurable-700">S3 retry counts are now configurable (<a href="https://github.com/Netflix/metaflow/pull/700" target="_blank" rel="noopener noreferrer">#700</a>)<a class="hash-link" href="#s3-retry-counts-are-now-configurable-700" title="Direct link to heading">​</a></h4><p>This release allows you to set the number of times S3 access are retried (the default is
7). The relevant environment variable is: <code>METAFLOW_S3_RETRY_COUNT</code>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="new-datastore-implementation-resulting-in-improved-performance-580">New datastore implementation resulting in improved performance (<a href="https://github.com/Netflix/metaflow/pull/580" target="_blank" rel="noopener noreferrer">#580</a>)<a class="hash-link" href="#new-datastore-implementation-resulting-in-improved-performance-580" title="Direct link to heading">​</a></h4><p>The datastore implementation was reworked to make it easier to extend in the future. It
also now uploads artifacts in parallel to S3 (as opposed to sequentially) which can lead
to better performance. The changes also contribute to a notable improvement in the speed
of <code>resume</code> which can now start resuming a flow twice as fast as before. Documentation
can be found <a href="https://github.com/Netflix/metaflow/blob/master/docs/datastore.md" target="_blank" rel="noopener noreferrer">here</a>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="s3-datatools-performance-improvements-697">S3 datatools performance improvements (<a href="https://github.com/Netflix/metaflow/pull/697" target="_blank" rel="noopener noreferrer">#697</a>)<a class="hash-link" href="#s3-datatools-performance-improvements-697" title="Direct link to heading">​</a></h4><p>The S3 datatools better handles small versus large files by using the <code>download_file</code>
command for larger files and using <code>get_object</code> for smaller files to minimize the number
of calls made to S3.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="236-sep-8th-2021">2.3.6 (Sep 8th, 2021)<a class="hash-link" href="#236-sep-8th-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.3.6 release is a patch release.</p><ul><li><a href="https://github.com/Netflix/metaflow/releases#2.3.6_bugs" target="_blank" rel="noopener noreferrer">Bug Fixes</a><ul><li><a href="https://github.com/Netflix/metaflow/releases#673" target="_blank" rel="noopener noreferrer">Fix recursion error when <code>METAFLOW_DEFAULT_ENVIRONMENT</code> is set to
<code>conda</code></a></li><li><a href="https://github.com/Netflix/metaflow/releases#676" target="_blank" rel="noopener noreferrer">Allow dots in <code>host_volumes</code> attribute for <code>@batch</code>
decorator</a></li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-3">Bug Fixes<a class="hash-link" href="#bug-fixes-3" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-recursion-error-when-metaflow_default_environment-is-set-to-conda"><a href="https://github.com/Netflix/metaflow/releases#673" target="_blank" rel="noopener noreferrer">Fix recursion error when <code>METAFLOW_DEFAULT_ENVIRONMENT</code> is set to <code>conda</code></a><a class="hash-link" href="#fix-recursion-error-when-metaflow_default_environment-is-set-to-conda" title="Direct link to heading">​</a></h4><p>Prior to this release, setting default execution environment to <code>conda</code> through
<code>METAFLOW_DEFAULT_ENVIRONMENT</code> would result in a recursion error.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">METAFLOW_DEFAULT_ENVIRONMENT=conda python flow.py run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  File &quot;/Users/savin/Code/metaflow/metaflow/cli.py&quot;, line 868, in start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if e.TYPE == environment][0](ctx.obj.flow)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  File &quot;/Users/savin/Code/metaflow/metaflow/plugins/conda/conda_environment.py&quot;, line 27, in __init__</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if e.TYPE == DEFAULT_ENVIRONMENT][0](self.flow)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  File &quot;/Users/savin/Code/metaflow/metaflow/plugins/conda/conda_environment.py&quot;, line 27, in __init__</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if e.TYPE == DEFAULT_ENVIRONMENT][0](self.flow)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  File &quot;/Users/savin/Code/metaflow/metaflow/plugins/conda/conda_environment.py&quot;, line 27, in __init__</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if e.TYPE == DEFAULT_ENVIRONMENT][0](self.flow)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [Previous line repeated 488 more times]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  File &quot;/Users/savin/Code/metaflow/metaflow/plugins/conda/conda_environment.py&quot;, line 24, in __init__</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from ...plugins import ENVIRONMENTS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RecursionError: maximum recursion depth exceeded</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This release fixes this bug.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="allow-dots-in-host_volumes-attribute-for-batch-decorator"><a href="https://github.com/Netflix/metaflow/releases#676" target="_blank" rel="noopener noreferrer">Allow dots in <code>host_volumes</code> attribute for <code>@batch</code> decorator</a><a class="hash-link" href="#allow-dots-in-host_volumes-attribute-for-batch-decorator" title="Direct link to heading">​</a></h4><p>Dots in volume names - <code>@batch(host_volumes=&#x27;/path/with/.dot&#x27;)</code> weren&#x27;t being sanitized
properly resulting in errors when a Metaflow task launched on AWS Batch. This release
fixes this bug.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="235-aug-23rd-2021">2.3.5 (Aug 23rd, 2021)<a class="hash-link" href="#235-aug-23rd-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.3.5 release is a patch release.</p><ul><li><a href="/internals/release-notes#features">Features</a><ul><li><a href="https://github.com/Netflix/metaflow/issues/441" target="_blank" rel="noopener noreferrer">Enable mounting host volumes in AWS
Batch</a></li></ul></li><li><a href="/internals/release-notes#bug-fixes">Bug Fixes</a><ul><li><a href="https://github.com/Netflix/metaflow/issues/651" target="_blank" rel="noopener noreferrer">Fix input values for Parameters of type <code>list</code> within a Metaflow Foreach
task</a></li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features">Features<a class="hash-link" href="#features" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="enable-mounting-host-volumes-in-aws-batch"><a href="https://github.com/Netflix/metaflow/issues/441" target="_blank" rel="noopener noreferrer">Enable mounting host volumes in AWS Batch</a><a class="hash-link" href="#enable-mounting-host-volumes-in-aws-batch" title="Direct link to heading">​</a></h4><p>With this release, you can now <a href="https://aws.amazon.com/premiumsupport/knowledge-center/batch-mount-efs/" target="_blank" rel="noopener noreferrer">mount and access instance host
volumes</a> within
a Metaflow task running on AWS Batch. To access a host volume, you can add
<code>host-volumes</code> argument to your <code>@batch</code> decorator -</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@batch(host_volumes=[&#x27;/home&#x27;, &#x27;/var/log&#x27;])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-4">Bug Fixes<a class="hash-link" href="#bug-fixes-4" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-input-values-for-parameters-of-type-list-within-a-metaflow-foreach-task"><a href="https://github.com/Netflix/metaflow/issues/651" target="_blank" rel="noopener noreferrer">Fix input values for Parameters of type <code>list</code> within a Metaflow Foreach task</a><a class="hash-link" href="#fix-input-values-for-parameters-of-type-list-within-a-metaflow-foreach-task" title="Direct link to heading">​</a></h4><p>The following flow had a bug where the value for <code>self.input</code> was being imputed to
<code>None</code> rather than the dictionary element. This release fixes this issue -</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> metaflow </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> FlowSpec</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Parameter</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> step</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> JSONType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ForeachFlow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">FlowSpec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    numbers_param </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Parameter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;numbers_param&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">JSONType</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        default</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;[1,2,3]&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># This works, and passes each number to the run_number step:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># self.numbers = self.numbers_param</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># self.next(self.run_number, foreach=&#x27;numbers&#x27;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># But this doesn&#x27;t:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run_number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> foreach</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;numbers_param&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run_number</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;number is </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation builtin">input</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> inputs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">end</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">pass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ForeachFlow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="234-aug-11th-2021">2.3.4 (Aug 11th, 2021)<a class="hash-link" href="#234-aug-11th-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.3.4 release is a patch release.</p><ul><li><a href="/internals/release-notes#bug-fixes-1">Bug Fixes</a><ul><li><a href="https://github.com/Netflix/metaflow/releases#637" target="_blank" rel="noopener noreferrer">Fix execution of <code>step-functions create</code> when using an <code>IncludeFile</code>
parameter</a></li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-5">Bug Fixes<a class="hash-link" href="#bug-fixes-5" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-execution-of-step-functions-create-when-using-an-includefile-parameter"><a href="https://github.com/Netflix/metaflow/releases#637" target="_blank" rel="noopener noreferrer">Fix execution of <code>step-functions create</code> when using an <code>IncludeFile</code> parameter</a><a class="hash-link" href="#fix-execution-of-step-functions-create-when-using-an-includefile-parameter" title="Direct link to heading">​</a></h4><p>PR <a href="https://github.com/Netflix/metaflow/pull/607" target="_blank" rel="noopener noreferrer">#607</a> in <code>Metaflow 2.3.3</code> introduced a
bug with <code>step-functions create</code> command for <code>IncludeFile</code> parameters. This release
rolls back that PR. A subsequent release will reintroduce a modified version of PR
<a href="https://github.com/Netflix/metaflow/pull/607" target="_blank" rel="noopener noreferrer">#607</a>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="233-jul-29th-2021">2.3.3 (Jul 29th, 2021)<a class="hash-link" href="#233-jul-29th-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.3.3 release is a patch release.</p><ul><li><a href="/internals/release-notes#features">Features</a><ul><li><a href="https://github.com/Netflix/metaflow/releases#632" target="_blank" rel="noopener noreferrer">Support resource tags for Metaflow&#x27;s integration with AWS
Batch</a></li></ul></li><li><a href="/internals/release-notes#bug-fixes">Bug Fixes</a><ul><li><a href="https://github.com/Netflix/metaflow/releases#630" target="_blank" rel="noopener noreferrer">Properly handle <code>None</code> as defaults for parameters for AWS Step Functions
execution</a></li><li><a href="https://github.com/Netflix/metaflow/releases#607" target="_blank" rel="noopener noreferrer">Fix return value of <code>IncludeFile</code>
artifacts</a></li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-1">Features<a class="hash-link" href="#features-1" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="support-resource-tags-for-metaflows-integration-with-aws-batch"><a href="https://github.com/Netflix/metaflow/releases#632" target="_blank" rel="noopener noreferrer">Support resource tags for Metaflow&#x27;s integration with AWS Batch</a><a class="hash-link" href="#support-resource-tags-for-metaflows-integration-with-aws-batch" title="Direct link to heading">​</a></h4><p>Metaflow now supports setting <a href="https://docs.aws.amazon.com/batch/latest/userguide/using-tags.html" target="_blank" rel="noopener noreferrer">resource tags for AWS Batch
jobs</a> and
propagating them to the underlying ECS tasks. The following tags are attached to the AWS
Batch jobs now -</p><ul><li><code>metaflow.flow_name</code></li><li><code>metaflow.run_id</code></li><li><code>metaflow.step_name</code></li><li><code>metaflow.user</code> / <code>metaflow.owner</code></li><li><code>metaflow.version</code></li><li><code>metaflow.production_token</code></li></ul><p>To enable this feature, set the environment variable (or alternatively in the <code>metaflow
config</code>) <code>METAFLOW_BATCH_EMIT_TAGS</code> to <code>True</code>. Keep in mind that the IAM role
(<code>MetaflowUserRole</code>, <code>StepFunctionsRole</code>) submitting the jobs to AWS Batch will need to
have the <code>Batch:TagResource</code> permission.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-6">Bug Fixes<a class="hash-link" href="#bug-fixes-6" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="properly-handle-none-as-defaults-for-parameters-for-aws-step-functions-execution"><a href="https://github.com/Netflix/metaflow/releases#630" target="_blank" rel="noopener noreferrer">Properly handle <code>None</code> as defaults for parameters for AWS Step Functions execution</a><a class="hash-link" href="#properly-handle-none-as-defaults-for-parameters-for-aws-step-functions-execution" title="Direct link to heading">​</a></h4><p>Prior to this release, a parameter specification like -</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Parameter(name=&quot;test_param&quot;, type=int, default=None)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>will result in an error even though the default has been specified</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Flow failed:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    The value of parameter test_param is ambiguous. It does not have a default and it is not required.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This release fixes this behavior by allowing the flow to execute as it would locally.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-return-value-of-includefile-artifacts"><a href="https://github.com/Netflix/metaflow/releases#607" target="_blank" rel="noopener noreferrer">Fix return value of <code>IncludeFile</code> artifacts</a><a class="hash-link" href="#fix-return-value-of-includefile-artifacts" title="Direct link to heading">​</a></h4><p>The <code>IncludeFile</code> parameter would return JSONified metadata about the file rather than
the file contents when accessed through the <code>Metaflow Client</code>. This release fixes that
behavior by returning instead the file contents, just like any other Metaflow data
artifact.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="232-jun-29th-2021">2.3.2 (Jun 29th, 2021)<a class="hash-link" href="#232-jun-29th-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.3.2 release is a minor release.</p><ul><li>Features<ul><li><code>step-functions trigger</code> command now supports <code>--run-id-file</code> option</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-2">Features<a class="hash-link" href="#features-2" title="Direct link to heading">​</a></h3><p><strong><code>step-functions trigger</code> command now supports <code>--run-id-file</code> option</strong></p><p>Similar to <code>run</code> , you can now pass <code>--run-id-file</code> option to <code>step-function trigger</code>.
Metaflow then will write the triggered run id to the specified file. This is useful if
you have additional scripts that require the run id to examine the run or wait until it
finishes.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="231-jun-23rd-2021">2.3.1 (Jun 23rd, 2021)<a class="hash-link" href="#231-jun-23rd-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.3.1 release is a minor release.</p><ul><li>Features<ul><li><a href="https://github.com/Netflix/metaflow/releases/tag/2.3.1#556" target="_blank" rel="noopener noreferrer">Performance optimizations for
<code>merge_artifacts</code></a></li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-3">Features<a class="hash-link" href="#features-3" title="Direct link to heading">​</a></h3><p><a href="https://github.com/Netflix/metaflow/releases/tag/2.3.1#556" target="_blank" rel="noopener noreferrer"><strong>Performance optimizations for
<code>merge_artifacts</code></strong></a></p><p>Prior to this release, <code>FlowSpec.merge_artifacts</code> was loading all of the merged
artifacts into memory after doing all of the consistency checks with hashes. This
release now avoids the memory and compute costs of decompressing, de-pickling,
re-pickling, and recompressing each merged artifact - resulting in improved performance
of <code>merge_artifacts</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="230-may-27th-2021">2.3.0 (May 27th, 2021)<a class="hash-link" href="#230-may-27th-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.3.0 release is a minor release.</p><ul><li>Features<ul><li><a href="/production/coordinating-larger-metaflow-projects">Coordinate larger Metaflow projects with
<code>@project</code></a></li><li><a href="/internals/release-notes#hyphenated-parameters-support-in-aws-step-functions">Hyphenated-parameters support in AWS Step
Functions</a></li><li><a href="/internals/release-notes#state-machine-execution-history-logging-for-aws-step-functions">State Machine execution history logging for AWS Step Functions in AWS CloudWatch
Logs</a></li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-4">Features<a class="hash-link" href="#features-4" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="coordinate-larger-metaflow-projects-with-project"><a href="/production/coordinating-larger-metaflow-projects">Coordinate larger Metaflow projects with <code>@project</code></a><a class="hash-link" href="#coordinate-larger-metaflow-projects-with-project" title="Direct link to heading">​</a></h4><p>It&#x27;s not uncommon for multiple people to work on the same workflow simultaneously.
Metaflow makes it possible by keeping executions <a href="/scaling/tagging">isolated through independently stored
artifacts and namespaces</a>. However, by default, <a href="/production/scheduling-metaflow-flows/introduction">all AWS Step
Functions deployments</a> are bound
to the name of the workflow. If multiple people call <code>step-functions create</code>
independently, each deployment will overwrite the previous one. In the early stages of a
project, this simple model is convenient but as the project grows, it is desirable that
multiple people can test their own AWS Step Functions deployments without interference.
Or, as a single developer, you may want to experiment with multiple independent AWS Step
Functions deployments of their workflow. This release introduces a <code>@project</code> decorator
to address this need. The <code>@project</code> decorator is used at the <code>FlowSpec</code>-level to bind a
Flow to a specific project. All flows with the same project name belong to the same
project.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> metaflow </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> FlowSpec</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> step</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> project</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> current</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@project</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;example_project&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ProjectFlow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">FlowSpec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;project name:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">project_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;project branch:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">branch_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;is this a production run?&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">is_production</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">end</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">pass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ProjectFlow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python flow.py run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The flow works exactly as before when executed outside AWS Step Functions and introduces
<code>project_name</code>, <code>branch_name</code> &amp; <code>is_production</code> in the
<a href="/scaling/tagging#accessing-current-ids-in-a-flow"><code>current</code></a> object.</p><p>On AWS Step Functions, however, <code>step-functions create</code> will create a new workflow
<code>example_project.user.username.ProjectFlow</code> (where <code>username</code> is your username) with a
user-specific <a href="/scaling/tagging">isolated namespace</a> and a <a href="/scaling/tagging#production-tokens">separate production
token</a>.</p><p>For deploying experimental (test) versions that can run in parallel with production, you
can deploy custom branches with <code>--branch</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python flow.py --branch foo step-functions create</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To deploy a production version, you can deploy with <code>--production</code> flag (or pair it up
with <code>--branch</code> if you want to run multiple variants in production)</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python project_flow.py --production step-functions create</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that the isolated namespaces offered by <code>@project</code> work best when your code is
designed to respect these boundaries. For instance, when writing results to a table, you
can use current.branch_name to choose the table to write to or you can disable writes
outside production by checking current.is_production.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="hyphenated-parameters-support-in-aws-step-functions">Hyphenated-parameters support in AWS Step Functions<a class="hash-link" href="#hyphenated-parameters-support-in-aws-step-functions" title="Direct link to heading">​</a></h4><p>Prior to this release, hyphenated parameters in AWS Step Functions weren&#x27;t supported
through CLI.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> metaflow </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> FlowSpec</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Parameter</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> step</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ParameterFlow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">FlowSpec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    foo_bar </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Parameter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;foo-bar&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token builtin">help</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;Learning rate&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      default</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.01</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;foo_bar is %f&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">foo_bar</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">end</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;foo_bar is still %f&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">foo_bar</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ParameterFlow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now, users can create their flows as usual on AWS Step Functions (with <code>step-functions
create</code>) and trigger the deployed flows through CLI with hyphenated parameters -</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python flow.py step-functions trigger --foo-bar 42</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="state-machine-execution-history-logging-for-aws-step-functions">State Machine execution history logging for AWS Step Functions<a class="hash-link" href="#state-machine-execution-history-logging-for-aws-step-functions" title="Direct link to heading">​</a></h4><p>Metaflow now logs <a href="https://docs.aws.amazon.com/step-functions/latest/dg/cw-logs.html" target="_blank" rel="noopener noreferrer">State Machine execution history in AWS CloudWatch
Logs</a> for deployed
Metaflow flows. You can enable it by specifying <code>--log-execution-history</code> flag while
creating the state machine</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python flow.py step-functions create --log-execution-history</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that you would need to set the environment variable (or alternatively in your
Metaflow config) <code>METAFLOW_SFN_EXECUTION_LOG_GROUP_ARN</code> to your AWS CloudWatch Logs Log
Group ARN to pipe the execution history logs to AWS CloudWatch Logs</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2213-may-19th-2021">2.2.13 (May 19th, 2021)<a class="hash-link" href="#2213-may-19th-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.2.13 release is a minor patch release.</p><ul><li>Bug Fixes<ul><li><a href="https://github.com/Netflix/metaflow/releases/tag/2.2.13#534" target="_blank" rel="noopener noreferrer">Handle regression with <code>@batch</code> execution on certain docker
images</a></li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-7">Bug Fixes<a class="hash-link" href="#bug-fixes-7" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="handle-regression-with-batch-execution-on-certain-docker-images"><a href="https://github.com/Netflix/metaflow/releases/tag/2.2.13#534" target="_blank" rel="noopener noreferrer">Handle regression with <code>@batch</code> execution on certain docker images</a><a class="hash-link" href="#handle-regression-with-batch-execution-on-certain-docker-images" title="Direct link to heading">​</a></h4><p>Certain <a href="https://docs.aws.amazon.com/sagemaker/latest/dg/pre-built-containers-frameworks-deep-learning.html" target="_blank" rel="noopener noreferrer">docker
images</a>
override the entrypoint by executing <code>eval</code> on the user-supplied command. The <code>2.2.10</code>
release impacted these docker images where we modified the entrypoint to support
datastore based logging. This release fixes that regression.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2212-may-18th-2021">2.2.12 (May 18th, 2021)<a class="hash-link" href="#2212-may-18th-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.2.12 release is a minor patch release.</p><ul><li>Features<ul><li><a href="https://github.com/Netflix/metaflow/releases/tag/2.2.12#532" target="_blank" rel="noopener noreferrer">Add capability to override AWS Step Functions state machine name while deploying
flows to AWS Step
Functions</a></li><li><a href="https://github.com/Netflix/metaflow/releases/tag/2.2.12#333" target="_blank" rel="noopener noreferrer">Introduce heartbeats for Metaflow
flows</a></li></ul></li><li>Bug Fixes<ul><li>[Handle regression with `Click<blockquote><p>=8.0.x`](<a href="https://github.com/Netflix/metaflow/releases/tag/2.2.12#526" target="_blank" rel="noopener noreferrer">https://github.com/Netflix/metaflow/releases/tag/2.2.12#526</a>)</p></blockquote></li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-5">Features<a class="hash-link" href="#features-5" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="add-capability-to-override-aws-step-functions-state-machine-name-while-deploying-flows-to-aws-step-functions"><a href="https://github.com/Netflix/metaflow/releases/tag/2.2.12#532" target="_blank" rel="noopener noreferrer">Add capability to override AWS Step Functions state machine name while deploying flows to AWS Step Functions</a><a class="hash-link" href="#add-capability-to-override-aws-step-functions-state-machine-name-while-deploying-flows-to-aws-step-functions" title="Direct link to heading">​</a></h4><p>Prior to this release, the State Machines created by Metaflow while deploying flows to
AWS Step Functions had the same name as that of the flow. With this release, Metaflow
users can now override the name of the State Machine created by passing in a <code>--name</code>
argument : <code>python flow.py step-functions --name foo create</code> or <code>python flow.py
step-functions --name foo trigger</code>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="introduce-heartbeats-for-metaflow-flows"><a href="https://github.com/Netflix/metaflow/releases/tag/2.2.12#333" target="_blank" rel="noopener noreferrer">Introduce heartbeats for Metaflow flows</a><a class="hash-link" href="#introduce-heartbeats-for-metaflow-flows" title="Direct link to heading">​</a></h4><p>Metaflow now registers heartbeats at the run level and the task level for all flow
executions (with the exception of flows running on AWS Step Functions where only
task-level heartbeats are captured). This provides the necessary metadata to ascertain
if a run/task has been lost. Subsequent releases of Metaflow will expose this
information through the client.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-8">Bug Fixes<a class="hash-link" href="#bug-fixes-8" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="handle-regression-with-click-80x"><a href="https://github.com/Netflix/metaflow/releases/tag/2.2.12#526" target="_blank" rel="noopener noreferrer">Handle regression with <code>Click &gt;=8.0.x</code></a><a class="hash-link" href="#handle-regression-with-click-80x" title="Direct link to heading">​</a></h4><p>The latest release of Click (8.0.0) broke certain idempotency assumptions in Metaflow
which PR <a href="https://github.com/Netflix/metaflow/pull/526" target="_blank" rel="noopener noreferrer">#526</a> addresses.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2211-apr-30th-2021">2.2.11 (Apr 30th, 2021)<a class="hash-link" href="#2211-apr-30th-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.2.11 release is a minor patch release.</p><ul><li>Bug Fixes<ul><li>Fix regression that broke compatibility with Python 2.7</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-9">Bug Fixes<a class="hash-link" href="#bug-fixes-9" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-regression-that-broke-compatibility-with-python-27">Fix regression that broke compatibility with Python 2.7<a class="hash-link" href="#fix-regression-that-broke-compatibility-with-python-27" title="Direct link to heading">​</a></h4><p><code>shlex.quote</code>, introduced in #493, is not compatible with Python 2.7. <code>pipes.quote</code> is
now used for Python 2.7.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2210-apr-22nd-2021">2.2.10 (Apr 22nd, 2021)<a class="hash-link" href="#2210-apr-22nd-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.2.10 release is a minor patch release.</p><ul><li>Features<ul><li>AWS Logs Group, Region and Stream are now available in metadata for tasks executed
on AWS Batch</li><li>Execution logs are now available for all tasks in Metaflow universe</li></ul></li><li>Bug Fixes<ul><li>Fix regression with <code>ping/</code> endpoint for Metadata service</li><li><a href="https://gitter.im/metaflow_org/community?at=605decca68921b62f48a4190" target="_blank" rel="noopener noreferrer">Fix the behaviour of <code>--namespace=</code> CLI args when executing a
flow</a></li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-6">Features<a class="hash-link" href="#features-6" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="aws-logs-group-region-and-stream-are-now-available-in-metadata-for-tasks-executed-on-aws-batch">AWS Logs Group, Region and Stream are now available in metadata for tasks executed on AWS Batch<a class="hash-link" href="#aws-logs-group-region-and-stream-are-now-available-in-metadata-for-tasks-executed-on-aws-batch" title="Direct link to heading">​</a></h4><p>For tasks that execute on AWS Batch, Metaflow now records the location where the AWS
Batch instance writes the container logs in AWS Logs. This can be handy in locating the
logs through the client API -</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Step(&#x27;Flow/42/a&#x27;).task.metadata_dict[&#x27;aws-batch-awslogs-group&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Step(&#x27;Flow/42/a&#x27;).task.metadata_dict[&#x27;aws-batch-awslogs-region&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Step(&#x27;Flow/42/a&#x27;).task.metadata_dict[&#x27;aws-batch-awslogs-stream&#x27;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="execution-logs-are-now-available-for-all-tasks-in-metaflow-universe">Execution logs are now available for all tasks in Metaflow universe<a class="hash-link" href="#execution-logs-are-now-available-for-all-tasks-in-metaflow-universe" title="Direct link to heading">​</a></h4><p>All Metaflow runtime/task logs are now published via a sidecar process to the datastore.
The user-visible logs on the console are streamed directly from the datastore. For
Metaflow&#x27;s integrations with the cloud (AWS at the moment), the compute tasks logs (AWS
Batch) are directly written by Metaflow into the datastore (Amazon S3) independent of
where the flow is launched from (User&#x27;s laptop or AWS Step Functions). This has multiple
benefits</p><ul><li>Metaflow no longer relies on AWS Cloud Watch for fetching the AWS Batch execution logs
to the console - AWS Cloud Watch has rather low global API limits which have caused
multiple issues in the past for our users</li><li>Logs for AWS Step Functions executions are now also available in Amazon S3 and can be
easily fetched by simply doing <code>python flow.py logs 42/start</code> or
<code>Step(&#x27;Flow/42/start&#x27;).task.stdout</code>.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-10">Bug Fixes<a class="hash-link" href="#bug-fixes-10" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-regression-with-ping-endpoint-for-metadata-service">Fix regression with <code>ping/</code> endpoint for Metadata service<a class="hash-link" href="#fix-regression-with-ping-endpoint-for-metadata-service" title="Direct link to heading">​</a></h4><p>Fix a regression introduced in <code>v2.2.9</code> where the endpoint responsible for ascertaining
the version of the deployed Metadata service was erroneously moved to <code>ping/</code> from
<code>ping</code></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-the-behaviour-of---namespace-cli-args-when-executing-a-flow"><a href="https://gitter.im/metaflow_org/community?at=605decca68921b62f48a4190" target="_blank" rel="noopener noreferrer">Fix the behaviour of <code>--namespace=</code> CLI args when executing a flow</a><a class="hash-link" href="#fix-the-behaviour-of---namespace-cli-args-when-executing-a-flow" title="Direct link to heading">​</a></h4><p><code>python flow.py run --namespace=</code> now correctly makes the global namespace visible
within the flow execution.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="229-apr-19th-2021">2.2.9 (Apr 19th, 2021)<a class="hash-link" href="#229-apr-19th-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.2.9 release is a minor patch release.</p><ul><li>Bug Fixes<ul><li><a href="https://gitter.im/metaflow_org/community?at=60622af8940f1d555e277c12" target="_blank" rel="noopener noreferrer">Remove pinned pylint
dependency</a></li><li><a href="https://gitter.im/metaflow_org/community?at=5f80e21d02e81701b0106c6d" target="_blank" rel="noopener noreferrer">Improve handling of <code>/</code> in image parameter for
batch</a></li><li>List custom FlowSpec parameters in the intended order</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bugs">Bugs<a class="hash-link" href="#bugs" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="remove-pinned-pylint-dependency"><a href="https://gitter.im/metaflow_org/community?at=60622af8940f1d555e277c12" target="_blank" rel="noopener noreferrer">Remove pinned pylint dependency</a><a class="hash-link" href="#remove-pinned-pylint-dependency" title="Direct link to heading">​</a></h4><p>Pylint dependency was unpinned and made floating. See PR
<a href="https://github.com/Netflix/metaflow/pull/462" target="_blank" rel="noopener noreferrer">#462</a>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="improve-handling-of--in-image-parameter-for-batch"><a href="https://gitter.im/metaflow_org/community?at=5f80e21d02e81701b0106c6d" target="_blank" rel="noopener noreferrer">Improve handling of <code>/</code> in image parameter for batch</a><a class="hash-link" href="#improve-handling-of--in-image-parameter-for-batch" title="Direct link to heading">​</a></h4><p>You are now able to specify docker images of the form <code>foo/bar/baz:tag</code> in the batch
decorator. See PR <a href="https://github.com/Netflix/metaflow/pull/466" target="_blank" rel="noopener noreferrer">#466</a>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="list-custom-flowspec-parameters-in-the-intended-order">List custom FlowSpec parameters in the intended order<a class="hash-link" href="#list-custom-flowspec-parameters-in-the-intended-order" title="Direct link to heading">​</a></h4><p>The order in which parameters are specified by the user in the FlowSpec is now preserved
when displaying them with <code>--help</code>. See PR
<a href="https://github.com/Netflix/metaflow/pull/456" target="_blank" rel="noopener noreferrer">#456</a>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="228-mar-15th-2021">2.2.8 (Mar 15th, 2021)<a class="hash-link" href="#228-mar-15th-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.2.8 release is a minor patch release.</p><ul><li>Bug Fixes<ul><li><a href="https://gitter.im/metaflow_org/community?at=604a2bfb44f5a454a46cc7f8" target="_blank" rel="noopener noreferrer">Fix <code>@environment</code> behavior for conflicting attribute
values</a></li><li><a href="https://gitter.im/metaflow_org/community?at=6048a07d823b6654d296d62d" target="_blank" rel="noopener noreferrer">Fix <code>environment is not callable</code> error when using
<code>@environment</code></a></li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bugs-1">Bugs<a class="hash-link" href="#bugs-1" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-environment-behavior-for-conflicting-attribute-values"><a href="https://gitter.im/metaflow_org/community?at=604a2bfb44f5a454a46cc7f8" target="_blank" rel="noopener noreferrer">Fix <code>@environment</code> behavior for conflicting attribute values</a><a class="hash-link" href="#fix-environment-behavior-for-conflicting-attribute-values" title="Direct link to heading">​</a></h4><p>Metaflow was incorrectly handling environment variables passed through the
<code>@environment</code> decorator in some specific instances. When <code>@environment</code> decorator is
specified over multiple steps, the actual environment that&#x27;s available to any step is
the union of attributes of all the <code>@environment</code> decorators; which is incorrect
behavior. For example, in the following workflow -</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> metaflow </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> FlowSpec</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> step</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> batch</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">LinearFlow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">FlowSpec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@environment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">vars</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;var&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">getenv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;var_1&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">getenv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;var&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@environment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">vars</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;var&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">getenv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;var_2&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">a</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">getenv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;var&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">end</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">pass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LinearFlow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var_1=foo var_2=bar python flow.py run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>will result in</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Metaflow 2.2.7.post10+gitb7d4c48 executing LinearFlow for user:savin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Validating your flow...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    The graph looks good!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running pylint...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Pylint is happy!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-03-12 20:46:04.161 Workflow starting (run-id 6810):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-03-12 20:46:04.614 [6810/start/86638 (pid 10997)] Task is starting.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-03-12 20:46:06.783 [6810/start/86638 (pid 10997)] foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-03-12 20:46:07.815 [6810/start/86638 (pid 10997)] Task finished successfully.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-03-12 20:46:08.390 [6810/a/86639 (pid 11003)] Task is starting.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-03-12 20:46:10.649 [6810/a/86639 (pid 11003)] foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-03-12 20:46:11.550 [6810/a/86639 (pid 11003)] Task finished successfully.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-03-12 20:46:12.145 [6810/end/86640 (pid 11009)] Task is starting.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-03-12 20:46:15.382 [6810/end/86640 (pid 11009)] Task finished successfully.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-03-12 20:46:15.563 Done!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note the output for the step <code>a</code> which should have been <code>bar</code>. PR
<a href="https://github.com/Netflix/metaflow/pull/452" target="_blank" rel="noopener noreferrer">#452</a> fixes the issue.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-environment-is-not-callable-error-when-using-environment"><a href="https://gitter.im/metaflow_org/community?at=6048a07d823b6654d296d62d" target="_blank" rel="noopener noreferrer">Fix <code>environment is not callable</code> error when using <code>@environment</code></a><a class="hash-link" href="#fix-environment-is-not-callable-error-when-using-environment" title="Direct link to heading">​</a></h4><p>Using <code>@environment</code> would often result in an error from <code>pylint</code> - <code>E1102: environment
is not callable (not-callable)</code>. Users were getting around this issue by launching their
flows with <code>--no-pylint</code>. PR <a href="https://github.com/Netflix/metaflow/pull/451" target="_blank" rel="noopener noreferrer">#451</a> fixes
this issue.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="227-feb-8th-2021">2.2.7 (Feb 8th, 2021)<a class="hash-link" href="#227-feb-8th-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.2.7 release is a minor patch release.</p><ul><li><a href="https://github.com/Netflix/metaflow/releases#2.2.7_bugs" target="_blank" rel="noopener noreferrer">Bug Fixes</a><ul><li><a href="https://gitter.im/metaflow_org/community?at=601f56d955359c58bf28ef1a" target="_blank" rel="noopener noreferrer">Handle for-eaches properly for AWS Step Functions workflows running on AWS
Fargate</a></li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bugs-2">Bugs<a class="hash-link" href="#bugs-2" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="handle-for-eaches-properly-for-aws-step-functions-workflows-running-on-aws-fargate"><a href="https://gitter.im/metaflow_org/community?at=601f56d955359c58bf28ef1a" target="_blank" rel="noopener noreferrer">Handle for-eaches properly for AWS Step Functions workflows running on AWS Fargate</a><a class="hash-link" href="#handle-for-eaches-properly-for-aws-step-functions-workflows-running-on-aws-fargate" title="Direct link to heading">​</a></h4><p>Workflows orchestrated by AWS Step Functions were failing to properly execute <code>for-each</code>
steps on AWS Fargate. The culprit was lack of access to instance metadata for ECS.
Metaflow instantiates a connection to Amazon DynamoDB to keep track of <code>for-each</code>
cardinality. This connection requires knowledge of the region that the job executes in
and is made available via <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-metadata.html" target="_blank" rel="noopener noreferrer">instance
metadata</a>
on EC2; which unfortunately is not available on ECS (for AWS Fargate). This fix
introduces the necessary checks for inferring the region correctly for tasks executing
on AWS Fargate. Note that after the recent changes to <a href="https://aws.amazon.com/blogs/aws/amazon-s3-update-strong-read-after-write-consistency/" target="_blank" rel="noopener noreferrer">Amazon S3&#x27;s consistency
model</a>,
the Amazon DynamoDB dependency is no longer needed and will be done away in a subsequent
release. PR: <a href="https://github.com/Netflix/metaflow/pull/436" target="_blank" rel="noopener noreferrer">#436</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="226-jan-26th-2021">2.2.6 (Jan 26th, 2021)<a class="hash-link" href="#226-jan-26th-2021" title="Direct link to heading">​</a></h2><p>The Metaflow 2.2.6 release is a minor patch release.</p><ul><li>Features<ul><li>Support AWS Fargate as compute backend for Metaflow tasks launched on AWS Batch</li><li>Support <code>shared_memory</code>, <code>max_swap</code>, <code>swappiness</code> attributes for Metaflow tasks
launched on AWS Batch</li><li>Support wider very-wide workflows on top of AWS Step Functions</li></ul></li><li>Bug Fixes<ul><li>Assign tags to <code>Run</code> objects generated through AWS Step Functions executions</li><li>Pipe all workflow set-up logs to <code>stderr</code></li><li>Handle null assignment to <code>IncludeFile</code> properly</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-7">Features<a class="hash-link" href="#features-7" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="support-aws-fargate-as-compute-backend-for-metaflow-tasks-launched-on-aws-batch">Support AWS Fargate as compute backend for Metaflow tasks launched on AWS Batch<a class="hash-link" href="#support-aws-fargate-as-compute-backend-for-metaflow-tasks-launched-on-aws-batch" title="Direct link to heading">​</a></h4><p>At <a href="https://aws.amazon.com/blogs/aws/new-fully-serverless-batch-computing-with-aws-batch-support-for-aws-fargate/" target="_blank" rel="noopener noreferrer">AWS re:invent 2020, AWS announced support for AWS
Fargate</a>
as a compute backend (in addition to EC2) for AWS Batch. With this feature, Metaflow
users can now submit their Metaflow jobs to AWS Batch Job Queues which are connected to
AWS Fargate Compute Environments as well. By setting the environment variable -
<code>METAFLOW_ECS_FARGATE_EXECUTION_ROLE</code>, users can configure the ecsTaskExecutionRole for
the AWS Batch container and AWS Fargate agent.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="support-shared_memory-max_swap-swappiness-attributes-for-metaflow-tasks-launched-on-aws-batch">Support <code>shared_memory</code>, <code>max_swap</code>, <code>swappiness</code> attributes for Metaflow tasks launched on AWS Batch<a class="hash-link" href="#support-shared_memory-max_swap-swappiness-attributes-for-metaflow-tasks-launched-on-aws-batch" title="Direct link to heading">​</a></h4><p>The <code>@batch</code> decorator now supports <code>shared_memory</code>, <code>max_swap</code>, <code>swappiness</code> attributes
for Metaflow tasks launched on AWS Batch to provide a greater degree of control for
memory management.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="support-wider-very-wide-workflows-on-top-of-aws-step-functions">Support wider very-wide workflows on top of AWS Step Functions<a class="hash-link" href="#support-wider-very-wide-workflows-on-top-of-aws-step-functions" title="Direct link to heading">​</a></h4><p>The tag <code>metaflow_version:</code> and <code>runtime:</code> is now available for all packaged executions
and remote executions as well. This ensures that every run logged by Metaflow will have
<code>metaflow_version</code> and <code>runtime</code> system tags available.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-11">Bug Fixes<a class="hash-link" href="#bug-fixes-11" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="assign-tags-to-run-objects-generated-through-aws-step-functions-executions">Assign tags to <code>Run</code> objects generated through AWS Step Functions executions<a class="hash-link" href="#assign-tags-to-run-objects-generated-through-aws-step-functions-executions" title="Direct link to heading">​</a></h4><p><code>Run</code> objects generated by flows executed on top of AWS Step Functions were missing the
tags assigned to the flow; even though the tags were correctly persisted to tasks. This
release fixes and brings inline the tagging behavior as observed with local flow
executions.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="pipe-all-workflow-set-up-logs-to-stderr">Pipe all workflow set-up logs to <code>stderr</code><a class="hash-link" href="#pipe-all-workflow-set-up-logs-to-stderr" title="Direct link to heading">​</a></h4><p>Execution set-up logs for <code>@conda</code> and <code>IncludeFile</code> were being piped to <code>stdout</code> which
made manipulating the output of commands like <code>python flow.py step-functions create
--only-json</code> a bit difficult. This release moves the workflow set-up logs to <code>stderr</code>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="handle-null-assignment-to-includefile-properly">Handle null assignment to <code>IncludeFile</code> properly<a class="hash-link" href="#handle-null-assignment-to-includefile-properly" title="Direct link to heading">​</a></h4><p>A workflow executed without a required <code>IncludeFile</code> parameter would fail when the
parameter was referenced inside the flow. This release fixes the issue by assigning a
null value to the parameter in such cases.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="225-nov-11th-2020">2.2.5 (Nov 11th, 2020)<a class="hash-link" href="#225-nov-11th-2020" title="Direct link to heading">​</a></h2><p>The Metaflow 2.2.5 release is a minor patch release.</p><ul><li>Features<ul><li>Log <code>metaflow_version:</code> and <code>runtime:</code> tag for all executions</li></ul></li><li>Bug Fixes<ul><li>Handle inconsistently cased file system issue when creating @conda environments on
macOS for linux-64</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-8">Features<a class="hash-link" href="#features-8" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="log-metaflow_version-and-runtime-tag-for-all-executions">Log <code>metaflow_version:</code> and <code>runtime:</code> tag for all executions<a class="hash-link" href="#log-metaflow_version-and-runtime-tag-for-all-executions" title="Direct link to heading">​</a></h4><p>The tag <code>metaflow_version:</code> and <code>runtime:</code> is now available for all packaged executions
and remote executions as well. This ensures that every run logged by Metaflow will have
<code>metaflow_version</code> and <code>runtime</code> system tags available.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-12">Bug Fixes<a class="hash-link" href="#bug-fixes-12" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="handle-inconsistently-cased-file-system-issue-when-creating-conda-environments-on-macos-for-linux-64">Handle inconsistently cased file system issue when creating @conda environments on macOS for linux-64<a class="hash-link" href="#handle-inconsistently-cased-file-system-issue-when-creating-conda-environments-on-macos-for-linux-64" title="Direct link to heading">​</a></h4><p>Conda fails to correctly set up environments for linux-64 packages on macOS at times due
to inconsistently cased filesystems. Environment creation is needed to collect the
necessary metadata for correctly setting up the conda environment on AWS Batch. This fix
simply ignores the error-checks that conda throws while setting up the environments on
macOS when the intended destination is AWS Batch.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="224-oct-28th-2020">2.2.4 (Oct 28th, 2020)<a class="hash-link" href="#224-oct-28th-2020" title="Direct link to heading">​</a></h2><p>The Metaflow 2.2.4 release is a minor patch release.</p><ul><li>Features<ul><li>Metaflow is now compliant with AWS GovCloud &amp; AWS CN regions</li></ul></li><li>Bug Fixes<ul><li>Address a bug with overriding the default value for
<a href="/scaling/data#data-in-local-files">IncludeFile</a></li><li>Port AWS region check for AWS DynamoDb from <code>curl</code> to <code>requests</code></li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-9">Features<a class="hash-link" href="#features-9" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="metaflow-is-now-compliant-with-aws-govcloud--aws-cn-regions">Metaflow is now compliant with AWS GovCloud &amp; AWS CN regions<a class="hash-link" href="#metaflow-is-now-compliant-with-aws-govcloud--aws-cn-regions" title="Direct link to heading">​</a></h4><p>AWS GovCloud &amp; AWS CN users can now enjoy all the features of Metaflow within their
region partition with no change on their end. PR: #364</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-13">Bug Fixes<a class="hash-link" href="#bug-fixes-13" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="address-a-bug-with-overriding-the-default-value-for-includefile">Address a bug with overriding the default value for <a href="/scaling/data#data-in-local-files">IncludeFile</a><a class="hash-link" href="#address-a-bug-with-overriding-the-default-value-for-includefile" title="Direct link to heading">​</a></h4><p>Metaflow v2.1.0 introduced a bug in <a href="/scaling/data#data-in-local-files">IncludeFile
functionality</a> which prevented users from
overriding the default value specified.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="port-aws-region-check-for-aws-dynamodb-from-curl-to-requests">Port AWS region check for AWS DynamoDb from <code>curl</code> to <code>requests</code><a class="hash-link" href="#port-aws-region-check-for-aws-dynamodb-from-curl-to-requests" title="Direct link to heading">​</a></h4><p>Metaflow&#x27;s AWS Step Functions&#x27; integration relies on AWS DynamoDb to manage
<a href="/metaflow/basics#foreach">foreach</a> constructs. Metaflow was leveraging <code>curl</code> at
runtime to detect the region for AWS DynamoDb. Some docker images don&#x27;t have <code>curl</code>
installed by default; moving to <code>requests</code> (a metaflow dependency) fixes the issue.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="223-sept-8th-2020">2.2.3 (Sept 8th, 2020)<a class="hash-link" href="#223-sept-8th-2020" title="Direct link to heading">​</a></h2><p>The Metaflow 2.2.3 release is a minor patch release.</p><ul><li><a href="/internals/release-notes#bug-fixes">Bug Fixes</a><ul><li>Fix issue <a href="https://github.com/Netflix/metaflow/issues/305" target="_blank" rel="noopener noreferrer">#305</a> : Default &#x27;help&#x27;
for parameters was not handled properly.</li><li>Pin the conda library versions for Metaflow default dependencies based on the Python
version.</li><li>Add conda bin path to the PATH environment variable during Metaflow step execution.</li><li>Fix a typo in metaflow/debug.py</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-14">Bug Fixes<a class="hash-link" href="#bug-fixes-14" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-issue-305--default-help-for-parameters-was-not-handled-properly">Fix issue <a href="https://github.com/Netflix/metaflow/issues/305" target="_blank" rel="noopener noreferrer">#305</a> : Default &#x27;help&#x27; for parameters was not handled properly<a class="hash-link" href="#fix-issue-305--default-help-for-parameters-was-not-handled-properly" title="Direct link to heading">​</a></h4><p>Fix the issue where default <code>help</code> for parameters was not handled properly. Issue
<a href="https://github.com/Netflix/metaflow/issues/305" target="_blank" rel="noopener noreferrer">#305</a>: flow fails because
<code>IncludeFile</code>&#x27;s default value for the <code>help</code> argument is None. PR:
<a href="https://github.com/Netflix/metaflow/pull/318" target="_blank" rel="noopener noreferrer">#318</a></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="pin-the-conda-library-versions-for-metaflow-default-dependencies-based-on-the-python-version">Pin the conda library versions for Metaflow default dependencies based on the Python version<a class="hash-link" href="#pin-the-conda-library-versions-for-metaflow-default-dependencies-based-on-the-python-version" title="Direct link to heading">​</a></h4><p>The previously pinned library version does not work with python 3.8. Now we have two
sets of different version combinations which should work for python 2.7, 3.5, 3.6, 3.7,
and 3.8. PR: <a href="https://github.com/Netflix/metaflow/pull/308" target="_blank" rel="noopener noreferrer">#308</a></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="add-conda-bin-path-to-the-path-environment-variable-during-metaflow-step-execution">Add conda bin path to the PATH environment variable during Metaflow step execution<a class="hash-link" href="#add-conda-bin-path-to-the-path-environment-variable-during-metaflow-step-execution" title="Direct link to heading">​</a></h4><p>Previously the executable installed in conda environment was not visible inside Metaflow
steps. Fixing this issue by appending conda bin path to the PATH environment variable.
PR: <a href="https://github.com/Netflix/metaflow/pull/307" target="_blank" rel="noopener noreferrer">#307</a></p><p>PRs: <a href="https://github.com/Netflix/metaflow/pull/307" target="_blank" rel="noopener noreferrer">#307</a>,
<a href="https://github.com/Netflix/metaflow/pull/308" target="_blank" rel="noopener noreferrer">#308</a>,
<a href="https://github.com/Netflix/metaflow/pull/310" target="_blank" rel="noopener noreferrer">#310</a>,
<a href="https://github.com/Netflix/metaflow/pull/314" target="_blank" rel="noopener noreferrer">#314</a>,
<a href="https://github.com/Netflix/metaflow/pull/317" target="_blank" rel="noopener noreferrer">#317</a>,
<a href="https://github.com/Netflix/metaflow/pull/318" target="_blank" rel="noopener noreferrer">#318</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="222-aug-20th-2020">2.2.2 (Aug 20th, 2020)<a class="hash-link" href="#222-aug-20th-2020" title="Direct link to heading">​</a></h2><p>The Metaflow 2.2.2 release is a minor patch release.</p><ul><li><a href="/internals/release-notes#bug-fixes">Bug Fixes</a><ul><li>Fix a regression introduced in 2.2.1 related to Conda environments</li><li>Clarify Pandas requirements for Tutorial Episode 04</li><li>Fix an issue with the metadata service</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-15">Bug Fixes<a class="hash-link" href="#bug-fixes-15" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-a-regression-with-conda">Fix a regression with Conda<a class="hash-link" href="#fix-a-regression-with-conda" title="Direct link to heading">​</a></h4><p>Metaflow 2.2.1 included a commit which was merged too early and broke the use of Conda.
This release reverses this patch.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="clarify-pandas-version-needed-for-episode-04">Clarify Pandas version needed for Episode 04<a class="hash-link" href="#clarify-pandas-version-needed-for-episode-04" title="Direct link to heading">​</a></h4><p>Recent versions of Pandas are not backward compatible with the one used in the tutorial;
a small comment was added to warn of this fact.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-an-issue-with-the-metadata-service">Fix an issue with the metadata service<a class="hash-link" href="#fix-an-issue-with-the-metadata-service" title="Direct link to heading">​</a></h4><p>In some cases, the metadata service would not properly create runs or tasks.</p><p>PRs <a href="https://github.com/Netflix/metaflow/pull/296" target="_blank" rel="noopener noreferrer">#296</a>,
<a href="https://github.com/Netflix/metaflow/pull/297" target="_blank" rel="noopener noreferrer">#297</a>,
<a href="https://github.com/Netflix/metaflow/pull/298" target="_blank" rel="noopener noreferrer">#298</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="221-aug-17th-2020">2.2.1 (Aug 17th, 2020)<a class="hash-link" href="#221-aug-17th-2020" title="Direct link to heading">​</a></h2><p>The Metaflow 2.2.1 release is a minor patch release.</p><ul><li><a href="/internals/release-notes#features">Features</a><ul><li>Add <code>include</code> parameter to <code>merge_artifacts</code>.</li></ul></li><li><a href="/internals/release-notes#bug-fixes">Bug Fixes</a><ul><li>Fix a regression introduced in 2.1 related to S3 datatools</li><li>Fix an issue where Conda execution would fail if the Conda environment was not
writeable</li><li>Fix the behavior of uploading artifacts to the S3 datastore in case of retries</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-10">Features<a class="hash-link" href="#features-10" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="add-include-parameter-for-merge_artifacts">Add <code>include</code> parameter for <code>merge_artifacts</code><a class="hash-link" href="#add-include-parameter-for-merge_artifacts" title="Direct link to heading">​</a></h4><p>You can now specify the artifacts to be merged explicitly by the <code>merge_artifacts</code>
method as opposed to just specifying the ones that should <em>not</em> be merged.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-16">Bug Fixes<a class="hash-link" href="#bug-fixes-16" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-a-regression-with-datatools">Fix a regression with datatools<a class="hash-link" href="#fix-a-regression-with-datatools" title="Direct link to heading">​</a></h4><p>Fixes the regression described in
<a href="https://github.com/Netflix/metaflow/issues/285" target="_blank" rel="noopener noreferrer">#285</a>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-an-issue-with-conda-in-certain-environments">Fix an issue with Conda in certain environments<a class="hash-link" href="#fix-an-issue-with-conda-in-certain-environments" title="Direct link to heading">​</a></h4><p>In some cases, Conda is installed system wide and the user cannot write to its
installation directory. This was causing issues when trying to use the Conda
environment. Fixes <a href="https://github.com/Netflix/metaflow/issues/179" target="_blank" rel="noopener noreferrer">#179</a>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-an-issue-with-the-s3-datastore-in-case-of-retries">Fix an issue with the S3 datastore in case of retries<a class="hash-link" href="#fix-an-issue-with-the-s3-datastore-in-case-of-retries" title="Direct link to heading">​</a></h4><p>Retries were not properly handled when uploading artifacts to the S3 datastore. This fix
addresses this issue.</p><p>PRs <a href="https://github.com/Netflix/metaflow/pull/282" target="_blank" rel="noopener noreferrer">#282</a>,
<a href="https://github.com/Netflix/metaflow/pull/286" target="_blank" rel="noopener noreferrer">#286</a>,
<a href="https://github.com/Netflix/metaflow/pull/287" target="_blank" rel="noopener noreferrer">#287</a>,
<a href="https://github.com/Netflix/metaflow/pull/288" target="_blank" rel="noopener noreferrer">#288</a>,
<a href="https://github.com/Netflix/metaflow/pull/289" target="_blank" rel="noopener noreferrer">#289</a>,
<a href="https://github.com/Netflix/metaflow/pull/290" target="_blank" rel="noopener noreferrer">#290</a>,
<a href="https://github.com/Netflix/metaflow/pull/291" target="_blank" rel="noopener noreferrer">#291</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="220-aug-4th-2020">2.2.0 (Aug 4th, 2020)<a class="hash-link" href="#220-aug-4th-2020" title="Direct link to heading">​</a></h2><p>The Metaflow 2.2.0 release is a minor release and introduces <a href="/v/r">Metaflow&#x27;s support for R
lang</a>.</p><ul><li><a href="/internals/release-notes#features-1">Features</a><ul><li>Support for R lang.</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-11">Features<a class="hash-link" href="#features-11" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="support-for-r-lang">Support for R lang.<a class="hash-link" href="#support-for-r-lang" title="Direct link to heading">​</a></h4><p>This release provides an <a href="/v/r">idiomatic API to access Metaflow in R lang</a>. It
piggybacks on the Pythonic implementation as the backend providing most of the
functionality previously accessible to the Python community. With this release, R users
can structure their code as a metaflow flow. Metaflow will <a href="/v/r/metaflow/basics#the-structure-of-metaflow-code">snapshot the code, data, and
dependencies</a> automatically in
a content-addressed datastore allowing for <a href="/v/r/metaflow/debugging#how-to-debug-failed-flows">resuming of
workflows</a>, <a href="/v/r/metaflow/client">reproducing past
results, and inspecting anything about the workflow</a> e.g. in
a notebook or RStudio IDE. Additionally, without any changes to their workflows, users
can now <a href="/v/r/metaflow/scaling">execute code on AWS Batch and interact with Amazon S3
seamlessly</a>.</p><p>PR <a href="https://github.com/Netflix/metaflow/pull/263" target="_blank" rel="noopener noreferrer">#263</a> and PR
<a href="https://github.com/Netflix/metaflow/pull/214" target="_blank" rel="noopener noreferrer">#214</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="211-jul-30th-2020">2.1.1 (Jul 30th, 2020)<a class="hash-link" href="#211-jul-30th-2020" title="Direct link to heading">​</a></h2><p>The Metaflow 2.1.1 release is a minor patch release.</p><ul><li><a href="/internals/release-notes#bug-fixes">Bug Fixes</a><ul><li>Handle race condition for <code>/step</code> endpoint of metadata service.</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-17">Bug Fixes<a class="hash-link" href="#bug-fixes-17" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="handle-race-condition-for-step-endpoint-of-metadata-service">Handle race condition for <code>/step</code> endpoint of metadata service.<a class="hash-link" href="#handle-race-condition-for-step-endpoint-of-metadata-service" title="Direct link to heading">​</a></h4><p>The <code>foreach</code> step in AWS Step Functions launches multiple AWS Batch tasks, each of
which tries to register the step metadata if it already doesn&#x27;t exist. This can result
in a race condition and cause the task to fail. This patch properly handles the 409
response from the service.</p><p>PR <a href="https://github.com/Netflix/metaflow/pull/258" target="_blank" rel="noopener noreferrer">#258</a> &amp; PR
<a href="https://github.com/Netflix/metaflow/pull/260" target="_blank" rel="noopener noreferrer">#260</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="210-jul-29th-2020">2.1.0 (Jul 29th, 2020)<a class="hash-link" href="#210-jul-29th-2020" title="Direct link to heading">​</a></h2><p>The Metaflow 2.1.0 release is a minor release and introduces <a href="/production/scheduling-metaflow-flows/introduction">Metaflow&#x27;s integration
with AWS Step Functions</a>.</p><ul><li><a href="/internals/release-notes#features">Features</a><ul><li>Add capability to schedule Metaflow flows with AWS Step Functions.</li></ul></li><li><a href="/internals/release-notes#improvements">Improvements</a><ul><li>Fix log indenting in Metaflow.</li><li>Throw exception properly if fetching code package from Amazon S3 on AWS Batch fails.</li><li>Remove millisecond information from timestamps returned by Metaflow client.</li><li>Handle CloudWatchLogs resource creation delay gracefully.</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-12">Features<a class="hash-link" href="#features-12" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="add-capability-to-schedule-metaflow-flows-with-aws-step-functions">Add capability to schedule Metaflow flows with AWS Step Functions.<a class="hash-link" href="#add-capability-to-schedule-metaflow-flows-with-aws-step-functions" title="Direct link to heading">​</a></h4><p>Netflix uses an <a href="https://medium.com/@NetflixTechBlog/unbundling-data-science-workflows-with-metaflow-and-aws-step-functions-d454780c6280" target="_blank" rel="noopener noreferrer">internal DAG
scheduler</a>
to orchestrate most machine learning and ETL pipelines in production. Metaflow users at
Netflix can seamlessly deploy and schedule their flows to this scheduler. Now, with this
release, we are introducing a similar integration with <a href="https://aws.amazon.com/step-functions/" target="_blank" rel="noopener noreferrer">AWS Step
Functions</a> where Metaflow users can <a href="/production/scheduling-metaflow-flows/introduction">easily
deploy &amp; schedule their flows</a> by
simply executing</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python myflow.py step-functions create</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>which will create an AWS Step Functions state machine for them. With this feature,
Metaflow users can now enjoy all the features of Metaflow along with a highly available,
scalable, maintenance-free production scheduler without any changes in their existing
code.</p><p>We are also introducing a new decorator -
<a href="/production/scheduling-metaflow-flows/introduction#scheduling-a-flow"><code>@schedule</code></a>,
which allows Metaflow users to instrument time-based triggers via <a href="https://aws.amazon.com/eventbridge/" target="_blank" rel="noopener noreferrer">Amazon
EventBridge</a> for their flows deployed on AWS Step
Functions.</p><p>With this integration, Metaflow users can <a href="/metaflow/client">inspect</a> their flows
deployed on AWS Step Functions as before and <a href="/metaflow/debugging#reproducing-production-issues-locally">debug and
reproduce</a> results from AWS
Step Functions on their local laptop or within a notebook.</p><p><a href="/production/scheduling-metaflow-flows/introduction">Documentation</a>\
<a href="https://medium.com/@NetflixTechBlog/unbundling-data-science-workflows-with-metaflow-and-aws-step-functions-d454780c6280" target="_blank" rel="noopener noreferrer">Launch Blog
Post</a></p><p>PR <a href="https://github.com/Netflix/metaflow/pull/211" target="_blank" rel="noopener noreferrer">#211</a> addresses Issue
<a href="https://github.com/Netflix/metaflow/issues/2" target="_blank" rel="noopener noreferrer">#2</a>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="improvements">Improvements<a class="hash-link" href="#improvements" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-log-indenting-in-metaflow">Fix log indenting in Metaflow.<a class="hash-link" href="#fix-log-indenting-in-metaflow" title="Direct link to heading">​</a></h4><p>Metaflow was inadvertently removing leading whitespace from user-visible logs on the
console. Now Metaflow presents user-visible logs with the correct formatting.</p><p>PR <a href="https://github.com/Netflix/metaflow/pull/244" target="_blank" rel="noopener noreferrer">#244</a> fixed issue
<a href="https://github.com/Netflix/metaflow/issues/223" target="_blank" rel="noopener noreferrer">#223</a>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="throw-exception-properly-if-fetching-code-package-from-amazon-s3-on-aws-batch-fails">Throw exception properly if fetching code package from Amazon S3 on AWS Batch fails.<a class="hash-link" href="#throw-exception-properly-if-fetching-code-package-from-amazon-s3-on-aws-batch-fails" title="Direct link to heading">​</a></h4><p>Due to malformed permissions, AWS Batch might not be able to fetch the code package from
Amazon S3 for user code execution. In such scenarios, it wasn&#x27;t apparent to the user,
where the code package was being pulled from, making triaging any permission issue a bit
difficult. Now, the Amazon S3 file location is part of the exception stack trace.</p><p>PR <a href="https://github.com/Netflix/metaflow/pull/243" target="_blank" rel="noopener noreferrer">#243</a> fixed issue
<a href="https://github.com/Netflix/metaflow/issues/232" target="_blank" rel="noopener noreferrer">#232</a>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="remove-millisecond-information-from-timestamps-returned-by-metaflow-client">Remove millisecond information from timestamps returned by Metaflow client.<a class="hash-link" href="#remove-millisecond-information-from-timestamps-returned-by-metaflow-client" title="Direct link to heading">​</a></h4><p>Metaflow uses <code>time</code> to store the <code>created_at</code> and <code>finished_at</code> information for the
<code>Run</code> object returned by Metaflow client. <code>time</code> unfortunately does not support the
<a href="https://docs.python.org/3/library/time.html#time.strftime" target="_blank" rel="noopener noreferrer"><code>%f</code> directive</a>, making it
difficult to parse these fields by <code>datetime</code> or <code>time</code>. Since Metaflow doesn&#x27;t expose
timings at millisecond grain, this PR drops the <code>%f</code> directive.</p><p>PR <a href="https://github.com/Netflix/metaflow/pull/227" target="_blank" rel="noopener noreferrer">#227</a> fixed issue
<a href="https://github.com/Netflix/metaflow/issues/224" target="_blank" rel="noopener noreferrer">#224</a>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="handle-cloudwatchlogs-resource-creation-delay-gracefully">Handle CloudWatchLogs resource creation delay gracefully.<a class="hash-link" href="#handle-cloudwatchlogs-resource-creation-delay-gracefully" title="Direct link to heading">​</a></h4><p>When launching jobs on AWS Batch, the CloudWatchLogStream might not be immediately
created (and may never be created if say we fail to pull the docker image for any reason
whatsoever). Metaflow will now simply retry again next time.</p><p>PR <a href="https://github.com/Netflix/metaflow/pull/209" target="_blank" rel="noopener noreferrer">#209</a>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="205-apr-30th-2020">2.0.5 (Apr 30th, 2020)<a class="hash-link" href="#205-apr-30th-2020" title="Direct link to heading">​</a></h2><p>The Metaflow 2.0.5 release is a minor patch release.</p><ul><li>*<strong>*<!-- -->[</strong>Improvements<strong>](/internals/release-notes#2-0-5-improvements)<!-- -->*<!-- -->*</strong><ul><li>Fix logging of prefixes in <code>datatools.S3._read_many_files</code>.</li><li>Increase retry count for AWS Batch logs streaming.</li><li>Upper-bound <code>pylint</code> version to <code>&lt; 2.5.0</code> for compatibility issues.</li></ul></li></ul><p>The Metaflow 2.0.5 release is a minor patch release.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="improvements--1">Improvements <a href="#2-0-5-improvements" id="2-0-5-improvements"></a><a class="hash-link" href="#improvements--1" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-logging-of-prefixes-in-datatoolss3_read_many_files">Fix logging of prefixes in datatools.S3.<!-- -->_<!-- -->read_many_files<a class="hash-link" href="#fix-logging-of-prefixes-in-datatoolss3_read_many_files" title="Direct link to heading">​</a></h4><p>Avoid a cryptic error message when <code>datatools.S3._read_many_files</code> is unsuccessful by
converting <code>prefixes</code> from a generator to a list.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="increase-retry-count-for-aws-batch-logs-streaming">Increase retry count for AWS Batch logs streaming.<a class="hash-link" href="#increase-retry-count-for-aws-batch-logs-streaming" title="Direct link to heading">​</a></h4><p>Modify the retry behavior for log fetching on AWS Batch by adding jitters to exponential
backoffs as well as reset the retry counter for every successful request.</p><p>Additionally, fail the Metaflow task when we fail to stream the task logs back to the
user&#x27;s terminal even if AWS Batch task succeeds.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="upper-bound-pylint-version-to--250">Upper-bound pylint version to &lt; 2.5.0.<a class="hash-link" href="#upper-bound-pylint-version-to--250" title="Direct link to heading">​</a></h4><p><code>pylint</code> version <code>2.5.0</code> would mark Metaflow&#x27;s <code>self.next()</code> syntax as an error. As a
result, <code>python helloworld.py run</code> would fail at the pylint check step unless we run
with <code>--no-pylint</code>. This version upper-bound is supposed to automatically downgrade
<code>pylint</code> during <code>metaflow</code> installation if <code>pylint==2.5.0</code> has been installed.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="204-apr-28th-2020">2.0.4 (Apr 28th, 2020)<a class="hash-link" href="#204-apr-28th-2020" title="Direct link to heading">​</a></h2><p>The Metaflow 2.0.4 release is a minor patch release.</p><ul><li>*<strong>*<!-- -->[</strong>Improvements<strong>](release-notes#2-0-4-improvements)<!-- -->*<!-- -->*</strong><ul><li>Expose <code>retry_count</code> in
<a href="/scaling/tagging#accessing-current-ids-in-a-flow"><code>Current</code></a></li><li>Mute superfluous <code>ThrottleExceptions</code> in AWS Batch job logs</li></ul></li><li>*<strong>*<!-- -->[</strong>Bug Fixes<!-- -->*<!-- -->*<!-- -->](release-notes#2-0-4-bug-fixes)<ul><li>Set proper thresholds for retrying <code>DescribeJobs</code> API for AWS Batch</li><li>Explicitly override <code>PYTHONNOUSERSITE</code> for <code>conda</code> environments</li><li>Preempt AWS Batch job log collection when the job fails to get into a <code>RUNNING</code>
state</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="improvements--2">Improvements <a href="#2-0-4-improvements" id="2-0-4-improvements"></a><a class="hash-link" href="#improvements--2" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="expose-retry_count-in-current">Expose <code>retry_count</code> in <code>Current</code><a class="hash-link" href="#expose-retry_count-in-current" title="Direct link to heading">​</a></h4><p>You can now use the <a href="/scaling/tagging#accessing-current-ids-in-a-flow"><code>current</code></a>
singleton to access the <code>retry_count</code> of your task. The first attempt of the task will
have <code>retry_count</code> as 0 and subsequent retries will increment the <code>retry_count</code>. As an
example:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token decorator annotation punctuation" style="color:#393A34">@retry</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">my_step</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> metaflow </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> current</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;retry_count: %s&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">retry_count</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mute-superfluous-throttleexceptions-in-aws-batch-job-logs">Mute superfluous <code>ThrottleExceptions</code> in AWS Batch job logs<a class="hash-link" href="#mute-superfluous-throttleexceptions-in-aws-batch-job-logs" title="Direct link to heading">​</a></h4><p>The AWS Logs API for <code>get_log_events</code> has a global hard limit on 10 requests per sec.
While we have retry logic in place to respect this limit, some of the
<code>ThrottleExceptions</code> usually end up in the job logs causing confusion to the end-user.
This release addresses this issue (also documented in #184).</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes--1">Bug Fixes <a href="#2-0-4-bug-fixes" id="2-0-4-bug-fixes"></a><a class="hash-link" href="#bug-fixes--1" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="set-proper-thresholds-for-retrying-describejobs-api-for-aws-batch">Set proper thresholds for retrying <code>DescribeJobs</code> API for AWS Batch<a class="hash-link" href="#set-proper-thresholds-for-retrying-describejobs-api-for-aws-batch" title="Direct link to heading">​</a></h4><p>The AWS Batch API for <code>describe_jobs</code> throws <code>ThrottleExceptions</code> when managing a flow
with a very wide <code>for-each</code> step. This release adds retry behavior with backoffs to add
proper resiliency (addresses #138).</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="explicitly-override-pythonnousersite-for-conda-environments">Explicitly override <code>PYTHONNOUSERSITE</code> for <code>conda</code> environments<a class="hash-link" href="#explicitly-override-pythonnousersite-for-conda-environments" title="Direct link to heading">​</a></h4><p>In certain user environments, to properly isolate <code>conda</code> environments, we have to
explicitly override <code>PYTHONNOUSERSITE</code> rather than simply relying on <code>python -s</code>
(addresses #178).</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="preempt-aws-batch-job-log-collection-when-the-job-fails-to-get-into-a-running-state">Preempt AWS Batch job log collection when the job fails to get into a <code>RUNNING</code> state<a class="hash-link" href="#preempt-aws-batch-job-log-collection-when-the-job-fails-to-get-into-a-running-state" title="Direct link to heading">​</a></h4><p>Fixes a bug where if the AWS Batch job crashes before entering the <code>RUNNING</code> state
(often due to incorrect IAM perms), the previous log collection behavior would fail to
print the correct error message making it harder to debug the issue (addresses #185).</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="203-mar-6th-2020">2.0.3 (Mar 6th, 2020)<a class="hash-link" href="#203-mar-6th-2020" title="Direct link to heading">​</a></h2><p>The Metaflow 2.0.3 release is a minor patch release.</p><ul><li>*<strong>*<!-- -->[</strong>Improvements<strong>](/internals/release-notes#improvements)<!-- -->*<!-- -->*</strong><ul><li>Parameter listing</li><li>Ability to specify S3 endpoint</li><li>Usability improvements</li></ul></li><li>*<strong>*<!-- -->[</strong>Performance<strong>](/internals/release-notes#performance)<!-- -->*<!-- -->*</strong><ul><li>Conda</li></ul></li><li><a href="/internals/release-notes#bug-fixes"><strong>Bug Fixes</strong></a>*<!-- -->*<!-- -->*<!-- -->*<ul><li>Executing on AWS Batch</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="improvements-1">Improvements<a class="hash-link" href="#improvements-1" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="parameter-listing">Parameter listing<a class="hash-link" href="#parameter-listing" title="Direct link to heading">​</a></h4><p>You can now use the <code>current</code> singleton (documented
<a href="/scaling/tagging#accessing-current-ids-in-a-flow">here</a>) to access the names of the
parameters passed into your flow. As an example:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> var </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">parameter_names</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Parameter %s has value %s&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">var</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">getattr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This addresses <a href="https://github.com/Netflix/metaflow/issues/137" target="_blank" rel="noopener noreferrer">#137</a>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="usability-improvements">Usability improvements<a class="hash-link" href="#usability-improvements" title="Direct link to heading">​</a></h4><p>A few issues were addressed to improve the usability of Metaflow. In particular, <code>show</code>
now properly respects indentation making the description of steps and flows more
readable. This addresses <a href="https://github.com/Netflix/metaflow/issues/92" target="_blank" rel="noopener noreferrer">#92</a>.
Superfluous print messages were also suppressed when executing on AWS batch with the
local metadata provider (<a href="https://github.com/Netflix/metaflow/pull/152" target="_blank" rel="noopener noreferrer">#152</a>).</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="performance">Performance<a class="hash-link" href="#performance" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="conda">Conda<a class="hash-link" href="#conda" title="Direct link to heading">​</a></h4><p>A smaller, newer and standalone Conda installer is now used resulting in faster and more
reliable Conda bootstrapping (<a href="https://github.com/Netflix/metaflow/pull/123" target="_blank" rel="noopener noreferrer">#123</a>).</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-18">Bug Fixes<a class="hash-link" href="#bug-fixes-18" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="executing-on-aws-batch">Executing on AWS Batch<a class="hash-link" href="#executing-on-aws-batch" title="Direct link to heading">​</a></h4><p>We now check for the command line <code>--datastore-root</code> prior to using the environment
variable <code>METAFLOW_DATASTORE_SYSROOT_S3</code> when determining the S3 root
(<a href="https://github.com/Netflix/metaflow/pull/134" target="_blank" rel="noopener noreferrer">#134</a>). This release also fixes an issue
where using the local Metadata provider with AWS batch resulted in incorrect directory
structure in the <code>.metaflow</code> directory
(<a href="https://github.com/Netflix/metaflow/pull/141" target="_blank" rel="noopener noreferrer">#141</a>).</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="202-feb-11th-2020">2.0.2 (Feb 11th, 2020)<a class="hash-link" href="#202-feb-11th-2020" title="Direct link to heading">​</a></h2><p>Bug Fixes</p><ul><li><a href="https://github.com/Netflix/metaflow/pull/107" target="_blank" rel="noopener noreferrer">Pin</a> click to v7.0 or greater</li><li><a href="https://github.com/Netflix/metaflow/pull/118" target="_blank" rel="noopener noreferrer">Add</a> checks to conda-package metadata
to guard against .conda packages</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="201-dec-16th-2019">2.0.1 (Dec 16th, 2019)<a class="hash-link" href="#201-dec-16th-2019" title="Direct link to heading">​</a></h2><p>Enhancements</p><ul><li><a href="https://github.com/Netflix/metaflow/pull/53" target="_blank" rel="noopener noreferrer">Introduce</a> <code>metaflow configure
[import|export]</code> for importing/exporting Metaflow configurations.</li><li><a href="https://github.com/Netflix/metaflow/pull/59" target="_blank" rel="noopener noreferrer">Revamp</a> <code>metaflow configure aws</code> command
to address usability <a href="https://github.com/Netflix/metaflow/issues/44" target="_blank" rel="noopener noreferrer">concerns</a>.</li><li><a href="https://github.com/Netflix/metaflow/pull/56" target="_blank" rel="noopener noreferrer">Handle</a> keyboard interrupts for Batch
jobs <a href="https://github.com/Netflix/metaflow/issues/54" target="_blank" rel="noopener noreferrer">more gracefully for large
fan-outs</a>.</li></ul><p>Bug Fixes</p><ul><li><a href="https://github.com/Netflix/metaflow/pull/62" target="_blank" rel="noopener noreferrer">Fix</a> a docker registry parsing bug in
AWS Batch.</li><li>Fix various typos in Metaflow tutorials.</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="200-dec-3rd-2019">2.0.0 (Dec 3rd, 2019)<a class="hash-link" href="#200-dec-3rd-2019" title="Direct link to heading">​</a></h2><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="hello-world">Hello World!<a class="hash-link" href="#hello-world" title="Direct link to heading">​</a></h4><ul><li>First Open Source Release.</li><li>Read the
<a href="https://medium.com/@NetflixTechBlog/open-sourcing-metaflow-a-human-centric-framework-for-data-science-fa72e04a5d9" target="_blank" rel="noopener noreferrer">blogpost</a>
announcing the release</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="releases-pre-200-were-internal-to-netflix">Releases pre-2.0.0 were internal to Netflix<a class="hash-link" href="#releases-pre-200-were-internal-to-netflix" title="Direct link to heading">​</a></h2></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.dev/Netflix/metaflow-docs/blob/master/docs/internals/release-notes.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/api/flow-decorators/trigger_on_finish"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">@trigger_on_finish</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/internals/technical-overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Technical Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#261-may-13-2022" class="table-of-contents__link toc-highlight">2.6.1 (May 13, 2022)</a></li><li><a href="#260-apr-25-2022" class="table-of-contents__link toc-highlight">2.6.0 (Apr 25, 2022)</a></li><li><a href="#254-mar-24-2022" class="table-of-contents__link toc-highlight">2.5.4 (Mar 24, 2022)</a></li><li><a href="#253-mar-7-2022" class="table-of-contents__link toc-highlight">2.5.3 (Mar 7, 2022)</a></li><li><a href="#252-feb-16-2022" class="table-of-contents__link toc-highlight">2.5.2 (Feb 16, 2022)</a></li><li><a href="#251-feb-15-2022" class="table-of-contents__link toc-highlight">2.5.1 (Feb 15, 2022)</a></li><li><a href="#250-jan-25-2022" class="table-of-contents__link toc-highlight">2.5.0 (Jan 25, 2022)</a></li><li><a href="#249-jan-18-2022" class="table-of-contents__link toc-highlight">2.4.9 (Jan 18, 2022)</a></li><li><a href="#248-jan-10-2022" class="table-of-contents__link toc-highlight">2.4.8 (Jan 10, 2022)</a></li><li><a href="#247-dec-16-2021" class="table-of-contents__link toc-highlight">2.4.7 (Dec 16, 2021)</a></li><li><a href="#246-dec-16-2021" class="table-of-contents__link toc-highlight">2.4.6 (Dec 16, 2021)</a></li><li><a href="#245-dec-8-2021" class="table-of-contents__link toc-highlight">2.4.5 (Dec 8, 2021)</a></li><li><a href="#244-nov-29-2021" class="table-of-contents__link toc-highlight">2.4.4 (Nov 29, 2021)</a><ul><li><a href="#improvements-" class="table-of-contents__link toc-highlight">Improvements <a href="#user-content-v2.4.4_improvements" id="user-content-v2.4.4_improvements"></a></a></li></ul></li><li><a href="#243-nov-3rd-2021" class="table-of-contents__link toc-highlight">2.4.3 (Nov 3rd 2021)</a><ul><li><a href="#bug-fixes-" class="table-of-contents__link toc-highlight">Bug Fixes <a href="#user-content-v2.4.3_bugs" id="user-content-v2.4.3_bugs"></a></a></li></ul></li><li><a href="#242-oct-25th-2021" class="table-of-contents__link toc-highlight">2.4.2 (Oct 25th, 2021)</a><ul><li><a href="#bug-fixes" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#241-oct-18th-2021" class="table-of-contents__link toc-highlight">2.4.1 (Oct 18th, 2021)</a><ul><li><a href="#bug-fixes-1" class="table-of-contents__link toc-highlight">Bug Fixes</a></li><li><a href="#new-features" class="table-of-contents__link toc-highlight">New Features</a></li></ul></li><li><a href="#240-oct-4th-2021" class="table-of-contents__link toc-highlight">2.4.0 (Oct 4th, 2021)</a><ul><li><a href="#breaking-changes" class="table-of-contents__link toc-highlight">Breaking Changes</a></li><li><a href="#bug-fixes-2" class="table-of-contents__link toc-highlight">Bug Fixes</a></li><li><a href="#new-features-1" class="table-of-contents__link toc-highlight">New Features</a></li></ul></li><li><a href="#236-sep-8th-2021" class="table-of-contents__link toc-highlight">2.3.6 (Sep 8th, 2021)</a><ul><li><a href="#bug-fixes-3" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#235-aug-23rd-2021" class="table-of-contents__link toc-highlight">2.3.5 (Aug 23rd, 2021)</a><ul><li><a href="#features" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-4" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#234-aug-11th-2021" class="table-of-contents__link toc-highlight">2.3.4 (Aug 11th, 2021)</a><ul><li><a href="#bug-fixes-5" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#233-jul-29th-2021" class="table-of-contents__link toc-highlight">2.3.3 (Jul 29th, 2021)</a><ul><li><a href="#features-1" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-6" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#232-jun-29th-2021" class="table-of-contents__link toc-highlight">2.3.2 (Jun 29th, 2021)</a><ul><li><a href="#features-2" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#231-jun-23rd-2021" class="table-of-contents__link toc-highlight">2.3.1 (Jun 23rd, 2021)</a><ul><li><a href="#features-3" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#230-may-27th-2021" class="table-of-contents__link toc-highlight">2.3.0 (May 27th, 2021)</a><ul><li><a href="#features-4" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#2213-may-19th-2021" class="table-of-contents__link toc-highlight">2.2.13 (May 19th, 2021)</a><ul><li><a href="#bug-fixes-7" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#2212-may-18th-2021" class="table-of-contents__link toc-highlight">2.2.12 (May 18th, 2021)</a><ul><li><a href="#features-5" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-8" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#2211-apr-30th-2021" class="table-of-contents__link toc-highlight">2.2.11 (Apr 30th, 2021)</a><ul><li><a href="#bug-fixes-9" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#2210-apr-22nd-2021" class="table-of-contents__link toc-highlight">2.2.10 (Apr 22nd, 2021)</a><ul><li><a href="#features-6" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-10" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#229-apr-19th-2021" class="table-of-contents__link toc-highlight">2.2.9 (Apr 19th, 2021)</a><ul><li><a href="#bugs" class="table-of-contents__link toc-highlight">Bugs</a></li></ul></li><li><a href="#228-mar-15th-2021" class="table-of-contents__link toc-highlight">2.2.8 (Mar 15th, 2021)</a><ul><li><a href="#bugs-1" class="table-of-contents__link toc-highlight">Bugs</a></li></ul></li><li><a href="#227-feb-8th-2021" class="table-of-contents__link toc-highlight">2.2.7 (Feb 8th, 2021)</a><ul><li><a href="#bugs-2" class="table-of-contents__link toc-highlight">Bugs</a></li></ul></li><li><a href="#226-jan-26th-2021" class="table-of-contents__link toc-highlight">2.2.6 (Jan 26th, 2021)</a><ul><li><a href="#features-7" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-11" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#225-nov-11th-2020" class="table-of-contents__link toc-highlight">2.2.5 (Nov 11th, 2020)</a><ul><li><a href="#features-8" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-12" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#224-oct-28th-2020" class="table-of-contents__link toc-highlight">2.2.4 (Oct 28th, 2020)</a><ul><li><a href="#features-9" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-13" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#223-sept-8th-2020" class="table-of-contents__link toc-highlight">2.2.3 (Sept 8th, 2020)</a><ul><li><a href="#bug-fixes-14" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#222-aug-20th-2020" class="table-of-contents__link toc-highlight">2.2.2 (Aug 20th, 2020)</a><ul><li><a href="#bug-fixes-15" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#221-aug-17th-2020" class="table-of-contents__link toc-highlight">2.2.1 (Aug 17th, 2020)</a><ul><li><a href="#features-10" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-16" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#220-aug-4th-2020" class="table-of-contents__link toc-highlight">2.2.0 (Aug 4th, 2020)</a><ul><li><a href="#features-11" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#211-jul-30th-2020" class="table-of-contents__link toc-highlight">2.1.1 (Jul 30th, 2020)</a><ul><li><a href="#bug-fixes-17" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#210-jul-29th-2020" class="table-of-contents__link toc-highlight">2.1.0 (Jul 29th, 2020)</a><ul><li><a href="#features-12" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#improvements" class="table-of-contents__link toc-highlight">Improvements</a></li></ul></li><li><a href="#205-apr-30th-2020" class="table-of-contents__link toc-highlight">2.0.5 (Apr 30th, 2020)</a><ul><li><a href="#improvements--1" class="table-of-contents__link toc-highlight">Improvements <a href="#2-0-5-improvements" id="2-0-5-improvements"></a></a></li></ul></li><li><a href="#204-apr-28th-2020" class="table-of-contents__link toc-highlight">2.0.4 (Apr 28th, 2020)</a><ul><li><a href="#improvements--2" class="table-of-contents__link toc-highlight">Improvements <a href="#2-0-4-improvements" id="2-0-4-improvements"></a></a></li><li><a href="#bug-fixes--1" class="table-of-contents__link toc-highlight">Bug Fixes <a href="#2-0-4-bug-fixes" id="2-0-4-bug-fixes"></a></a></li></ul></li><li><a href="#203-mar-6th-2020" class="table-of-contents__link toc-highlight">2.0.3 (Mar 6th, 2020)</a><ul><li><a href="#improvements-1" class="table-of-contents__link toc-highlight">Improvements</a></li><li><a href="#performance" class="table-of-contents__link toc-highlight">Performance</a></li><li><a href="#bug-fixes-18" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#202-feb-11th-2020" class="table-of-contents__link toc-highlight">2.0.2 (Feb 11th, 2020)</a></li><li><a href="#201-dec-16th-2019" class="table-of-contents__link toc-highlight">2.0.1 (Dec 16th, 2019)</a></li><li><a href="#200-dec-3rd-2019" class="table-of-contents__link toc-highlight">2.0.0 (Dec 3rd, 2019)</a></li><li><a href="#releases-pre-200-were-internal-to-netflix" class="table-of-contents__link toc-highlight">Releases pre-2.0.0 were internal to Netflix</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.432db519.js"></script>
<script src="/assets/js/main.9f384454.js"></script>
</body>
</html>