<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-v/r/metaflow/tagging">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EYFXNGNGB6"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-EYFXNGNGB6",{anonymize_ip:!0})</script><title data-rh="true">Organizing Results | Metaflow Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.metaflow.org/img/og-metaflow.png"><meta data-rh="true" name="twitter:image" content="https://docs.metaflow.org/img/og-metaflow.png"><meta data-rh="true" property="og:url" content="https://docs.metaflow.org/v/r/metaflow/tagging"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:width" content="200"><meta data-rh="true" name="og:height" content="126"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Organizing Results | Metaflow Docs"><meta data-rh="true" name="description" content="A boring, under-appreciated part of high-quality science \(or any project work in"><meta data-rh="true" property="og:description" content="A boring, under-appreciated part of high-quality science \(or any project work in"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.metaflow.org/v/r/metaflow/tagging"><link data-rh="true" rel="alternate" href="https://docs.metaflow.org/v/r/metaflow/tagging" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.metaflow.org/v/r/metaflow/tagging" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://5IZ8L9TJQL-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.57e5c9db.css">
<link rel="preload" href="/assets/js/runtime~main.46b91267.js" as="script">
<link rel="preload" href="/assets/js/main.f9ec58aa.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_jvwV"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Metaflow_Logo_Horizontal_OneColor_DarkBlue_RGB.svg" alt="Metaflow Logo" class="themedImage_ToTc themedImage--light_HNdA" height="30"><img src="/img/Metaflow_Logo_Horizontal_OneColor_White_RGB.svg" alt="Metaflow Logo" class="themedImage_ToTc themedImage--dark_i4oU" height="30"></div></a><a class="navbar__item navbar__link" href="/">Documentation</a><a href="https://outerbounds.com/docs/admin" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Deployment Guide<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div style="display:flex;align-items:center"><div class="responsivePadding_cpaU" style="display:flex;align-items:center;gap:0.75rem"><a href="https://github.com/Netflix/metaflow" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><img src="/img/github.svg" alt="GitHub" class="logo_v_H3 githubLogo"></a><a href="http://slack.outerbounds.co/" target="_blank" rel="noopener noreferrer" aria-label="Slack"><img class="logo_v_H3" src="/img/slack.svg" alt="Slack"></a></div><div class="toggle_vylO colorModeToggle_x44X"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Organizing Results</h1><p>A boring, under-appreciated part of high-quality science <!-- -->(<!-- -->or any project work in
general<!-- -->)<!-- -->, is keeping results organized. This is the key to effective collaboration,
versioning of parallel lines of work, and reproducibility.</p><p>The good news is that Metaflow does 80% of this work for you without you having to do
anything. This document explains how Metaflow keeps things organized with a concept
called <strong>namespaces</strong> and how you can optionally make results even neater with <strong>tags</strong>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="namespaces">Namespaces<a class="hash-link" href="#namespaces" title="Direct link to heading">â€‹</a></h2><p>As explained in <a href="/v/r/metaflow/basics">Basics of Metaflow</a>, Metaflow persists all runs and all the
data artifacts they produce. Every run gets a unique run ID, e.g. <code>HelloFlow/546</code>, which
can be used to refer to a specific set of results. You can access these results with the
<a href="/v/r/metaflow/client">Client API</a>.</p><p>Many users can use Metaflow concurrently. Imagine that Anne and Will are collaborating
on a project that consists of two flows, <code>PredictionFlow</code> and <code>FeatureFlow</code>. As they,
amongst other people, run their versions independently they end up with the following
runs:</p><p><img loading="lazy" src="/assets/images/assets_metaflow_-lpjn0yp7r49jrnxca_5_-lpjryuuy7v5kovmxtsv_namespace1-0868414851a2703b7058dda77294743a.png" width="596" height="418" class="img_ev3q"></p><p>Anne could analyze her latest <code>PredictionFlow</code> results in a notebook by remembering that
her latest run is <code>PredictionFlow/8</code>. Fortunately, Metaflow makes this even easier
thanks to <strong>namespaces</strong>:</p><p><img loading="lazy" src="/assets/images/assets_metaflow_-lpjn0yp7r49jrnxca_5_-lpjryuvqmspdu9w5imb_namespace2-e6724671478c141360319922e3eb45b5.png" width="686" height="494" class="img_ev3q"></p><p>When Anne runs <code>PredictionFlow</code>, her runs are automatically <strong>tagged</strong> with her
username, prefixed with <code>user:</code>. By default, when Anne uses the <a href="/v/r/metaflow/client">Client API</a>,
the API only returns results that are tagged with <code>user:anne</code>. Instead of having to
remember the exact ID of her latest run, she can simply say:</p><div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">library(metaflow)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">run &lt;- flow_client$new(&#x27;PredictionFlow&#x27;)$latest_run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For Anne, this will return <code>&#x27;PredictionFlow/8&#x27;</code>. For Will, this will return
<code>&#x27;PredictionFlow/5&#x27;</code>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="switching-namespaces">Switching Namespaces<a class="hash-link" href="#switching-namespaces" title="Direct link to heading">â€‹</a></h3><p>Namespaces are not about security or access control. They help you to keep results
organized. During development, organizing results by the user who produced them is a
sensible default.</p><p>You can freely explore results produced by other people. In a notebook <!-- -->(<!-- -->for example<!-- -->)<!-- -->,
Anne can write</p><div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">library(metaflow)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set_namespace(&#x27;user:will&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">run &lt;- flow_client$new(&#x27;PredictionFlow&#x27;)$latest_run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>to see Will&#x27;s latest results, in this case, <code>&#x27;PredictionFlow/5&#x27;</code>.</p><p>You can also access a specific run given its ID directly:</p><div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">library(metaflow)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">run &lt;- flow_client$new(&#x27;PredictionFlow&#x27;)$run(&quot;5&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>However, this will fail for Anne, since <code>PredictionFlow/5</code> is in Will&#x27;s namespace. An
important feature of namespaces is to make sure that you can&#x27;t accidentally use someone
else&#x27;s results, which could lead to hard-to-debug, incorrect analyses.</p><p>If Anne wants to access Will&#x27;s results, she must do so explicitly by switching to Will&#x27;s
namespace:</p><div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">library(metaflow)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set_namespace(&#x27;user:will&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">run &lt;- flow_client$new(&#x27;PredictionFlow&#x27;)$run(&quot;5&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In other words, you can use the Client API freely without having to worry about using
incorrect results by accident.</p><p>If you use the Client API in your flows to access results of other flows, you can use
the <code>--namespace</code> flag on the command line to switch between namespaces. This is a
better approach than hardcoding a <code>set_namespace()</code> function call in the code that
defines your Metaflow workflow.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="global-namespace">Global Namespace<a class="hash-link" href="#global-namespace" title="Direct link to heading">â€‹</a></h3><p>What if you know a run ID, but you don&#x27;t know whose namespace it belongs to? No worries,
you can access all results in the Metaflow universe in the <strong>global namespace</strong>:</p><div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">library(metaflow)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set_namespace(NULL)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">run &lt;- flow_client$new(&#x27;PredictionFlow&#x27;)$run(&quot;5&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Running <code>set_namespace(NULL)</code> allows you to access all results without limitations. Be
careful though: relative references like <code>latest_run</code> make little sense in the global
namespace since anyone can produce a new run at any time.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resuming-across-namespaces">Resuming across namespaces<a class="hash-link" href="#resuming-across-namespaces" title="Direct link to heading">â€‹</a></h3><p><a href="/v/r/metaflow/debugging#how-to-use-the-resume-command">The <code>resume</code> command</a> is smart enough to work
across production and personal namespaces. You can <code>resume</code> a production workflow
without having to do anything special with namespaces.</p><p>You can resume runs of other users, and you can resume any production runs. The results
of your resumed runs are always created in your personal namespace.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="production-namespaces">Production Namespaces<a class="hash-link" href="#production-namespaces" title="Direct link to heading">â€‹</a></h2><p>During development, namespacing by the username feels natural. However, when you
<a href="/v/r/going-to-production-with-metaflow/scheduling-metaflow-flows">schedule your flow to run
automatically</a>, runs are
not related to a specific user anymore. It is typical for multiple people to collaborate
on a project that has a canonical production version. It is not obvious which user
&quot;owns&quot; the production version.</p><p>Moreover, it is critical that you, and all other people, can keep experimenting on the
project without having to worry about breaking the production version. If the production
flow ran in the namespace of any individual, relative references like <code>latest_run</code> could
break the production easily as the user keeps executing experimental runs.</p><p>As a solution, by default the production namespace is made separate from the
usernamespace:</p><p><img loading="lazy" src="/assets/images/namespace4_(3)-9e825aaf633bd9c3557c35b34291c647.png" width="881" height="498" class="img_ev3q"></p><p>Isolated production namespaces have three main benefits:</p><ol><li>Production tokens allow all users of Metaflow to <strong>experiment freely</strong> with any
project without having to worry about accidentally breaking a production deployment.
Even if they ran step-functions create, they could not overwrite a production version
without explicit consent, via a shared production token, by the person who did the
previously authorized deployment.</li><li>An isolated production namespace makes it easy to <strong>keep production results separate
from any experimental runs</strong> of the same project running concurrently. You can rest
assured that when you switch to a production namespace, you will see only results
related to production - nothing more, nothing less.</li><li>By having control over the production namespace, you can <strong>alter data that is seen by
production flows</strong>. For instance, if you have separate training and prediction flows
in production, the prediction flow can access the previously built model as long as
one exists in the same namespace. By changing the production namespace, you can make
sure that a new deployment isn&#x27;t tainted by old results.</li></ol><p>If you are a single developer working on a new project, you don&#x27;t have to do anything
special to deal with production namespaces. You can rely on the default behavior of
<code>step-functions create</code>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="production-tokens">Production tokens<a class="hash-link" href="#production-tokens" title="Direct link to heading">â€‹</a></h3><p>When you deploy a Flow to production for the first time, Metaflow creates a new,
isolated production namespace for your production flow. This namespace is identified by
a <strong>production token</strong>, which is a random identifier that identifies a production
deployment, e.g. production:PredictionFlow3 above. You can examine production results in
a notebook by switching to the production namespace.</p><p>If another person wants to deploy a new version of the flow to production, they must use
the same production token. You, or whoever has the token, are responsible for sharing it
with users who are authorized to deploy new versions to production. This manual step
should prevent random users from deploying versions to production inadvertently.</p><p>After you have shared the production token with another person, they can deploy a new
version with</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Bash</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">RStudio</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Rscript production_flow.R step-functions create --authorize TOKEN_YOU_SHARED_WITH_THEM</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  step(step = &quot;end&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ...)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  %&gt;%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  run(step_fucntions = &quot;create&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    authorize = &quot;TOKEN_YOU_SHARED_WITH_THEM&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>They need to use the <code>--authorize</code> option only once. Metaflow stores the token for them
after the first deployment, so they need to do this only once.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resetting-a-production-namespace">Resetting a production namespace<a class="hash-link" href="#resetting-a-production-namespace" title="Direct link to heading">â€‹</a></h3><p>If you call <code>step-functions create</code> again, it will deploy an updated version of your
code in the existing production namespace of the flow.</p><p>Sometimes the code has changed so drastically that you want to recreate a fresh
namespace for its results. You can do this as follows:</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Bash</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">RStudio</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Rscript production_flow.R step-functions create --generate-new-token</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  step(step = &quot;end&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ...)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  %&gt;%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  run(step_fucntions = &quot;create&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      generate_new_token = TRUE)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>This will deploy a new version in production using a fresh, empty namespace</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tagging">Tagging<a class="hash-link" href="#tagging" title="Direct link to heading">â€‹</a></h2><p>The <code>user:</code> tag is assigned by Metaflow automatically. In addition to automatically
assigned tags, you can add and remove arbitrary tags in objects. Tags are an excellent
way to add extra annotations to runs, tasks etc., which makes it easier for you and
other people to find and retrieve results of interest.</p><p>An easy way to add tags is the <code>--tag</code> command line option. You can add multiple tags
with multiple <code>--tag</code> options. For instance, this will annotate a <code>HelloFlow</code> run with a
tag <code>crazy_test</code>.</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Terminal</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">RStudio</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Rscript helloworld.R run --tag crazy_test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Replace run() in helloworld.R with</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># run(tag = c(&quot;crazy_test&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># and execute in RStudio</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>The <code>--tag</code> option assigns the specified tag to all objects produced by the run: the run
itself, its steps, tasks, and data artifacts.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="accessing-tags">Accessing Tags<a class="hash-link" href="#accessing-tags" title="Direct link to heading">â€‹</a></h3><p>You can access runs <!-- -->(<!-- -->or steps or tasks<!-- -->)<!-- --> with a certain tag easily using the Client
API:</p><div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">library(metaflow)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">run &lt;- flow_client$new(&quot;HelloFlow&quot;).runs_with_tags(&quot;crazy_test&quot;)[[1]]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will return the latest run of <code>HelloFlow</code> with a tag <code>crazy_test</code> in your
namespace. Filtering is performed both based on the current <code>set_namespace()</code> and the
tag filter.</p><p>You can also filter by multiple tags:</p><div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">library(metaflow)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">run &lt;- flow_client$new(&quot;HelloFlow&quot;).runs_with_tags(&quot;crazy_test&quot;, &quot;date:2020-06-01&quot;)[[1]]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This requires that all the tags listed, and the current namespace, are present in the
object.</p><p>You can see the set of tags assigned to an object with the <code>.tags</code> property. In the
above case, <code>run.tags</code> would return a set with a string <code>crazy_test</code> amongst other
automatically assigned tags.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tags-as-namespaces">Tags as Namespaces<a class="hash-link" href="#tags-as-namespaces" title="Direct link to heading">â€‹</a></h3><p>Let&#x27;s consider again the earlier example with Anne and Will. They are working on their
own versions of <code>PredictionFlow</code> but they want to collaborate on <code>FeatureFlow</code>. They
could add a descriptive tag, say <code>xyz_features</code>, to <code>FeatureFlow</code> runs.</p><p>Now, they can easily get the latest results of <code>FeatureFlow</code> regardless of the user who
ran the flow:</p><div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">library(metaflow)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set_namespace(&#x27;xyz_features&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">run &lt;- flow_client$new(&#x27;FeatureFlow&#x27;)$latest_run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will return <code>FeatureFlow/34</code> which happened to be run by Anne. If Will runs the
flow again, his results will be the latest results in this namespace.</p><p>We encourage you to use a combination of namespaces, domain-specific tags, and filtering
by tags to design a workflow that works well for your project.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="accessing-current-ids-in-a-flow">Accessing Current IDs in a Flow<a class="hash-link" href="#accessing-current-ids-in-a-flow" title="Direct link to heading">â€‹</a></h2><p>Tagging and namespaces, together with the <a href="/v/r/metaflow/client">Client API</a>, are the main ways for
accessing results of past runs. Metaflow uses these mechanisms to organize and isolate
results automatically, so in most cases you don&#x27;t have to do anything.</p><p>However, in some cases you may need to deal with IDs explicitly. For instance, if your
flow interacts with external systems, it is a good idea to inform the external system
about the identity of the run, so you can trace back any issues to a specific run. Also
IDs can come in handy if you need to version externally stored data.</p><p>For this purpose, Metaflow provides a singleton object <code>current</code> that represents the
identity of the currently running task. Use it in your <code>FlowSpec</code> to retrieve current
IDs of interest:</p><div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">current_flow.R</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">library(metaflow)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">start &lt;- function(self){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(paste0(&quot;flow name: &quot;, current(&quot;flow_name&quot;)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(paste0(&quot;run id: &quot;, current(&quot;run_id&quot;)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(paste0(&quot;origin run id: &quot;, current(&quot;origin_run_id&quot;)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(paste0(&quot;step name: &quot;, current(&quot;step_name&quot;)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(paste0(&quot;task id: &quot;, current(&quot;task_id&quot;)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(paste0(&quot;pathspec: &quot;, current(&quot;pathspec&quot;)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(paste0(&quot;username: &quot;, current(&quot;username&quot;)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metaflow(&quot;CurrentFlow&quot;) %&gt;%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    step(step=&quot;start&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         r_function=start,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         next_step=&quot;end&quot;) %&gt;%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    step(step=&quot;end&quot;) %&gt;%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    run()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can see the output</p><div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">2020-06-19 21:19:03.387 [198/start/1139 (pid 64853)] [1] &quot;flow name: CurrentFlow&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-06-19 21:19:03.387 [198/start/1139 (pid 64853)] [1] &quot;run id: 198&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-06-19 21:19:03.387 [198/start/1139 (pid 64853)] [1] &quot;origin run id: &quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-06-19 21:19:03.388 [198/start/1139 (pid 64853)] [1] &quot;step name: start&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-06-19 21:19:03.388 [198/start/1139 (pid 64853)] [1] &quot;task id: 1139&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-06-19 21:19:03.389 [198/start/1139 (pid 64853)] [1] &quot;pathspec: CurrentFlow/198/start/1139&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-06-19 21:19:03.389 [198/start/1139 (pid 64853)] [1] &quot;username: jge&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-06-19 21:19:08.400 [198/start/1139 (pid 64853)] Task finished successfully.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>current</code> singleton also provides programmatic access to the CLI option
<code>--origin-run-id</code> used by the <a href="/v/r/metaflow/debugging#how-to-use-the-resume-command">resume</a> within
your flow code.</p><p>For regular <code>run</code> invocations, the value of <code>current(&quot;origin_run_id&quot;)</code> is <code>NULL</code>.</p><p>If a user explicitly overrides the CLI option <code>--origin-run-id</code>, the <code>current</code> singleton
would reflect that value. Suppose we invoked <code>resume</code> for the above script to re-run
everything from <code>start</code> without explicitly overriding the CLI option <code>origin-run-id</code>, we
can see the value chosen by Metaflow using the <code>current</code> singleton:</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Bash</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">RStudio</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Rscript current_flow.R resume start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Replace run() in current_flow.R with</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># run(resume = &quot;start&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># and execute in RStudio</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>You should see the <code>origin_run_id</code> used by the <code>resume</code> in the output <!-- -->(<!-- -->the exact value
for you might be different<!-- -->)<!-- -->:</p><div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;origin run id: 198&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.dev/Netflix/metaflow-docs/blob/master/docs/v/r/metaflow/tagging.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#namespaces" class="table-of-contents__link toc-highlight">Namespaces</a><ul><li><a href="#switching-namespaces" class="table-of-contents__link toc-highlight">Switching Namespaces</a></li><li><a href="#global-namespace" class="table-of-contents__link toc-highlight">Global Namespace</a></li><li><a href="#resuming-across-namespaces" class="table-of-contents__link toc-highlight">Resuming across namespaces</a></li></ul></li><li><a href="#production-namespaces" class="table-of-contents__link toc-highlight">Production Namespaces</a><ul><li><a href="#production-tokens" class="table-of-contents__link toc-highlight">Production tokens</a></li><li><a href="#resetting-a-production-namespace" class="table-of-contents__link toc-highlight">Resetting a production namespace</a></li></ul></li><li><a href="#tagging" class="table-of-contents__link toc-highlight">Tagging</a><ul><li><a href="#accessing-tags" class="table-of-contents__link toc-highlight">Accessing Tags</a></li><li><a href="#tags-as-namespaces" class="table-of-contents__link toc-highlight">Tags as Namespaces</a></li></ul></li><li><a href="#accessing-current-ids-in-a-flow" class="table-of-contents__link toc-highlight">Accessing Current IDs in a Flow</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.46b91267.js"></script>
<script src="/assets/js/main.f9ec58aa.js"></script>
</body>
</html>